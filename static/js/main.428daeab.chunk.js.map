{"version":3,"sources":["images/AdeptaSororitas.png","images/AdeptusMechanicus.png","images/AstraMilitarum.png","images/Core.png","images/CreateWarband.png","images/DarkAngels.png","images/Deathwatch.png","images/Decrease.png","images/Delete.png","images/down.png","images/ExportWarband.png","images/Gear.png","images/ImportWarband.png","images/Increase.png","images/Keys.png","images/Leader.png","images/LegendaryIcon.png","images/OpenEditor.png","images/OpenEditorSelected.png","images/RefreshWarband.png","images/RefreshWarbandDisabled.png","images/Rules.png","images/SavePdf.png","images/SpaceMarines.png","images/Special.png","images/Stats.png","images/TauEmpire.png","images/up.png","images/UseSample.png","types.ts","images/index.ts","utility/FileUploader.tsx","data/redux/actions.ts","utility/PdfGenerator.tsx","utility/ErrorMessages.tsx","utility/Utils.ts","utility/StratagemValidator.tsx","CodeMirror.tsx","utility/DropdownMenu.tsx","utility/AddModelComponent.tsx","utility/AllowanceComponent.tsx","utility/ToggleEditor.tsx","utility/WarbandExport.tsx","utility/Toolbar.tsx","WarbandRendering/ArmyKeywords.tsx","WarbandRendering/ArmyRules.tsx","WarbandRendering/ArmyTacticalPoints.tsx","WarbandRendering/dialogs/ModifyKeywordsDialog.tsx","WarbandRendering/dialogs/ModifyStatsDialog.tsx","WarbandRendering/ModelEquipment.tsx","WarbandRendering/ModelHeaderRenderer.tsx","WarbandRendering/ModelKeywords.tsx","WarbandRendering/ModelRules.tsx","WarbandRendering/ModelStats.tsx","WarbandRendering/ModelSheet.tsx","WarbandRendering/WarbandRenderer.tsx","pages/BuilderPage.tsx","pages/LandingPage.tsx","warbandCreation/AlignmentSelector.tsx","warbandCreation/FactionSelector.tsx","warbandCreation/PhilosophySelector.tsx","pages/NewWarbandPage.tsx","pages/SamplesPage.tsx","App.tsx","serviceWorker.ts","index.tsx","data/redux/reducer.ts"],"names":["module","exports","FactionEnum","ModelType","UseSampleIcon","UseSamplePng","DarkAngelsCover","DarkAngelsPng","TauEmpireCover","TauEmpirePng","PrimarisCover","PrimarisPng","AdeptusMechanicusCover","AdeptusMechanicusPng","DeathwatchCover","DeathwatchPng","AdeptaSororitasCover","AstraMilitarumPng","AdeptaSororitasPng","CreateWarbandIcon","CreateWarbandPng","ImportWarbandIcon","ImportWarbandPng","ExportWarbandIcon","ExportPng","OpenEditorIcon","OpenEditorPng","OpenEditorSelectedIcon","OpenEditorSelectedPng","SavePdfIcon","SavePdfPng","RefreshWarbandIcon","RefreshWarbandPng","RefreshWarbandDisabledIcon","RefreshWarbandDisabledPng","LegendaryIcon","LegendaryPng","getFactionImage","faction","AdeptaSororitas","AdeptusMechanicus","DarkAngels","Deathwatch","PrimarisSpaceMarines","Tau","IncreaseIcon","IncreasePng","DecreaseIcon","DecreasePng","DeleteIcon","DeletePng","StatsIcon","StatsPng","RulesIcon","RulesPng","KeywordsIcon","KeywordsPng","GearIcon","GearPng","UpIcon","UpPng","DownIcon","DownPng","LeaderIcon","LeaderPng","CoreIcon","CorePng","SpecialIcon","SpecialPng","FileUploader","htmlFor","style","fontSize","fontWeight","id","type","accept","display","onChange","reader","FileReader","onload","ev","store","dispatch","payload","JSON","parse","target","result","readAsText","document","querySelector","files","item","width","height","left","alt","className","src","title","PdfGenerator","exportPdf","a","jsPdf","jsPDF","container","Array","from","querySelectorAll","i","length","addPage","html2canvas","scale","letterRendering","canvas","addImage","toDataURL","internal","pageSize","getWidth","getHeight","save","getState","Title","onClick","ErrorMessages","errors","instance","error","this","filter","currentError","idx","arr","indexOf","ErrorMessageRenderer","getInstance","getErrors","cssClass","map","weapons","EquipmentJson","otherEquipment","rules","RulesJson","philosophies","isMultiProfileStatLine","statLine","undefined","firstProfile","secondProfile","isPartialMultiProfileStatLine","getDetailedRoster","roster","alignment","rosterModel","getDetailedModel","factionString","modelMetadata","getModelMetadata","name","harmonizedRosterModel","alignmentPlaceholder","getFactionSpecifics","AlignmentPlaceholder","remixedModel","remixModel","ruleStrings","keyword","array","keywords","ruleName","getRule","rule","equipment","weapon","getWeaponProfile","getOtherEquipmentDetails","otherRosterEquipment","rosterWeapons","replacedWeapons","isBasicWeapon","isMultiProfileRenderWeapon","replacing","isRenderWeapon","equi","find","replacedWeapon","otherRemixedEquipment","effect","replace","price","getTotalUnitPrice","addErrorMessage","UnitList","unit","toLocaleUpperCase","metaDataModel","replacedKeywords","key","amount","includes","stats","weaponRef","multiProfiles","isMultiProfileWeapon","isSuperBasicWeapon","strength","damage","ap","isLegendaryWeapon","isLegendary","weaponDetails","getWeaponDetails","getWeaponPrice","isWeaponReference","AdeptaSororitasArmySpecific","AdeptusMechanicusArmySpecific","DarkAngelsArmySpecific","PrimarisArmySpecifics","TauArmySpecifics","weaponName","WeaponPriceList","model","totalPrice","reduce","getArmyRules","factionSpecifics","factionRules","ArmyRules","alignmentRule","Alignments","align","actualRule","alignmentParameter","getAllKeywords","models","sort","getPhilosophy","phil","philosophy","Philosophies","isWarband","json","titleExistsAndIsString","factionExistsAndIsString","Faction","scenarioExistsAndIsNumber","ScenariosPlayed","philosophiesOk","Philosophy","alignmentsOk","Alignment","countType","members","member","acc","isSearchedModel","renderModel","detailedModel","hasTrueHeros","hasArmouryEquipment","some","isArmouryItem","getStratagems","scenariosPlayed","myArr","text","Core","ModelAllowance","Special","factionKeywords","Keywords","membersWithoutFactionKeywords","factionKeyword","firstMember","shift","commonKeywords","every","inner","innerKeyword","allUnitsSharedKeyword","require","CodeEditorContainer","code","visible","useState","stringify","codeEditorState","setCodeEditorState","isViable","setViable","isDirty","setDirty","useDispatch","useEffect","float","cursor","value","options","theme","viewportMargin","Infinity","mode","statementIndent","gutters","lineNumbers","indentWithTabs","tabSize","lint","onUpdateLinting","annotationsNotSorted","annotations","codeMirror","isWarbandBool","e","console","log","autoCursor","onBeforeChange","_editor","_data","editor","data","removed","toString","setCursor","getCursor","ch","line","to","DropdownList","list","parentId","showFn","position","getElementById","getElementsByClassName","getBoundingClientRect","cssProperties","top","ReactDOM","createPortal","listItem","onMouseDown","DropdownMenuComponent","originalList","placeholder","disable","showStatsDialog","setShowStatsDialog","filteredList","setFilteredList","searcher","FuzzySearch","onFocus","onBlur","event","search","currentTarget","AddModelComponent","disableLeaders","Leader","disableSpecial","disableCore","paddingTop","paddingLeft","color","AllowanceComponent","state","detailedRoster","Roster","padding","textAlign","ToggleEditor","setEditorVisibility","selected","toggleSelected","WarbandExport","anchor","createElement","body","appendChild","blob","Blob","url","window","URL","createObjectURL","href","download","click","revokeObjectURL","removeChild","Toolbar","ArmyKeywordsRenderer","join","ArmyRulesHeaderRenderer","armyRules","ArmyTacticalPointsRenderer","stratagems","tacticalPoints","stata","tp","checkboxes","border","marginRight","marginTop","background","renderCheckboxes","paddingRight","stratagem","ModifyKeywordsDialog","modelId","hideFn","setKeywords","gridTemplateColumns","gridColumn","word","ModifyStatsDialog","setStats","multiStats","setMultiStats","isEmptyObject","obj","Object","keys","constructor","noValuesChangedInDialog","Movement","isNaN","parseInt","WeaponSkill","BallisticSkill","Strength","Toughness","Wounds","Attacks","Leadership","Save","InvulnerableSave","getStats","ModelEquipmentRenderer","weaponRuleRender","weaponNameRender","renderWeaponStats","range","renderMultiProfileHeader","keyName","weaponRule","colSpan","renderWeapon","cnt","amountString","headerString","weaponPriceString","concat","profile","otherEquipmentPriceString","renderOtherEquipment","ModelHeaderRenderer","ModelKeywordRenderer","ModelRulesRenderer","ModelStatsRenderer","renderAtomicStats","characteristics","rowSpan","renderStats","ModelSheetRenderer","context","showKeywordssDialog","setShowKeywordsDialog","renderSidebar","findIndex","canAddModel","canRemoveModel","alert","WarbandRenderer","page","isPdfSection","hide","allowance","nr","RosterPrice","Stratagems","total","BuilderPage","connect","props","modelMap","setModelMap","editorVisible","el","element","warbandState","renderState","totalCost","filterRosterToPage","entry","getPageCountFromMap","pages","renderPages","LandingPage","history","useHistory","gridArea","push","AlignmentSelection","selectedAlignment","setAlignmentCallback","alignments","getIconCss","toLocaleLowerCase","FactionSelection","selectedFaction","setFactionCallback","getImageCss","values","PhilosophySelection","selectedPhilosophy","setPhilosophyCallback","getPossiblePhilosophies","NewWarbandCreationPage","setState","warbandName","setWarbandName","SampleWarbandsPage","clear","DarkAngelsJson","TauJson","PrimarisJson","AppContainer","path","component","Boolean","location","hostname","match","createStore","action","unitIndex","Error","slice","unitIdx","stringIdx","detailedPayloadModel","complexIdx","detailedRosterModel","modelIdx","modelWithStats","newStats","modelSlot","modelWithKeywords","modelNr","movingUnit","switchingUnit","modelSlot3","movingModel","switchingModel","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"k+vBAAAA,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,wC,cCA3CD,EAAOC,QAAU,kgD,gBCAjBD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,cCA3CD,EAAOC,QAAU,kjD,gBCAjBD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,oC,gBCA3CD,EAAOC,QAAU,IAA0B,2C,gBCA3CD,EAAOC,QAAU,IAA0B,wC,gBCA3CD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,oD,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,qC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,gC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,2mlCCA/BC,EAUAC,E,kIAVAD,K,8CAAAA,E,yBAAAA,E,iBAAAA,E,uCAAAA,E,mCAAAA,E,yBAAAA,M,cAUAC,K,YAAAA,E,kBAAAA,E,iBAAAA,M,0gBCqBCC,G,QAAgBC,EAChBC,GAAkBC,IAClBC,GAAiBC,KACjBC,GAAgBC,KAChBC,GAAyBC,IACzBC,GAAkBC,IAElBC,IADsBC,IACCC,KAEvBC,GAAoBC,IACpBC,GAAoBC,IACpBC,GAAoBC,IACpBC,GAAiBC,IACjBC,GAAyBC,KACzBC,GAAcC,KACdC,GAAqBC,KACrBC,GAA6BC,KAE7BC,GAAgBC,IAEhBC,GAAkB,SAACC,GAC5B,OAAQA,GACJ,KAAKpC,EAAYqC,gBAAiB,OAAOvB,GACzC,KAAKd,EAAYsC,kBAAmB,OAAO5B,GAC3C,KAAKV,EAAYuC,WAAY,OAAOnC,GACpC,KAAKJ,EAAYwC,WAAY,OAAO5B,GACpC,KAAKZ,EAAYyC,qBAAsB,OAAOjC,GAC9C,KAAKR,EAAY0C,IAAK,OAAOpC,KAIxBqC,GAAeC,IACfC,GAAeC,IACfC,GAAaC,IACbC,GAAYC,KACZC,GAAYC,KACZC,GAAeC,IACfC,GAAWC,IACXC,GAASC,KACTC,GAAWC,IAEXC,GAAaC,IACbC,GAAWC,IACXC,GAAcC,KCrEdC,GAAe,WAMxB,OAAO,2BAAOC,QAAQ,gBAAgBC,MAAO,CAAEC,SAAU,OAAQC,WAAY,SACzE,2BAAOC,GAAG,gBAAgBC,KAAK,OAAOC,OAAO,QAAQL,MAAO,CAAEM,QAAS,QAAUC,SANpE,WAAO,IAAD,IACbC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAACC,GAAD,aAAmCC,GAAMC,SAAS,CAAET,KCLjD,cDKoEU,QAASC,KAAKC,MAAL,UAAWL,EAAGM,cAAd,aAAW,EAAWC,WACtHV,EAAOW,WAAP,UAAmBC,SAASC,cAAc,yBAA1C,iBAAkB,EAAgEC,aAAlF,aAAkB,EAAuEC,KAAK,OAI9F,yBAAKvB,MAAO,CAAEwB,MAAO,OAAQC,OAAQ,OAAQC,KAAM,SAAWC,IAAI,cAAcC,UAAU,eAAeC,IAAK/E,GAAmBgF,MAAM,qC,0DERlIC,GAAe,WAExB,IAAMC,EAAS,yCAAG,mCAAAC,EAAA,sDACRC,EAAQ,IAAIC,KAAM,IAAK,KAAM,MAAM,GAEnCC,EAAYC,MAAMC,KAAKlB,SAASmB,iBAAiB,mBAC9CC,EAAI,EAJC,YAIEA,EAAIJ,EAAUK,QAJhB,wBAKND,EAAI,GACJN,EAAMQ,UANA,SASKC,KAAYP,EAAUI,GAA8B,CAAEI,MAAO,EAAGC,iBAAiB,IATtF,OASVC,EATU,OAUVZ,EAAMa,SAASD,EAAOE,UAAU,aAAc,OAAQ,EAAG,EAAGd,EAAMe,SAASC,SAASC,WAAYjB,EAAMe,SAASC,SAASE,aAV9G,OAIwBZ,IAJxB,uBAadN,EAAMmB,KAAN,UAAczC,GAAM0C,WAAWC,MAA/B,SAbc,4CAAH,qDAgBf,OAAO,yBAAKpD,GAAG,gBAAgByB,UAAU,iBACrC,yBACIC,IAAKvE,GACL0C,MAAO,CAAE0B,KAAM,SACfE,UAAU,eACVzB,GAAI,qBACJ2B,MAAO,qCACPH,IAAK,kBACL6B,QAASxB,M,iFC9BRyB,GAAb,WAOI,aAAyB,0BADjBC,OAAmB,GAN/B,gEAGQ,OAAOD,EAAcE,aAH7B,sDAS2BC,GACnBC,KAAKH,OAAS,sBAAIG,KAAKH,QAAT,CAAiBE,IAAOE,QAAO,SAACC,EAAcC,EAAKC,GAApB,OAA4BA,EAAIC,QAAQH,KAAkBC,OAV/G,kCAaQ,OAAOH,KAAKH,WAbpB,KAAaD,GAKeE,SAA0B,IAAIF,GAYnD,IAAMU,GAAuB,WAChC,IAAMT,EAASD,GAAcW,cAAcC,YACrCC,EAAWZ,EAAOjB,OAAS,EAAI,kBAAoB,GACzD,OAAO,yBAAKtC,GAAG,mBAAmByB,UAAW0C,GACxCZ,EAAOa,KAAI,SAACX,GAAD,OAAW,6BAAMA,QCZ/BY,GAAUC,KACVC,GAAiBD,KACjBE,GAAQC,KACRC,GAAeD,KAQRE,GAAyB,SAACC,GAAD,YAAiFC,IAA1BD,EAASE,mBAAyDD,IAA3BD,EAASG,eAChIC,GAAgC,SAACJ,GAAD,YAAmGC,IAA1BD,EAASE,mBAAyDD,IAA3BD,EAASG,eACzJE,GAAoB,SAACC,EAAqCtH,EAAiBuH,GAAvD,OAA8GD,EAAOd,KAAI,SAACgB,GAAD,OAAiBC,GAAiBD,EAAaxH,EAASuH,OACrME,GAAmB,SAACD,EAAmCE,EAAuBH,GAAiD,IAAD,QACjIvH,EAAU0H,EACVC,EAAoDC,GAAX,kBAAjBJ,EAA6CA,EAAyCA,EAAYK,KAAxC7H,GAClF8H,EAA8D,kBAAjBN,EAA4B,CAAE,KAAQA,GAAgBA,EACnGO,EAAuBC,GAAoBhI,GAASiI,qBAC1D,GAAKN,EAAL,CAIA,IAAIO,EAAeC,GAAWR,EAAeG,GACvCM,EAAcN,EAAsBlB,MAAQ,sBAAIe,EAAcf,OAAS,IAA3B,YAAkCkB,EAAsBlB,QAAOb,QAAO,SAACsC,EAASpC,EAAKqC,GAAf,OAAyBA,EAAMnC,QAAQkC,KAAapC,KAAO0B,EAAcf,OAAS,GAC1MsB,EAAY,2BACLA,GADK,IAERK,SAAUL,EAAaK,SAAS/B,KAAI,SAAC6B,GAAD,OAAaA,IAAYN,GAAuBR,GAAuBc,KAC3GzB,MAAOwB,EAAY5B,KAAI,SAACgC,GAAD,OAAcC,GAAQD,EAAUxI,EAASuH,MAAYxB,QAAO,SAAC2C,GAAD,YAAmBzB,IAATyB,OAEjG,IAAMC,EAAYhB,EAAcgB,UAChCT,EAAY,2BACLA,GADK,IAERS,UAAWA,EAAY,CACnBlC,QAAO,UAAEkC,EAAUlC,eAAZ,aAAE,EAAmBD,KAAI,SAACoC,GAAD,OAAYC,GAAiBD,EAAQ5I,MAAU+F,QAAO,SAAC6C,GAAD,YAAuB3B,IAAX2B,KAClGjC,eAAc,UAAEgC,EAAUhC,sBAAZ,aAAE,EAA0BH,IAAIsC,UAC9C7B,IAER,IACI8B,EADAC,EAAgC,GAEhCC,EAA4B,GAChC,GAAInB,EAAsBa,YAAtB,UAAmCT,EAAaS,iBAAhD,aAAmC,EAAwBlC,SAAS,CAAC,IAAD,IAC/B,IAArC,GAAIqB,EAAsBa,UACtBK,GAAgB,UAAAlB,EAAsBa,UAAUlC,eAAhC,eAAyCD,KAAI,SAACoC,GAC1D,GAAwB,kBAAZA,EACR,OAAOC,GAAiBD,EAAQ5I,GAEpC,IAAMkJ,GAAcN,KAAWO,GAA2BP,IAAYA,EAAOQ,UAAW,CACpF,IAAMA,EAAYR,EAAOQ,UAGrBH,EAAe,sBAAOA,GADC,kBAAfG,EACO,CAAwBA,GAExB,YAA2BA,IAGlD,OAAIC,GAAeT,GACRA,EAEJC,GAAiBD,EAAQ5I,MACjC+F,QAAO,SAAC6C,GAAD,YAAuB3B,IAAX2B,OAA2C,GACjEG,EAAoB,UAAGjB,EAAsBa,UAAUhC,sBAAnC,aAAG,EAAgDH,KAAI,SAAC8C,GACxE,OACWR,GADW,kBAAVQ,EACwBA,EAEJA,EAAKzB,SAG7CK,EAAY,2BACLA,GADK,IACSS,UAAW,CACxBlC,QAAQ,GAAD,oBAAM,UAAAyB,EAAaS,iBAAb,mBAAwBlC,eAAxB,eAAiCV,QAAO,SAAC6C,GAAD,YAAyF3B,IAA7EgC,EAAgBM,MAAK,SAACC,GAAD,OAAoBA,IAAmBZ,EAAOf,aAAwB,IAArJ,YAA4JmB,OAI/K,IAAI,UAAAd,EAAaS,iBAAb,eAAwBhC,iBAAkBoC,EAAsB,CAAC,IAAD,MAC5DU,EAAwBV,EAAoB,uBAAO,UAAAb,EAAaS,iBAAb,eAAwBhC,iBAAkB,IAAjD,YAAwDoC,IAAxD,UAAgFb,EAAaS,iBAA7F,aAAgF,EAAwBhC,eACpJ8C,GAAyBlC,IACzBkC,EAAwBA,EAAsBjD,KAAI,SAAC8C,GAAD,mBAAC,eAAeA,GAAhB,IAAsBI,OAAQJ,EAAKI,OAAOC,QAAQ5B,GAAwB,GAAIR,SAEpIW,EAAY,2BACLA,GADK,IACSS,UAAW,CACxBlC,QAAO,UAAEyB,EAAaS,iBAAf,aAAE,EAAwBlC,QACjCE,eAAgB8C,KAQ5B,OAJAvB,EAAY,2BACLA,GADK,IAER0B,MAAOC,GAAkB3B,EAAclI,KApEvC0F,GAAcW,cAAcyD,gBAA5B,2BAAyF,kBAAjBtC,EAA4BA,EAAcA,EAAYK,KAA9H,kCAwEFD,GAAmB,SAACC,EAAc7H,GAAf,OAAwCgI,GAAoBhI,GAAS+J,SAASR,MAAK,SAACS,GAAD,OAAUA,EAAKnC,KAAKoC,sBAAwBpC,EAAKoC,wBACvJ9B,GAAa,SAAC+B,EAA8B1C,GAA2C,IAAD,IAClF2C,EAAgB,oBAAI3C,EAAYe,gBAAhB,aAAI,EAAsBxC,QAAO,SAACqE,GAAD,MAA0B,kBAATA,YAAlD,aAAG,EAA0F5D,KAAI,SAAC4D,GAAD,OAASA,EAAIhB,aAgBpI,MAfiC,CAC7BvB,KAAML,EAAYK,KAClBxF,KAAMmF,EAAYnF,MAAQ6H,EAAc7H,KACxCgI,OAAQ7C,EAAY6C,OACpBT,MAAOM,EAAcN,MACrBrB,SAAUf,EAAYe,SAAW,sBAAI2B,EAAc3B,UAAlB,YAA+Bf,EAAYe,SAAS/B,KAAI,SAAC4D,GAAD,MAA0B,kBAATA,EAAoBA,EAAIvC,KAAOuC,OAAMrE,QAAO,SAACsC,GAAD,OAAc8B,EAAiBG,SAASjC,MAAY6B,EAAc3B,SACxN3B,MAAO,GACP2D,MAAOxD,GAAuBmD,EAAcK,OACvC/C,EAAY+C,OAASnD,GAA8BI,EAAY+C,OAA/D,2BACQL,EAAcK,OADtB,IAC6BrD,aAAa,2BAAMgD,EAAcK,MAAMrD,cAAiBM,EAAY+C,MAAMrD,cAAgBC,cAAc,2BAAM+C,EAAcK,MAAMpD,eAAkBK,EAAY+C,MAAMpD,iBAChM+C,EAAcK,MAClB/C,EAAY+C,MAAZ,2BACSL,EAAcK,OAAU/C,EAAY+C,OACzCL,EAAcK,QAMxBlB,GAAiB,SAACmB,GAAD,OAA+CA,EAAU3C,MAAoC,kBAApB2C,EAAU3C,YAA0CZ,IAAnBuD,EAAUnI,WAAkD4E,IAA5BuD,EAAUC,gBAE9JC,GAAuB,SAAC9B,GAAD,OAA+CA,GAAUA,EAAOf,MAAiC,kBAAjBe,EAAOf,MAAsBe,EAAO6B,eAAmD,kBAA1B7B,EAAO6B,eAC3KE,GAAqB,SAAC/B,GAAD,OAC9BA,GAAUA,EAAOf,MAAiC,kBAAjBe,EAAOf,MACxCe,EAAOvG,MAAiC,kBAAjBuG,EAAOvG,MAC9BuG,EAAOgC,WAA0C,kBAArBhC,EAAOgC,UAAuD,kBAArBhC,EAAOgC,WAC5EhC,EAAOiC,SAAsC,kBAAnBjC,EAAOiC,QAAmD,kBAAnBjC,EAAOiC,UAChD,kBAAfjC,EAAOkC,IAA2C,kBAAflC,EAAOkC,KAC1C5B,GAAgB,SAACN,GAAD,MAAkE,kBAAlBA,EAAOgB,OAAkD,kBAAnBhB,EAAOyB,QAAwBM,GAAmB/B,IACxJmC,GAAoB,SAACnC,GAAD,MAA4E,mBAAxBA,EAAOoC,aAA8BL,GAAmB/B,IAChIO,GAA6B,SAACP,GAAD,MAA+E,kBAAlBA,EAAOgB,OAAkD,kBAAnBhB,EAAOyB,QAAwBK,GAAqB9B,IAE3LC,GAAmB,SAAC2B,EAAqCxK,GAC3D,GAAyB,kBAAdwK,EAAwB,CAC/B,IAAMS,EAAgBC,GAAiBV,GACvC,OAAKS,EAIE,2BAAKA,GAAZ,IAA2BrB,MAAOuB,GAAeF,EAAcpD,KAAM7H,EAAS,GAAIqK,OAAQ,SAHtF3E,GAAcW,cAAcyD,gBAA5B,4BAAiEU,EAAjE,2EAKR,GAvBsB,SAACA,GAAD,SAAkDA,EAAU3C,MAAoC,kBAApB2C,EAAU3C,SAAqB2C,EAAUH,QAAuC,kBAAtBG,EAAUH,QAuBlKe,CAAkBZ,GAAY,CAC9B,IAAMS,EAAgBC,GAAiBV,EAAU3C,MACjD,OAAKoD,EAIE,2BAAKA,GAAZ,IAA2BrB,MAAOuB,GAAeF,EAAcpD,KAAM7H,EAASwK,EAAUH,QAAU,GAAIA,OAAQG,EAAUH,QAAU,SAH9H3E,GAAcW,cAAcyD,gBAA5B,4BAAiEU,EAAU3C,KAA3E,6EAQCG,GAAsB,SAAChI,GAChC,OAAQA,GACJ,KAAKpC,EAAYqC,gBAAiB,OAAOoL,KACzC,KAAKzN,EAAYsC,kBAAmB,OAAOoL,KAC3C,KAAK1N,EAAYuC,WAAY,OAAOoL,KACpC,KAAK3N,EAAYyC,qBAAsB,OAAOmL,KAC9C,KAAK5N,EAAY0C,IAAK,OAAOmL,KAE7B,QAAS,MAAO,CAAE,SAAY,GAAI,aAAgB,GAAI,qBAAwB,GAAI,eAAkB,CAAE,KAAQ,EAAG,QAAW,EAAG,OAAU,GAAK,gBAAmB,GAAI,SAAY,MAI5KP,GAAmB,SAACrD,GAAD,OAAkBpB,GAAQ8C,MAAK,SAACX,GAAD,OAAYA,EAAOf,KAAKoC,sBAAwBpC,EAAKoC,wBACvGkB,GAAiB,SAACO,EAAoB1L,EAAsBqK,GAA3C,cAA+D,UAAArC,GAAoBhI,GAAS2L,gBAAgBpC,MAAK,SAACX,GAAD,OAAYA,EAAOf,KAAKoC,sBAAwByB,EAAWzB,8BAA7G,eAAmIL,QAAS,GAAKS,GAEjOvB,GAA2B,SAACjB,GAAD,OAAkBlB,GAAe4C,MAAK,SAACD,GAAD,OAAUA,EAAKzB,KAAKoC,sBAAwBpC,EAAKoC,wBAElHJ,GAAoB,SAAC+B,EAAoB5L,GAA0B,IAAD,UACvE6L,EAAaD,EAAMhC,QAAN,UAAe5B,GAAoBhI,GAAS+J,SAASR,MAAK,SAACS,GAAD,OAAUA,EAAKnC,KAAKoC,sBAAwB2B,EAAM/D,KAAKoC,8BAAjH,aAAe,EAAwHL,QAAS,EAIjK,OAHAiC,IAAc,UAAAD,EAAMjD,iBAAN,mBAAiBlC,eAAjB,eAA0BqF,QAAO,SAAC5H,EAAG0E,GAAJ,OAAe1E,GAAK0E,EAAOgB,QAAUhB,EAAOoC,YAAc,GAAK,MAAK,KAAM,EACzHa,IAAc,UAAAD,EAAMjD,iBAAN,mBAAiBhC,sBAAjB,eAAiCmF,QAAO,SAAC5H,EAAGyE,GAAJ,OAAkBzE,GAAKyE,EAAUiB,OAAS,KAAI,KAAM,GAC1GiC,GAAcD,EAAMhF,MAAMkF,QAAO,SAAC5H,EAAGwE,GAAJ,OAAaxE,GAAKwE,EAAKkB,OAAS,KAAI,IAAM,IACtDgC,EAAMvB,QAAU,IAI5B0B,GAAe,SAAC/L,EAAsBuH,GAAwB,IAAD,EAChEyE,EAAmBhE,GAAoBhI,GACvCiM,EAAeD,EAAiBE,WAAa,GAC7CC,EAAa,UAAGH,EAAiBI,kBAApB,aAAG,EAA6B7C,MAAK,SAAC8C,GAAD,OAAWA,EAAMxE,OAASN,KAElF,OADkB4E,EAAa,sBAAOF,GAAP,CAAqBE,IAAiBF,GACpDzF,KAAI,SAACkC,GAAD,OAAWnB,EAAS,2BAAQmB,GAAR,IAAcgB,OAAQhB,EAAKgB,OAAOC,QAAQ3B,GAAoBhI,GAASiI,sBAAwB,GAAIV,KAAemB,MAElJD,GAAU,SAACD,EAAkBxI,EAAsBuH,GAC5D,IAAI+E,EAAa1F,GAAM2C,MAAK,SAACb,GAAD,OAAUA,EAAKb,KAAKoC,sBAAwBzB,EAASyB,uBACjF,GAAKqC,EAIL,OAAOA,EAAWC,oBAAsBhF,EAAY+E,EAAU,2BAAQA,GAAR,IAAoB5C,OAAQ4C,EAAW5C,OAAOC,QAAQ3B,GAAoBhI,GAASiI,sBAAwB,GAAIV,KAAe+E,EAHxL5G,GAAcW,cAAcyD,gBAA5B,0BAA+DtB,EAA/D,kCAMKgE,GAAiB,SAACC,GAAD,OAA2BA,EAAOX,QAAO,SAACvD,EAAoBqD,GAArB,4BAAmCrD,GAAnC,YAAgDqD,EAAMrD,aAAW,IAAIxC,QAAO,SAACvC,EAAMyC,EAAKqC,GAAZ,OAAsBA,EAAMnC,QAAQ3C,KAAUyC,KAAKyG,QACzLC,GAAgB,SAAC9E,EAAc7H,GACxC,IAAI4M,EAAO9F,GAAayC,MAAK,SAACsD,GAAD,OAAgBA,EAAWhF,KAAKoC,uBAAhB,OAAwCpC,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAMoC,wBAC3F,GAAK2C,IACDA,EAAO5E,GAAoBhI,GAAS8M,aAAavD,MAAK,SAACsD,GAAD,OAAgBA,EAAWhF,KAAKoC,uBAAhB,OAAwCpC,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAMoC,yBAMxH,OAAO2C,EAJClH,GAAcW,cAAcyD,gBAA5B,gCAAqEjC,EAArE,kCAOCkF,GAAY,SAACC,GACtB,IAAMC,EAAyBD,EAAKxH,OAA+B,kBAAfwH,EAAKxH,MACnD0H,EAA2BF,EAAKG,SAAmC,kBAAjBH,EAAKG,QACvDC,GAA6BJ,EAAKK,iBAAoBL,EAAKK,iBAAmD,kBAAzBL,EAAKK,gBAC1FC,GAAkBN,EAAKO,YAAeP,EAAKO,YAAyC,kBAApBP,EAAKO,WACrEC,GAAgBR,EAAKS,WAAcT,EAAKS,WAAuC,kBAAnBT,EAAKS,UACvE,OAAOR,GAA0BC,GAA4BE,GAA6BE,GAAkBE,GAYnGE,GAAY,SAACC,EAAwBtL,GAAzB,OAA6CsL,EAAQ5H,QAAO,SAAC6H,GAAD,OAAYA,EAAOvL,OAASA,KAAMyJ,QAAO,SAAC+B,EAAKD,GAAN,OAAiBC,GAAOD,EAAOvD,OAASuD,EAAOvD,OAAS,KAAI,IAE7KyD,GAAkB,SAACtG,EAAmCuG,EAA0B/N,EAAiBuH,GAC1G,IAAMyG,EAAgBvG,GAAiBD,EAAaxH,EAASuH,GAC7D,OAAoB,OAAbyG,QAAa,IAAbA,OAAA,EAAAA,EAAenG,QAASkG,EAAYlG,OAAqB,OAAbmG,QAAa,IAAbA,OAAA,EAAAA,EAAepE,SAAUmE,EAAYnE,OCnOtFqE,GAAe,SAACN,GAAD,OAA4BA,EAAQ5H,QAAO,SAAC6H,GAAD,OAAYA,EAAOhE,OAASgE,EAAOvD,QAAU,IAAM,OAAK3F,QAC3GwJ,GAAsB,SAACzB,GAAD,OAA2BA,EAAO1G,QAAO,SAAC6F,GAAD,mBACxE,UAAAA,EAAMjD,iBAAN,mBAAiBlC,eAAjB,eAA0B0H,MAAK,SAACvF,GAAD,OAAYA,EAAOwF,oBAAlD,UACAxC,EAAMjD,iBADN,iBACA,EAAiBhC,sBADjB,aACA,EAAiCwH,MAAK,SAAC7E,GAAD,OAAUA,EAAK8E,sBAiB5CC,GAAgB,SAACrO,EAAiBsH,EAAuBC,EAAoB+G,GACtF,IAAIC,EAA0B,CAAC,CAAE1G,KAAM,yBAA0BwC,OAAQiE,EAAkBA,EAAkB,EAAI,EAAGE,KAAM,mGAQ1H,OAPAD,EAAQb,GAAUpG,EAAQzJ,EAAU4Q,QAAUzG,GAAoBhI,GAAS0O,eAAeD,KAAlF,sBAA6FF,GAA7F,CAAoG,CAAE1G,KAAM,sBAAuBwC,OAAQ,EAAGmE,KA1BlI,+FA0BZ,YAA6KD,GACrLA,EAAQb,GAAUpG,EAAQzJ,EAAU8Q,WAAa3G,GAAoBhI,GAAS0O,eAAeC,QAArF,sBAAmGJ,GAAnG,CAA0G,CAAE1G,KAAM,oBAAqBwC,OAAQ,EAAGmE,KA1BtI,kGA0BZ,YAAiLD,GACzLA,EAnB0B,SAACjH,EAAuBtH,EAAiBuH,GACnE,IAAMqH,EAAe,sBAAO5G,GAAoBhI,GAAS6O,UAApC,CAA8CtH,IAC7DuH,EAAgCxH,EAAOd,KAAI,SAACoF,GAAD,mBAAC,eAAgBA,GAAjB,IAAwBrD,SAAWqD,EAAMrD,SAASxC,QAAO,SAACsC,GAAD,OAAcuG,EAAgBT,MAAK,SAACY,GAAD,OAAoBA,IAAmB1G,aAC9K2G,EAAcF,EAA8BG,QAClD,OAAID,EACOA,EAAYzG,SAASuD,QAAO,SAACoD,EAAgB7G,GAChD,OAAIyG,EAA8BK,OAAM,SAACC,GAAD,OAAWA,EAAM7G,SAAS4F,MAAK,SAACkB,GAAD,OAAkBA,IAAiBhH,QAChG,GAAN,mBAAW6G,GAAX,CAA2B7G,IAExB6G,IACR,IAAgBxK,OAAS,EAEzB,GAOC4K,CAAsBhI,EAAQtH,EAASuH,GAAvC,sBAAwDgH,GAAxD,CAA+D,CAAE1G,KAAM,sBAAuBwC,OAAQ,EAAGmE,KAAM,kFAA/G,YAAuMD,GAC/MA,EAAQN,GAAa3G,GAAb,sBAA2BiH,GAA3B,CAAkC,CAAE1G,KAAM,aAAcwC,OAAQ4D,GAAa3G,GAASkH,KAAM,yEAA5F,YAA2KD,GACnLA,EAAQ/B,GAAelF,GAAQ5C,OAAS,EAAhC,sBAAwC6J,GAAxC,CAA+C,CAAE1G,KAAM,sBAAuBwC,OAAQ,EAAGmE,KAAM,mEAA/F,YAAwKD,GAChLA,EAA+C,IAAvCL,GAAoB5G,GAAQ5C,OAA5B,sBAA+C6J,GAA/C,CAAsD,CAAE1G,KAAM,oBAAqBwC,OAAQ,EAAGmE,KAAM,oFAApG,YAAyLD,GACjMA,EAAQL,GAAoB5G,GAAQ5C,QAAU,EAAtC,sBAA8C6J,GAA9C,CAAqD,CAAE1G,KAAM,cAAewC,OAAQ,EAAGmE,KAAM,6DAA7F,YAAgKD,IClB5KgB,EAAQ,IACRA,EAAQ,IACRA,EAAQ,IAED,IAAMC,GAAsB,SAAC,GAA4D,IAA1DC,EAAyD,EAAzDA,KAAMC,EAAmD,EAAnDA,QAAmD,EAC7CC,mBAAS3M,KAAK4M,UAAUH,EAAM,KAAM,IADS,mBACpFI,EADoF,KACnEC,EADmE,OAE7DH,mBAAkB5C,GAAU0C,IAFiC,mBAEpFM,EAFoF,KAE1EC,EAF0E,OAG/DL,oBAAkB,GAH6C,mBAGpFM,EAHoF,KAG3EC,EAH2E,KAIrFpN,EAAWqN,cACjBC,qBAAU,WACNN,EAAmB9M,KAAK4M,UAAUH,EAAM,KAAM,MAC/C,CAACA,IAOJ,OACIC,EAAU,yBAAK7L,UAAU,yBACrB,yBACIC,IAAKmM,GAAWF,EAAWtQ,GAAqBE,GAChDsC,MAAO,CAAEoO,MAAO,QAASC,OAAQL,EAAU,UAAY,QACvDpM,UAAU,eACVD,IAAI,kBACJ6B,QAAS,kBAAMwK,GAAWF,GAXlCjN,EAAS,CAAET,KL5BQ,cK4BWU,QAASC,KAAKC,MAAM4M,UAClDK,GAAS,SAU0D,GAC3DnM,MAAK,UAAKkM,EAAU,kBAAoB,0FAE5C,yBAAKpM,UAAU,qBAAf,uBACA,kBAAC,aAAD,CACIA,UAAU,qBACV0M,MAAOV,EACPW,QAAS,CACLC,MAAO,MACPC,eAAgBC,IAChBC,KAAM,CACF/I,KAAM,aACNmF,MAAM,EACN6D,gBAAiB,GAGrBC,QAAS,CAAC,2BACVC,aAAa,EAEbC,gBAAgB,EAChBC,QAAS,EACTC,KAAM,CACFC,gBAAiB,SAACC,EAA6BC,EAAoBC,GAC/DF,EAAqB1M,OAAS,EAAIsL,GAAU,GAASA,GAAU,WAC3D,IAAIuB,GAAgB,EACpB,IACIA,EAAgBxE,GAAU/J,KAAKC,MAAM4M,IACvC,MAAO2B,GAELC,QAAQC,IAAIF,GAJhB,QAOI,OAAOD,SAO3BI,YAAY,EACZC,eAAgB,SAACC,EAAcC,EAAYvB,GACvCT,EAAmBS,IAEvB/N,SAAU,SAACuP,EAAaC,EAAWzB,GAAgB,IAAD,IACN,KAApC,UAAAyB,EAAKC,eAAL,eAAcC,WAAWxN,SAAiD,KAAjC,UAAAsN,EAAKxD,YAAL,eAAW0D,WAAWxN,QAC/DqN,EAAOI,UAAP,2BAAsBJ,EAAOK,aAA7B,IAA0CC,GAAIL,EAAKzN,KAAK8N,GAAIC,KAAMN,EAAKzN,KAAK+N,QACrEN,EAAKxD,KAAK0D,WAAWxN,UAAYsN,EAAKC,SAAW,IAAIC,WAAWxN,OACvEqN,EAAOI,UAAP,2BAAsBJ,EAAOK,aAA7B,IAA0CC,GAAIL,EAAKxD,KAAK0D,WAAWxN,QAAUsN,EAAKC,SAAW,IAAIC,WAAWxN,OAASsN,EAAKO,GAAGF,GAAIC,KAAMN,EAAKO,GAAGD,QAE/IP,EAAOI,UAAP,2BAAsBJ,EAAOK,aAA7B,IAA0CC,GAAIL,EAAKO,GAAGF,GAAK,EAAGC,KAAMN,EAAKO,GAAGD,QAEhFpC,GAAS,OAGZ,M,iBCzFXsC,I,MAAe,SAAC,GAAmG,IAAD,EAAhGC,EAAgG,EAAhGA,KAAMC,EAA0F,EAA1FA,SAAUC,EAAgF,EAAhFA,OAC9BC,EAAQ,UAAGvP,SAASwP,eAAT,6BAA8CH,WAAjD,aAAG,EAA2DI,uBAAuB,aAAa,GAAGC,wBAC7GC,EAAgB,CAAEC,MAAc,OAARL,QAAQ,IAARA,OAAA,EAAAA,EAAUK,MAAO,GAAK,GAAItP,MAAe,OAARiP,QAAQ,IAARA,OAAA,EAAAA,EAAUjP,OAAQ,EAAIF,QAAgB,OAARmP,QAAQ,IAARA,OAAA,EAAAA,EAAUnP,QAAS,GAAK,GAE/GX,EAAWqN,cAEjB,OACI+C,IAASC,aACL,yBAAKlR,MAAO+Q,EAAenP,UAAU,mBAChC4O,EAAKjM,KAAI,SAAC4M,GAAD,OACN,yBAAKhJ,IAAG,6BAAwBsI,EAAxB,YAAoCU,GACxCvP,UAAU,qBACVwP,YAAa,WACTvQ,EAAS,CAAET,KNbJ,sBMa+BU,QAASqQ,IAC/CT,GAAO,KAGVS,OAIb/P,SAASwP,eAAT,6BAA8CH,OAK7CY,GAAwB,SAAC,GAA+H,IAA7HC,EAA4H,EAA5HA,aAAcC,EAA8G,EAA9GA,YAAapR,EAAiG,EAAjGA,GAAIqR,EAA6F,EAA7FA,QAA6F,EAClH9D,oBAAkB,GADgG,mBACzJ+D,EADyJ,KACxIC,EADwI,OAExHhE,mBAAmB4D,GAFqG,mBAEzJK,EAFyJ,KAE3IC,EAF2I,KAG1JC,EAAW,IAAIC,KAAYR,GAEjC,OAAO,yBAAKnR,GAAE,6BAAwBA,GAAMyB,UAAU,sBACjD6P,EAAkB,kBAAC,GAAD,CAAcjB,KAAMmB,EAAcjB,OAAQgB,EAAoBjB,SAAUtQ,IAAS,KACpG,yBAAKyB,UAAW4P,EAAU,2BAA6B,aACnD,2BAAO5P,UAAU,iBACbmQ,QAAS,kBAAML,GAAmB,IAClCM,OAAQ,kBAAMN,GAAmB,IACjCnR,SAAU,SAAC0R,GAAD,OAAWL,EAAgBC,EAASK,OAAOD,EAAME,cAAc7D,SACzEiD,YAAaA,OCvChBa,GAAoB,SAAC,GAAqE,IAAnE/M,EAAkE,EAAlEA,OAAQtH,EAA0D,EAA1DA,QAClCsU,EAAiB5G,GAAUpG,EAAQzJ,EAAU0W,SAAWvM,GAAoBhI,GAAS0O,eAAe6F,OACpGC,EAAiB9G,GAAUpG,EAAQzJ,EAAU8Q,UAAY3G,GAAoBhI,GAAS0O,eAAeC,QACrG8F,EAAc/G,GAAUpG,EAAQzJ,EAAU4Q,OAASzG,GAAoBhI,GAAS0O,eAAeD,KAErG,OAAO,yBAAKxM,MAAO,CAAEyB,OAAQ,OAAQgR,WAAY,SAC7C,yBAAKzS,MAAO,CAAE0S,YAAa,OAAQzS,SAAU,SAAU0S,MAAO,YAA9D,uDACA,kBAAC,GAAD,CACIxS,GAAG,SACHoR,YAAac,EAAiB,wBAA0B,yBACxDf,aAAcvL,GAAoBhI,GAAS+J,SAAShE,QAAO,SAAC6F,GAAD,OAAWA,EAAMvJ,OAASxE,EAAU0W,UAAQ/N,KAAI,SAACoF,GAAD,OAAWA,EAAM/D,QAC5H4L,QAASa,IAEb,kBAAC,GAAD,CACIlS,GAAG,OACHoR,YAAaiB,EAAc,qBAAuB,uBAClDlB,aAAcvL,GAAoBhI,GAAS+J,SAAShE,QAAO,SAAC6F,GAAD,OAAWA,EAAMvJ,OAASxE,EAAU4Q,QAAMjI,KAAI,SAACoF,GAAD,OAAWA,EAAM/D,QAC1H4L,QAASgB,IACb,kBAAC,GAAD,CACIrS,GAAG,UACHoR,YAAagB,EAAiB,wBAA0B,0BACxDjB,aAAcvL,GAAoBhI,GAAS+J,SAAShE,QAAO,SAAC6F,GAAD,OAAWA,EAAMvJ,OAASxE,EAAU8Q,WAASnI,KAAI,SAACoF,GAAD,OAAWA,EAAM/D,QAC7H4L,QAASe,MCrBRK,I,MAAqB,WAC9B,IAAMC,EAAQjS,GAAM0C,WACdwP,EAAiB1N,GAAkByN,EAAME,OAAQF,EAAM3H,QAAS2H,EAAMrH,WAAW1H,QAAO,SAACiE,GAAD,YAAmB/C,IAAT+C,KACxG,OAAO,yBAAK/H,MAAO,CAAEyB,OAAQ,OAAQ2M,MAAO,UACxC,yBAAKpO,MAAO,CAAEoO,MAAO,OAAQ4E,QAAS,KAClC,yBACInR,IAAKrC,GACLQ,MAAO,CAAEyB,OAAQ,GAAID,MAAO,IAE5BG,IAAI,oBACJG,MAAM,oBAEV,yBAAK9B,MAAO,CAAEiT,UAAW,WAAzB,UAAyCxH,GAAUqH,EAAgBlX,EAAU0W,QAA7E,cAA0FvM,GAAoB8M,EAAM3H,SAASuB,eAAe6F,UAEhJ,yBAAKtS,MAAO,CAAEoO,MAAO,OAAQ4E,QAAS,KAClC,yBACInR,IAAKnC,GACLM,MAAO,CAAEyB,OAAQ,GAAID,MAAO,IAE5BG,IAAI,oBACJG,MAAM,kBAEV,yBAAK9B,MAAO,CAAEiT,UAAW,WAAzB,UAA0CxH,GAAUqH,EAAgBlX,EAAU4Q,MAA9E,cAAyFzG,GAAoB8M,EAAM3H,SAASuB,eAAeD,QAE/I,yBAAKxM,MAAO,CAAEoO,MAAO,OAAQ4E,QAAS,KAClC,yBACInR,IAAKjC,GACLI,MAAO,CAAEyB,OAAQ,GAAID,MAAO,IAE5BG,IAAI,oBACJG,MAAM,qBAEV,yBAAK9B,MAAO,CAAEiT,UAAW,WAAzB,UAAyCxH,GAAUqH,EAAgBlX,EAAU8Q,SAA7E,cAA2F3G,GAAoB8M,EAAM3H,SAASuB,eAAeC,cCpC5IwG,GAAe,SAAC,GAAuE,IAArEC,EAAoE,EAApEA,oBAAoE,EAC5DzF,oBAAkB,GAD0C,mBACxF0F,EADwF,KAC9EC,EAD8E,KAK/F,OAHAlF,qBAAU,WACNgF,EAAoBC,KACrB,CAACA,EAAUD,IACP,yBACHtR,IAAKuR,EAAWhW,GAAyBF,GACzC8C,MAAO,CAAEwB,MAAO,OAAQC,OAAQ,OAAQC,KAAM,QAC9CE,UAAU,eACVD,IAAI,oBACJ6B,QAAS,WACL6P,GAAgBD,IAEpBtR,MAAM,iBCbDwR,GAAgB,WAgBzB,OAAO,yBAAKnT,GAAG,gBAAgByB,UAAU,iBACrC,yBACIC,IAAK7E,GACLgD,MAAO,CAAEwB,MAAO,OAAQC,OAAQ,OAAQC,KAAM,SAC9CE,UAAU,eACVD,IAAI,iBACJ6B,QApBe,WACnB,IAAM+P,EAASnS,SAASoS,cAAc,KACtCpS,SAASqS,KAAKC,YAAYH,GAC1B,IAAMV,EAAQjS,GAAM0C,WACdqQ,EAAO,IAAIC,KAAK,CAAC7S,KAAK4M,UAAUkF,IAAS,CAAEzS,KAAM,iBACjDyT,EAAMC,OAAOC,IAAIC,gBAAgBL,GACvCJ,EAAOU,KAAOJ,EACdN,EAAOW,SAAP,UAAqBrB,EAAMtP,MAA3B,cAAsCsP,EAAM3H,QAA5C,SACAqI,EAAOpT,GAAK,0BACZoT,EAAOY,QACPL,OAAOC,IAAIK,gBAAgBP,GAC3BzS,SAASqS,KAAKY,YAAYjT,SAASwP,eAAe,6BAU9C9O,MAAM,2BCnBLwS,GAAU,SAAC,GAAD,IAAGnB,EAAH,EAAGA,oBAAH,OAA0E,yBAAKvR,UAAU,qBAC5G,kBAAC,GAAD,CAAcuR,oBAAqBA,IACnC,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCVSoB,GAAuB,SAAC,GAA0C,IAAxCjO,EAAuC,EAAvCA,SAEnC,OAAO,yBAAK1E,UAAU,2CAClB,yBAAKA,UAAU,oBAAf,oBAAgD0E,EAAS7D,OAAzD,MACA,yBAAKb,UAAU,iBAHU0E,EAASkO,KAAK,SCAlCC,GAA0B,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,UAQtC,OAAOA,GAAaA,EAAUjS,OAAS,EAAI,yBAAKb,UAAU,mBACtD,yBAAKA,UAAU,oBAAf,oBAPA8S,EAAUnQ,KAAI,SAACkC,GAAD,OACV,yBAAK0B,IAAG,sBAAU1B,QAAV,IAAUA,OAAV,EAAUA,EAAMb,MAAQhE,UAAU,aACtC,yBAAKA,UAAU,oBAAf,OAAmC6E,QAAnC,IAAmCA,OAAnC,EAAmCA,EAAMb,MACzC,yBAAKhE,UAAU,kBAAf,OAAiC6E,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAMgB,aAM1C,MCVAkN,GAA6B,SAAC,GAAiI,IAAD,MAA9HC,EAA8H,EAA9HA,WAAYhK,EAAkH,EAAlHA,WAAY7M,EAAsG,EAAtGA,QAC3D8W,EAAiBD,EAAW/K,QAAO,SAAC+B,EAAKkJ,GAAN,OAAgBlJ,EAAMkJ,EAAM1M,SAAQwC,IAAa,UAAAF,GAAcE,EAAY7M,UAA1B,eAAoCgX,KAAU,GAQxI,OAAO,yBAAKnT,UAAU,2CAClB,yBAAKA,UAAU,oBAAf,2BACyBiT,EADzB,KARqB,WAErB,IADA,IAAIG,EAA4B,GACvBxS,EAAI,EAAGA,EAAIqS,EAAgBrS,IAChCwS,EAAU,sBAAOA,GAAP,CAAmB,yBAAK7M,IAAG,8BAAyB3F,GAAKxC,MAAO,CAAEwB,MAAO,OAAQC,OAAQ,OAAQwT,OAAQ,YAAa7G,MAAO,QAAS8G,YAAa,MAAOC,UAAW,MAAOC,WAAY,aAEtM,OAAOJ,EAKFK,IAEJzK,EAAa,yBAAKhJ,UAAU,aACzB,yBAAKA,UAAU,mBAAmB5B,MAAO,CAAEsV,aAAc,QAAzD,UAAsE1K,EAAtE,uBAAqFF,GAAcE,EAAY7M,UAA/G,aAAqF,EAAoCgX,GAAzH,mBACA,yBAAKnT,UAAU,kBAAf,UAAiC8I,GAAcE,EAAY7M,UAA3D,aAAiC,EAAoCwO,YAChEvH,EACR4P,EAAWrQ,KAAI,SAACgR,GAAD,OAAe,yBAAKpN,IAAG,2BAAeoN,QAAf,IAAeA,OAAf,EAAeA,EAAW3P,MAAQhE,UAAU,aAC/E,yBAAKA,UAAU,oBAAf,UAAsC2T,EAAU3P,KAAhD,aAAyD2P,EAAUnN,OAAnE,MAAmF,yBAAKxG,UAAU,kBAAkB2T,EAAUhJ,YCjB7HiJ,GAAuB,SAAC,GAAsG,IAAD,EAAnG7L,EAAmG,EAAnGA,MAAO8L,EAA4F,EAA5FA,QAASC,EAAmF,EAAnFA,OAC7C/E,EAAQ,UAAGvP,SAASwP,eAAe6E,UAA3B,aAAG,EAAkC3E,wBAC7CC,EAAgB,CAAEC,MAAc,OAARL,QAAQ,IAARA,OAAA,EAAAA,EAAUK,MAAO,GAAK,GAAItP,OAAe,OAARiP,QAAQ,IAARA,OAAA,EAAAA,EAAUjP,OAAQ,GAAK,GAAIF,QAAgB,OAARmP,QAAQ,IAARA,OAAA,EAAAA,EAAUnP,QAAS,GAAK,IAFY,EAGtGkM,mBAAoC,IAHkE,mBAG/HpH,EAH+H,KAGrHqP,EAHqH,KAIhI9U,EAAWqN,cAsCjB,OACI+C,IAASC,aACL,yBAAKtP,UAAU,oBACX,yBAAK5B,MAAO+Q,EAAenP,UAAU,SACjC,yBAAKA,UAAU,gBAAf,wCAAgE+H,EAAM/D,OAxClF,yBAAK5F,MAAO,CAAEM,QAAS,cAAesV,oBAAqB,UAAWpU,MAAO,SACzE,yBAAKxB,MAAO,CAAE6V,WAAY,EAAGvV,QAAS,gBAClC,yBAAKsB,UAAU,qBACX,yBAAKA,UAAU,cAAf,mBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACVrB,SAAU,SAACgP,GAAD,OAA0CoG,EAAYpG,EAAE4C,cAAc7D,YAI5F,6BACI,uDACC3E,EAAMrD,SAAS/B,KAAI,SAACuR,GAAD,OAAU,6BAAMA,QAK5C,4BACIlU,UAAS,wBAAoB0E,EAAsC,GAA3B,0BACxC9C,QAAS,WACA8C,IAGLzF,EAAS,CAAET,Kf3BM,wBe2BuBU,QAAS,CAAE6I,QAAOrD,cAE1DoP,GAAO,KAEX5T,MAAK,UAAMwE,EAAoE,0BAAzD,yDAV1B,gBAYA,4BACI1E,UAAU,gBACV4B,QAAS,kBAAMkS,GAAO,KAF1B,aAcAtU,SAASwP,eAAe6E,KCjDvBM,GAAoB,SAAC,GAAsG,IAAD,EAAnGpM,EAAmG,EAAnGA,MAAO8L,EAA4F,EAA5FA,QAASC,EAAmF,EAAnFA,OAC1C/E,EAAQ,UAAGvP,SAASwP,eAAe6E,UAA3B,aAAG,EAAkC3E,wBAC7CC,EAAgB,CAAEC,MAAc,OAARL,QAAQ,IAARA,OAAA,EAAAA,EAAUK,MAAO,GAAK,GAAItP,OAAe,OAARiP,QAAQ,IAARA,OAAA,EAAAA,EAAUjP,OAAQ,GAAK,GAAIF,QAAgB,OAARmP,QAAQ,IAARA,OAAA,EAAAA,EAAUnP,QAAS,GAAK,IAFS,EAGzGkM,mBAA8B,IAH2E,mBAG5HpF,EAH4H,KAGrH0N,EAHqH,OAI/FtI,mBAAmD,IAJ4C,mBAI5HuI,EAJ4H,KAIhHC,EAJgH,KAK7HrV,EAAWqN,cACXiI,EAAgB,SAACC,GAAD,OAA0C,IAA5BC,OAAOC,KAAKF,GAAK3T,QAAgB2T,EAAIG,cAAgBF,QACnFG,EAA0B,kBAAML,EAAc7N,IAAU6N,EAAcF,IA+Y5E,OACIhF,IAASC,aACL,yBAAKtP,UAAU,oBACX,yBAAK5B,MAAO+Q,EAAenP,UAAU,SACjC,yBAAKA,UAAU,gBAAf,wCAAgE+H,EAAM/D,OAjZrE,WAkHL,IAAD,gFAjHP,OAAKd,GAAuB6E,EAAMrB,OAkHvB,yBAAKtI,MAAO,CAAEM,QAAS,cAAesV,oBAAqB,UAAWpU,MAAO,SAChF,yBAAKxB,MAAO,CAAE6V,WAAY,EAAGvV,QAAS,gBAClC,yBAAKsB,UAAU,qBAAoB,yBAAK5B,MAAO,CAAEE,WAAY,OAAQD,SAAU,UAAW4V,WAAY,IAAnE,mBAA6F,yBAAK7V,MAAO,CAAEE,WAAY,OAAQD,SAAU,UAAW4V,WAAY,IAAnE,sBAChI,yBAAKjU,UAAU,qBACX,yBAAKA,UAAU,cAAf,cACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA6CtJ,KAAtC,UAAAiR,EAAWhR,oBAAX,eAAyBwR,UAAzB,UAAkDR,EAAWhR,oBAA7D,aAAkD,EAAyBwR,SAAW9M,EAAMrB,MAAMrD,aAAawR,SACtHlW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzDhR,aAAa,2BACNgR,EAAWhR,cADN,IAERwR,SAAUC,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAM/G,yBAAKtO,MAAO,CAAE6V,WAAY,GAAKjU,UAAU,iBACrC,2BACIA,UAAU,oBACV0M,WAA8CtJ,KAAvC,UAAAiR,EAAW/Q,qBAAX,eAA0BuR,UAA1B,UAAmDR,EAAW/Q,qBAA9D,aAAmD,EAA0BuR,SAAW9M,EAAMrB,MAAMpD,cAAcuR,SACzHlW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzD/Q,cAAc,2BACP+Q,EAAW/Q,eADL,IAETuR,SAAUC,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,cAOnH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,iBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAgDtJ,KAAzC,UAAAiR,EAAWhR,oBAAX,eAAyB2R,aAAzB,UAAqDX,EAAWhR,oBAAhE,aAAqD,EAAyB2R,YAAcjN,EAAMrB,MAAMrD,aAAa2R,YAC5HrW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkBhR,aAAa,2BAAMgR,EAAWhR,cAAlB,IAAgC2R,YAAarH,EAAE4C,cAAc7D,eAGpK,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAAiDtJ,KAA1C,UAAAiR,EAAW/Q,qBAAX,eAA0B0R,aAA1B,UAAsDX,EAAW/Q,qBAAjE,aAAsD,EAA0B0R,YAAcjN,EAAMrB,MAAMpD,cAAc0R,YAC/HrW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkB/Q,cAAc,2BAAM+Q,EAAW/Q,eAAlB,IAAiC0R,YAAarH,EAAE4C,cAAc7D,gBAI1K,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,oBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAmDtJ,KAA5C,UAAAiR,EAAWhR,oBAAX,eAAyB4R,gBAAzB,UAAwDZ,EAAWhR,oBAAnE,aAAwD,EAAyB4R,eAAiBlN,EAAMrB,MAAMrD,aAAa4R,eAClItW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkBhR,aAAa,2BAAMgR,EAAWhR,cAAlB,IAAgC4R,eAAgBtH,EAAE4C,cAAc7D,eAGvK,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAAoDtJ,KAA7C,UAAAiR,EAAW/Q,qBAAX,eAA0B2R,gBAA1B,UAAyDZ,EAAW/Q,qBAApE,aAAyD,EAA0B2R,eAAiBlN,EAAMrB,MAAMpD,cAAc2R,eACrItW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkB/Q,cAAc,2BAAM+Q,EAAW/Q,eAAlB,IAAiC2R,eAAgBtH,EAAE4C,cAAc7D,gBAI7K,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,cACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA6CtJ,KAAtC,UAAAiR,EAAWhR,oBAAX,eAAyB6R,UAAzB,UAAkDb,EAAWhR,oBAA7D,aAAkD,EAAyB6R,SAAWnN,EAAMrB,MAAMrD,aAAa6R,SACtHvW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzDhR,aAAa,2BACNgR,EAAWhR,cADN,IAER6R,SAAUJ,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAM/G,yBAAKtO,MAAO,CAAE6V,WAAY,GAAKjU,UAAU,iBACrC,2BACIA,UAAU,oBACV0M,WAA8CtJ,KAAvC,UAAAiR,EAAW/Q,qBAAX,eAA0B4R,UAA1B,UAAmDb,EAAW/Q,qBAA9D,aAAmD,EAA0B4R,SAAWnN,EAAMrB,MAAMpD,cAAc4R,SACzHvW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzD/Q,cAAc,2BACP+Q,EAAW/Q,eADL,IAET4R,SAAUJ,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,cAOnH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,eACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA8CtJ,KAAvC,UAAAiR,EAAWhR,oBAAX,eAAyB8R,WAAzB,UAAmDd,EAAWhR,oBAA9D,aAAmD,EAAyB8R,UAAYpN,EAAMrB,MAAMrD,aAAa8R,UACxHxW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzDhR,aAAa,2BACNgR,EAAWhR,cADN,IAER8R,UAAWL,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAMhH,yBAAKtO,MAAO,CAAE6V,WAAY,GAAKjU,UAAU,iBACrC,2BACIA,UAAU,oBACV0M,WAA+CtJ,KAAxC,UAAAiR,EAAW/Q,qBAAX,eAA0B6R,WAA1B,UAAoDd,EAAW/Q,qBAA/D,aAAoD,EAA0B6R,UAAYpN,EAAMrB,MAAMpD,cAAc6R,UAC3HxW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzD/Q,cAAc,2BACP+Q,EAAW/Q,eADL,IAET6R,UAAWL,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,eAQxH,yBAAKtO,MAAO,CAAE6V,WAAY,EAAGvV,QAAS,gBAClC,yBAAKsB,UAAU,qBAAoB,yBAAK5B,MAAO,CAAEE,WAAY,OAAQD,SAAU,UAAW4V,WAAY,IAAnE,mBAA6F,yBAAK7V,MAAO,CAAEE,WAAY,OAAQD,SAAU,UAAW4V,WAAY,IAAnE,sBAChI,yBAAKjU,UAAU,qBACX,yBAAKA,UAAU,cAAf,YACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA2CtJ,KAApC,UAAAiR,EAAWhR,oBAAX,eAAyB+R,QAAzB,UAAgDf,EAAWhR,oBAA3D,aAAgD,EAAyB+R,OAASrN,EAAMrB,MAAMrD,aAAa+R,OAClHzW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkBhR,aAAa,2BAAMgR,EAAWhR,cAAlB,IAAgC+R,OAAQzH,EAAE4C,cAAc7D,eAG/J,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAA4CtJ,KAArC,UAAAiR,EAAW/Q,qBAAX,eAA0B8R,QAA1B,UAAiDf,EAAW/Q,qBAA5D,aAAiD,EAA0B8R,OAASrN,EAAMrB,MAAMpD,cAAc8R,OACrHzW,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkB/Q,cAAc,2BAAM+Q,EAAW/Q,eAAlB,IAAiC8R,OAAQzH,EAAE4C,cAAc7D,gBAIrK,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,aACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA4CtJ,KAArC,UAAAiR,EAAWhR,oBAAX,eAAyBgS,SAAzB,UAAiDhB,EAAWhR,oBAA5D,aAAiD,EAAyBgS,QAAUtN,EAAMrB,MAAMrD,aAAagS,QACpH1W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzDhR,aAAa,2BACNgR,EAAWhR,cADN,IAERgS,QAASP,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAM9G,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAA6CtJ,KAAtC,UAAAiR,EAAW/Q,qBAAX,eAA0B+R,SAA1B,UAAkDhB,EAAW/Q,qBAA7D,aAAkD,EAA0B+R,QAAUtN,EAAMrB,MAAMpD,cAAc+R,QACvH1W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzD/Q,cAAc,2BACP+Q,EAAW/Q,eADL,IAET+R,QAASP,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,cAOlH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,gBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA+CtJ,KAAxC,UAAAiR,EAAWhR,oBAAX,eAAyBiS,YAAzB,UAAoDjB,EAAWhR,oBAA/D,aAAoD,EAAyBiS,WAAavN,EAAMrB,MAAMrD,aAAaiS,WAC1H3W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzDhR,aAAa,2BACNgR,EAAWhR,cADN,IAERiS,WAAYR,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAMjH,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAAgDtJ,KAAzC,UAAAiR,EAAW/Q,qBAAX,eAA0BgS,YAA1B,UAAqDjB,EAAW/Q,qBAAhE,aAAqD,EAA0BgS,WAAavN,EAAMrB,MAAMpD,cAAcgS,WAC7H3W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAEvDD,GAFsD,IAGzD/Q,cAAc,2BACP+Q,EAAW/Q,eADL,IAETgS,WAAYR,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,cAQrH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,UACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAyCtJ,KAAlC,UAAAiR,EAAWhR,oBAAX,eAAyBkS,MAAzB,UAA8ClB,EAAWhR,oBAAzD,aAA8C,EAAyBkS,KAAOxN,EAAMrB,MAAMrD,aAAakS,KAC9G5W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkBhR,aAAa,2BAAMgR,EAAWhR,cAAlB,IAAgCkS,KAAM5H,EAAE4C,cAAc7D,eAG7J,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAA0CtJ,KAAnC,UAAAiR,EAAW/Q,qBAAX,eAA0BiS,MAA1B,UAA+ClB,EAAW/Q,qBAA1D,aAA+C,EAA0BiS,KAAOxN,EAAMrB,MAAMpD,cAAciS,KACjH5W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkB/Q,cAAc,2BAAM+Q,EAAW/Q,eAAlB,IAAiCiS,KAAM5H,EAAE4C,cAAc7D,gBAInK,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,sBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAqDtJ,KAA9C,UAAAiR,EAAWhR,oBAAX,eAAyBmS,kBAAzB,UAA0DnB,EAAWhR,oBAArE,aAA0D,EAAyBmS,iBAAmBzN,EAAMrB,MAAMrD,aAAamS,iBACtI7W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkBhR,aAAa,2BAAMgR,EAAWhR,cAAlB,IAAgCmS,iBAAkB7H,EAAE4C,cAAc7D,eAGzK,yBAAK1M,UAAU,gBAAgB5B,MAAO,CAAE6V,WAAY,IAChD,2BACIjU,UAAU,oBACV0M,WAAsDtJ,KAA/C,UAAAiR,EAAW/Q,qBAAX,eAA0BkS,kBAA1B,UAA2DnB,EAAW/Q,qBAAtE,aAA2D,EAA0BkS,iBAAmBzN,EAAMrB,MAAMpD,cAAckS,iBACzI7W,SAAU,SAACgP,GAAD,OAA0C2G,EAAc,2BAAKD,GAAN,IAAkB/Q,cAAc,2BAAM+Q,EAAW/Q,eAAlB,IAAiCkS,iBAAkB7H,EAAE4C,cAAc7D,iBAKnL,4BACI1M,UAAS,wBAAmB4U,IAA4B,yBAA2B,IACnFhT,QAAS,WACDgT,MAGA1R,GAAuB6E,EAAMrB,OAC7BzH,EAAS,CAAET,KhBpYL,qBgBoY+BU,QAAS,CAAE6I,QAAOrB,MAAO2N,KAE9DpV,EAAS,CAAET,KhBtYL,qBgBsY+BU,QAAS,CAAE6I,QAAOrB,WAG3DoN,GAAO,KAEX5T,MAAK,UAAK0U,IAA4B,uDAAyD,4BAdnG,gBAgBA,4BACI5U,UAAU,gBACV4B,QAAS,kBAAMkS,GAAO,KAF1B,WAnYG,yBAAK1V,MAAO,CAAEM,QAAS,cAAesV,oBAAqB,UAAWpU,MAAO,SAChF,yBAAKxB,MAAO,CAAE6V,WAAY,EAAGvV,QAAS,gBAClC,yBAAKsB,UAAU,qBACX,yBAAKA,UAAU,cAAf,cACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA0BtJ,IAAnBsD,EAAMmO,SAAyBnO,EAAMmO,SAAW9M,EAAMrB,MAAMmO,SACnElW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAamO,SAAUC,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,YAIhL,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,iBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA6BtJ,IAAtBsD,EAAMsO,YAA4BtO,EAAMsO,YAAcjN,EAAMrB,MAAMsO,YACzErW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAasO,YAAarH,EAAE4C,cAAc7D,cAIlH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,oBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAgCtJ,IAAzBsD,EAAMuO,eAA+BvO,EAAMuO,eAAiBlN,EAAMrB,MAAMuO,eAC/EtW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAauO,eAAgBtH,EAAE4C,cAAc7D,cAIrH,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,cACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA0BtJ,IAAnBsD,EAAMwO,SAAyBxO,EAAMwO,SAAWnN,EAAMrB,MAAMwO,SACnEvW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAawO,SAAUJ,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,YAIhL,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,eACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA2BtJ,IAApBsD,EAAMyO,UAA0BzO,EAAMyO,UAAYpN,EAAMrB,MAAMyO,UACrExW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAayO,UAAWL,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,aAKrL,yBAAKtO,MAAO,CAAE6V,WAAY,EAAGvV,QAAS,gBAClC,yBAAKsB,UAAU,qBACX,yBAAKA,UAAU,cAAf,YACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAwBtJ,IAAjBsD,EAAM0O,OAAuB1O,EAAM0O,OAASrN,EAAMrB,MAAM0O,OAC/DzW,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAa0O,OAAQzH,EAAE4C,cAAc7D,cAI7G,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,aACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAyBtJ,IAAlBsD,EAAM2O,QAAwB3O,EAAM2O,QAAUtN,EAAMrB,MAAM2O,QACjE1W,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAa2O,QAASP,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,YAI/K,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,gBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAA4BtJ,IAArBsD,EAAM4O,WAA2B5O,EAAM4O,WAAavN,EAAMrB,MAAM4O,WACvE3W,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAa4O,WAAYR,MAAMC,SAASpH,EAAE4C,cAAc7D,MAAO,KAAO,EAAIqI,SAASpH,EAAE4C,cAAc7D,MAAO,YAIlL,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,UACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAsBtJ,IAAfsD,EAAM6O,KAAqB7O,EAAM6O,KAAOxN,EAAMrB,MAAM6O,KAC3D5W,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAa6O,KAAM5H,EAAE4C,cAAc7D,cAI3G,yBAAK1M,UAAU,qBACX,yBAAKA,UAAU,cAAf,sBACA,yBAAKA,UAAU,iBACX,2BACIA,UAAU,oBACV0M,WAAkCtJ,IAA3BsD,EAAM8O,iBAAiC9O,EAAM8O,iBAAmBzN,EAAMrB,MAAM8O,iBACnF7W,SAAU,SAACgP,GAAD,OAA0CyG,EAAS,2BAAK1N,GAAN,IAAa8O,iBAAkB7H,EAAE4C,cAAc7D,eAK3H,4BAAQ9K,QAAS,WACb3C,EAAS,CAAET,KhBpHG,qBgBoHuBU,QAAS,CAAE6I,QAAOrB,WACvDoN,GAAO,KAFX,gBAKA,4BAAQlS,QAAS,kBAAMkS,GAAO,KAA9B,WAkSK2B,KAGTjW,SAASwP,eAAe6E,KChavB6B,GAAyB,SAAC,GAAiG,IAAD,EAA9F5Q,EAA8F,EAA9FA,UAAW3I,EAAmF,EAAnFA,QAAS6H,EAA0E,EAA1EA,KAQnD2R,EAAmB,SAAC5Q,GACtB,MAA6B,kBAAjBA,EAAOF,WAAsCzB,IAAhB2B,EAAOF,KACrC,wBAAI0B,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,UAAkCe,EAAOF,MAEhD,wBAAI0B,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,WAAmCe,EAAOF,KAAKlC,KAAI,SAACkC,GAAD,MAC3C,kBAAVA,EACJ,yBAAK0B,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,kBAAkCa,IAASA,GACnD,yBAAK0B,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,kBAAkCa,EAAKb,OAAQ,yBAAK5F,MAAO,CAAEoO,MAAO,OAAQkH,aAAc,EAAGpV,WAAY,SAAWuG,EAAKb,MAAW,mCAASa,EAAKgB,cAIpK+P,EAAmB,SAAC7Q,GACtB,OAAIA,EAAOoC,YACA,wBAAIZ,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,UAAiC,6BAAMe,EAAOf,MAAW,6BAAK,yBAAK5F,MAAO,CAAEyB,OAAQ,OAAQuR,QAAS,OAASrR,IAAI,gBAAgBE,IAAKjE,MAA9I,KAEA,wBAAIuK,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,UAAkCe,EAAOf,KAAhD,MAGT6R,EAAoB,SAAC9Q,GAAD,MACtB,CAAC6Q,EAAiB7Q,GAClB,wBAAIwB,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,UAAkCe,EAAOvG,MAChD,wBAAI+H,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,WAAmCe,EAAO+Q,OACjD,wBAAIvP,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,cAAsCe,EAAOgC,UACpD,wBAAIR,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,QAAgCe,EAAOkC,IAC9C,wBAAIV,IAAG,UAAKvC,EAAL,YAAae,EAAOf,KAApB,YAAoCe,EAAOiC,QAClD2O,EAAiB5Q,KACfgR,EAA2B,SAACC,EAAiBnO,EAAoBoO,GAAtC,OAC7B,wBAAI1P,IAAG,2BAAsByP,IACzB,4BAAKnO,GACJoO,EAAa,wBAAIC,QAAS,GAAb,UAAoBD,SAAqB7S,IAEzD+S,EAAe,SAAfA,EAAgBpR,EAA8DqR,GAChF,IAAI/T,EAAqB,GACnBwF,EAAqB,IAARuO,EAAA,aAAkBrR,EAAOf,MAAiB,IAARoS,EAAA,gBAAqBrR,EAAOf,MAASe,EAAOf,KAC3FqS,GAAgBhR,GAAcN,IAAWO,GAA2BP,KAAYA,EAAOyB,OAAS,GAAa,IAAR4P,EAAtF,UAAqGrR,EAAOyB,OAA5G,KAAwH,GACvI8P,EAAgBjR,GAAcN,IAAWO,GAA2BP,IAAWmC,GAAkBnC,GAAlF,UAAgGsR,EAAhG,YAAgHxO,EAAhH,YA1CC,SAAC9C,GAAD,OACtBmC,GAAkBnC,GACd,OACAuC,GAAevC,EAAOf,KAAM7H,EAAwB4I,EAAOyB,QAAU,GAArE,WACQc,GAAevC,EAAOf,KAAM7H,EAAwB4I,EAAOyB,QAAU,GAD7E,KAEI,GAqC2I+P,CAAkBxR,IAAY8C,EACjL,GAAIhB,GAAqB9B,IAAWO,GAA2BP,IAM3D,GALA1C,EAAG,sBACIA,GADJ,CAEC0T,EAAyB,oBAAD,OAAqBhR,EAAOf,KAA5B,YAAoCoS,GAAOE,EAAcvR,EAAOF,QAGxFE,EAAO6B,cAAe,CAAC,IAAD,EAChBA,EAAgB7B,EAAO6B,cAC7BvE,GAAM,EAAAA,GAAImU,OAAJ,oBAAc5P,EAAcjE,KAAI,SAAC8T,GAAD,OAAaN,EAAaM,EAASL,EAAM,cAGnF/T,EAAM,CACF,wBAAIkE,IAAG,2BAAsBxB,EAAOf,KAA7B,YAAqCoS,IACvCP,EAAkB,2BAAK9Q,GAAN,IAAcf,KAAMsS,OAGlD,OAAOjU,GAQX,OAAO,6BACH,2BAAOrC,UAAU,eACb,kCACI,yBAAK5B,MAAO,CAAEwB,MAAO,WACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,YAEzB,+BACI,4BACI,uCACA,oCACA,mCACA,mCACA,kCACA,mCACA,sCAGR,yCACKkF,EAAUlC,eADf,aACK,EAAmBD,KAAI,SAACoC,GAAD,OAAYoR,EAAapR,EAAQ,QAGhED,EAAUhC,eAAiB,2BAAO9C,UAAU,eACzC,kCACI,yBAAK5B,MAAO,CAAEwB,MAAO,WACrB,yBAAKxB,MAAO,CAAEwB,MAAO,YAEzB,+BACI,4BACI,yCACA,wCAGR,+BA1CqB,kCAAMkF,EAAUhC,sBAAhB,aAAM,EAA0BH,KAAI,SAACG,GAAD,OAC7D,wBAAIyD,IAAG,2BAAsBzD,EAAekB,OACxC,sCAAQlB,EAAekB,KAAvB,YA1D0B,SAAClB,GAAD,OAAoCA,EAAeiD,MAAf,WAA2BjD,EAAeiD,MAA1C,KAAqD,GA0DpF2Q,CAA0B5T,KACzD,4BAAKA,EAAe+C,YAwCf8Q,UAEEvT,IC9GNwT,GAAsB,SAAC,GAAuC,IAArC7O,EAAoC,EAApCA,MAC5BsO,EAAetO,EAAMvB,OAAN,UAAkBuB,EAAMvB,OAAxB,MAAqC,GAC1D,OAAO,yBAAKxG,UAAU,oBAClB,yBAAK5B,MAAO,CAAEoO,MAAO,OAAQ5M,MAAO,QAApC,cAAkDyW,EAAlD,YAAkEtO,EAAM/D,KAAxE,aAAiF+D,EAAMhC,MAAvF,MACA,yBAAK3H,MAAO,CAAEoO,MAAO,QAAS5M,MAAO,mBAAoB8T,aAAc,OAAQrC,UAAW,UAA1F,UAAyGtJ,EAAMvJ,SCL1GqY,GAAuB,SAAC,GAAD,IAAGnS,EAAH,EAAGA,SAAH,OAAsDA,EAAW,yBAAK1E,UAAU,sBAChH,yBAAK5B,MAAO,CAAEE,WAAY,OAAQkO,MAAO,SAAzC,YACA,yBAAKpO,MAAO,CAAE0S,YAAa,UAAYpM,EAASkO,KAAK,QAChD,MCFIkE,GAAqB,SAAC,GAA8C,IAA5C/T,EAA2C,EAA3CA,MAMjC,OAAOA,GAASA,EAAMlC,OAAS,EAAI,2BAAOb,UAAU,eAChD,kCACI,yBAAK5B,MAAO,CAAEwB,MAAO,WACrB,yBAAKxB,MAAO,CAAEwB,MAAO,YAEzB,+BACI,4BACI,oCACA,wCAIR,+BAjBgB,OAAMmD,QAAN,IAAMA,OAAN,EAAMA,EAAOJ,KAAI,SAACkC,GAAD,OACjC,wBAAI0B,IAAG,eAAU1B,EAAKb,OAClB,4BAAKa,EAAKkB,MAAL,UAAgBlB,EAAKb,KAArB,aAA8Ba,EAAKkB,MAAnC,KAA8ClB,EAAKb,MACxD,4BAAKa,EAAKgB,cAiBP,MCpBFkR,GAAqB,SAAC,GAAmF,IAAjF/S,EAAgF,EAAhFA,KAAM0C,EAA0E,EAA1EA,MACjCsQ,EAAoB,SAACC,EAA6B7U,GAA9B,OAA+C,wBAAImE,IAAG,qBAAgBvC,EAAhB,YAAwB5B,IAC3F,IAARA,EAAY,wBAAI8U,QAAS,EAAG9Y,MAAO,CAAEyS,WAAY,SAAW7M,QAAqBZ,IAARhB,OAAoBgB,EAAY,4BAAKY,GAC/G,4BAAKiT,EAAgBpC,UACrB,4BAAKoC,EAAgBjC,aACrB,4BAAKiC,EAAgBhC,gBACrB,4BAAKgC,EAAgB/B,UACrB,4BAAK+B,EAAgB9B,WACrB,4BAAK8B,EAAgB7B,QACrB,4BAAK6B,EAAgB5B,SACrB,4BAAK4B,EAAgB3B,YACrB,4BAAK2B,EAAgB1B,MACrB,4BAAK0B,EAAgBzB,oBAIzB,OAAO,2BAAOxV,UAAU,eACpB,kCACI,yBAAK5B,MAAO,CAAEwB,MAAO,WACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,UACrB,yBAAKxB,MAAO,CAAEwB,MAAO,WAEzB,+BACI,4BACI,oCACA,iCACA,kCACA,kCACA,iCACA,iCACA,iCACA,iCACA,kCACA,kCACA,oCAGR,+BA9BgB,kBAAMsD,GAAuBwD,GADqB,CAACsQ,GAAtC7T,EACiDuD,GADgBrD,aAAc,GAAI2T,EAAkB7T,EAASG,cAAe,IACnE0T,EAAkBtQ,GAD7E,IAACvD,EAgCxBgU,MC7BAC,GAAqB,SAAC,GAAyE,IAAvErP,EAAsE,EAAtEA,MAAOsP,EAA+D,EAA/DA,QAA+D,EACzDvL,oBAAkB,GADuC,mBAChG+D,EADgG,KAC/EC,EAD+E,OAElDhE,oBAAkB,GAFgC,mBAEhGwL,EAFgG,KAE3EC,EAF2E,KAGjGtY,EAAWqN,cACXuH,EAAO,qBAAiB9L,EAAM/D,KAAvB,YAA+B+D,EAAMhC,OAArC,OAA6CsR,EAAQG,cAAgB,eAAiB,IAC7FvG,EAAQjS,GAAM0C,WACdU,EAAM6O,EAAME,OAAOsG,WAAU,SAAC9T,GAAD,OAAiBsG,GAAgBtG,EAAaoE,EAAOkJ,EAAM3H,QAAS2H,EAAMrH,cAwG7G,OAAO,yBAAK5J,UAAS,WAAMqX,EAAQG,cAAgB,+BAAiC,KAtGhF,yBAAKjZ,GAAIsV,EAAS7T,UAAS,0BAAqBqX,EAAQG,cAAgB,oBAAsB,KAC1F,kBAAC,GAAD,CAAqBzP,MAAOA,IAC5B,kBAAC,GAAD,CAAoB/D,KAAM+D,EAAM/D,KAAM0C,MAAOqB,EAAMrB,QAClDqB,EAAMjD,UAAY,kBAAC,GAAD,CAAwBA,UAAWiD,EAAMjD,UAAW3I,QAAS8U,EAAM3H,QAAStF,KAAI,UAAK+D,EAAM/D,KAAX,YAAmB+D,EAAMhC,cAAc3C,EAC1I,kBAAC,GAAD,CAAoBL,MAAOgF,EAAMhF,QACjC,kBAAC,GAAD,CAAsB2B,SAAUqD,EAAMrD,YAG1C2S,EAAQG,cAEJ,yBAAKxX,UAAU,iBACV6P,EAAkB,kBAAC,GAAD,CAAmB9H,MAAOA,EAAO8L,QAASA,EAASC,OAAQhE,IAAyB,KACtGwH,EAAsB,kBAAC,GAAD,CAAsBvP,MAAOA,EAAO8L,QAASA,EAASC,OAAQyD,IAA4B,KACjH,yBACIhR,IAAG,UAAKwB,EAAM/D,KAAX,cACHhE,UAAU,qBACV4B,QAAS,kBAAM3C,EAAS,CAAET,KtBvCP,0BsBuCsCU,QAAS6I,MAElE,yBACIhI,IAAI,SACJE,IAAKnD,GACLsB,MAAO,CAAEwB,MAAO,QAChBM,MAAK,iBAAY6H,EAAM/D,KAAlB,mBAEb,yBACIuC,IAAG,UAAKwB,EAAM/D,KAAX,aACHhE,UAAU,qBACV4B,QAAS,kBAAMkO,GAAmB,KAElC,yBACI/P,IAAI,cACJE,IAAKjD,GACLoB,MAAO,CAAEwB,MAAO,QAChBM,MAAM,kCAGd,yBACIqG,IAAG,UAAKwB,EAAM/D,KAAX,WACHhE,UAAWqX,EAAQK,YAAc,qBAAuB,kCACxD9V,QAAS,kBAAM3C,EAAS,CAAET,KtB/DT,wBsB+DsCU,QAAS6I,MAEhE,yBACIhI,IAAI,WACJE,IAAKvD,GACL0B,MAAO,CAAEwB,MAAO,QAChBM,MAAOmX,EAAQM,eAAiB,yCAA2C,4CAGnF,yBACIpR,IAAG,UAAKwB,EAAM/D,KAAX,gBACHhE,UAAWqX,EAAQM,eAAiB,qBAAuB,kCAC3D/V,QAAS,kBAAM3C,EAAS,CAAET,KtB5ET,wBsB4EsCU,QAAS6I,MAEhE,yBACIhI,IAAI,WACJE,IAAKrD,GACLwB,MAAO,CAAEwB,MAAO,QAChBM,MAAOmX,EAAQM,eAAiB,yCAA2C,8EAGnF,yBACIpR,IAAG,UAAKwB,EAAM/D,KAAX,UACHhE,UAAWoC,EAAM,EAAI,qBAAuB,kCAC5CR,QAAS,kBAAM3C,EAAS,CAAET,KtBlFvB,UsBkFsCU,QAAS6I,KAClD7H,MAAOkC,EAAM,EAAI,uCAAyC,yDAE1D,yBAAKrC,IAAI,KAAKE,IAAKzC,GAAQY,MAAO,CAAEwB,MAAO,WAE/C,yBACI2G,IAAG,UAAKwB,EAAM/D,KAAX,YACHhE,UAAWoC,EAAM6O,EAAME,OAAOtQ,OAAS,EAAI,qBAAuB,kCAClEe,QAAS,kBAAM3C,EAAS,CAAET,KtBzFrB,YsByFsCU,QAAS6I,KACpD7H,MAAOkC,EAAM6O,EAAME,OAAOtQ,OAAS,EAAI,yCAA2C,wDAElF,yBAAKd,IAAI,OAAOE,IAAKvC,GAAUU,MAAO,CAAEwB,MAAO,WAGnD,yBACI2G,IAAG,UAAKwB,EAAM/D,KAAX,YACHhE,UAAU,qBACV4B,QAAS,kBAAMgW,MAAM,yCAErB,yBAAK7X,IAAI,SAASE,IAAK3C,GAAUc,MAAO,CAAEwB,MAAO,WAErD,yBACI2G,IAAG,UAAKwB,EAAM/D,KAAX,aACHhE,UAAU,qBACV4B,QAAS,kBAAMgW,MAAM,qCAErB,yBAAK7X,IAAI,SAASE,IAAK/C,GAAWkB,MAAO,CAAEwB,MAAO,WAEtD,yBACI2G,IAAG,UAAKwB,EAAM/D,KAAX,gBACHhE,UAAU,qBACV4B,QAAS,kBAAMgW,MAAM,wCAGrB,yBAAK7X,IAAI,SAASE,IAAK7C,GAAcgB,MAAO,CAAEwB,MAAO,YAG7D,OCzHCiY,GAAkB,SAAC,GAAgJ,IAA9I5G,EAA6I,EAA7IA,MAAO6G,EAAsI,EAAtIA,KAAMC,EAAgI,EAAhIA,aAAcC,EAAkH,EAAlHA,KACnD7b,EAAU8U,EAAM3H,QAChBoO,EAAc,SAAClZ,GACjB,IAAMyZ,EAAY9T,GAAoBhI,GAAS0O,eAC/C,OAAQrM,GACJ,KAAKxE,EAAU0W,OAAQ,OAAO7G,GAAUoH,EAAME,OAAQnX,EAAU0W,QAAUuH,EAAUvH,OACpF,KAAK1W,EAAU4Q,KAAM,OAAOf,GAAUoH,EAAME,OAAQnX,EAAU4Q,MAAQqN,EAAUrN,KAChF,KAAK5Q,EAAU8Q,QAAS,OAAOjB,GAAUoH,EAAME,OAAQnX,EAAU8Q,SAAWmN,EAAUnN,QAE1F,OAAO,GAMX,OAAO,yBAAKvM,GAAE,gCAA2BuZ,EAAKI,IAAMlY,UAAS,UAAK+X,EAAe,gBAAkB,eAAtC,YAAwDC,EAAO,iBAAmB,IAAM5Z,MAAO,CAAEoO,MAAO,OAAQ+G,UAAW,GAAI1C,WAAY,IACpM,yBAAK7Q,UAAU,sBAAf,UAAwCiR,EAAMtP,MAA9C,cAAyDsP,EAAM3H,QAA/D,aAA2E2H,EAAMkH,YAAjF,UACa,IAAZL,EAAKI,GACF,6BACI,kBAAC,GAAD,CAAyBpF,UAAW5K,GAAa/L,EAAS8U,EAAMrH,aAChE,kBAAC,GAAD,CAAsBlF,SAAUiE,GAAesI,EAAME,UACrD,kBAAC,GAAD,CAA4B6B,WAAY/B,EAAMmH,WAAYpP,WAAYiI,EAAMvH,WAAYvN,QAASA,UAErGiH,EACH6N,EAAME,OAAOxO,KAAI,SAACoH,GAAD,OAAY,kBAAC,GAAD,CAC1BxD,IAAG,qBAAgBwD,EAAO/F,KAAvB,YAA+B+F,EAAOhE,OACzCgC,MAAOgC,EACPsN,QAAS,CAAEG,eAAgBO,EAAcL,YAAaA,EAAY3N,EAAOvL,MAAOmZ,gBAhBhEnR,EAgB+FuD,EAAOvD,QAf9GA,GAAU,GACT,MAFM,IAACA,KAkBpB,yBAAKxG,UAAU,uBAAf,UAAyC8X,EAAKI,GAA9C,cAAsDJ,EAAKO,UCqBtDC,GAAcC,aAFH,SAACtH,GAAD,OAAoBA,IAEjBsH,EA/CX,SAACC,GAAoB,IAAD,EACA1M,mBAAoB,IADpB,mBACzB2M,EADyB,KACfC,EADe,OAEa5M,oBAAkB,GAF/B,mBAEzB6M,EAFyB,KAEVpH,EAFU,KAGhChF,qBAAU,WACNmM,GAAY,uCACLjY,MAAMC,KAAKlB,SAASmB,iBAAiB,uCAAuCuB,QAAO,SAAC0W,GAAD,OAAQA,EAAG1J,wBAAwBrP,OAAS+Y,EAAG1J,wBAAwBE,IAAM,QAAMzM,KAAI,SAACkW,GAAD,MAAc,CAAE,GAAMA,EAAQta,GAAI,KAAQ,OAD/M,YAELkC,MAAMC,KAAKlB,SAASmB,iBAAiB,uCAAuCuB,QAAO,SAAC0W,GAAD,OAClFA,EAAG1J,wBAAwBrP,OAAS+Y,EAAG1J,wBAAwBE,KAAO,MACtEwJ,EAAG1J,wBAAwBrP,OAAS+Y,EAAG1J,wBAAwBE,IAAM,QACvEzM,KAAI,SAACkW,GAAD,MAAc,CAAE,GAAMA,EAAQta,GAAI,KAAQ,OALxC,YAMLkC,MAAMC,KAAKlB,SAASmB,iBAAiB,uCAAuCuB,QAAO,SAAC0W,GAAD,OAClFA,EAAG1J,wBAAwBrP,OAAS+Y,EAAG1J,wBAAwBE,KAAO,QAAMzM,KAAI,SAACkW,GAAD,MAAc,CAAE,GAAMA,EAAQta,GAAI,KAAQ,aAEnI,CAACia,IACJ,IrB6J2B5P,EqB7JrBkQ,EAAe,CAAEnX,MAAO6W,EAAM7W,MAAO2H,QAASkP,EAAMlP,QAASM,UAAW4O,EAAM5O,UAAWF,WAAY8O,EAAM9O,WAAYF,gBAAiBgP,EAAMhP,gBAAiB2H,OAAQqH,EAAMrH,QAC7K1N,EAASD,GAAkBsV,EAAa3H,OAAQ2H,EAAaxP,QAASwP,EAAalP,WAAW1H,QAAO,SAAC6H,GAAD,YAAuB3G,IAAX2G,KAEjHgP,EAAW,2BAAQD,GAAR,IAAsBX,arB0JZvP,EqB1JwCnF,ErB0JdmF,EAAOX,QAAO,SAAC+Q,EAAWjR,GAAZ,OAAsBiR,EAAYjR,EAAMhC,QAAO,IqB1JtCoL,OAAQ1N,EAAQ2U,WAAY5N,GAAcsO,EAAaxP,QAAS7F,EAAQqV,EAAalP,UAAWkP,EAAatP,mBACnLyP,EAAqB,SAACnB,GAAD,OAAiCrU,EAAOvB,QAAO,SAAC6H,GAAD,OAAY0O,EAAS/S,MAAK,SAACwT,GAAD,OAAWA,EAAM3a,KAAN,qBAA2BwL,EAAO/F,KAAlC,YAA0C+F,EAAOhE,MAAjD,iBAAwEmT,EAAMpB,OAASA,SAChMqB,EAAsB,kBAAMV,EAAS9V,KAAI,SAACoF,GAAD,OAAWA,EAAM+P,QAAM5V,QAAO,SAAC4V,EAAM1V,EAAKC,GAAZ,OAAoBA,EAAIC,QAAQwV,KAAU1V,KAAKvB,QAgB5H,OAAO,6BACH,kBAAC,GAAD,CAAS0Q,oBAAqBA,IAC9B,kBAAC,GAAD,CAAmB9N,OAAQA,EAAQtH,QAAS2c,EAAaxP,UACzD,kBAAC,GAAD,MACCmP,EAAS5X,OAAS,6BAnBH,WAEhB,IADA,IAAIuY,EAAuB,GAClBxY,EAAI,EAAGA,GAAKuY,IAAuBvY,IACxCwY,EAAK,sBACEA,GADF,CAED,kBAAC,GAAD,CACI7S,IAAG,oCAA+B3F,GAClCqQ,MAAK,2BAAO8H,GAAP,IAAoB5H,OAAQ8H,EAAmBrY,KACpDkX,KAAM,CAAEI,GAAItX,EAAGyX,MAAOc,KACtBpB,cAAc,MAI1B,OAAOqB,EAMkBC,SAAwBjW,EACjD,kBAAC,GAAD,CAAiB6N,MAAO8H,EAAajB,KAAM,CAAEI,GAAI,EAAGG,MAAO,GAAKL,KAAMW,IACtE,kBAAC,GAAD,CAAqB/M,KAAMkN,EAAcjN,QAAS8M,QC7C7CW,I,MAAc,WAEvB,IAAMC,EAAUC,cACVva,EAAWqN,cAEjB,OACI,yBAAKtM,UAAU,iBACX,yBAAK5B,MAAO,CAAEqb,SAAU,UAAW7Z,MAAO,OAAQyR,UAAW,SAAU/S,WAAY,OAAQD,SAAU,WAArG,6CACA,2BAAOF,QAAQ,gBAAgB6B,UAAU,uBAAuB5B,MAAO,CAAEqb,SAAU,QAC/E,2BACIlb,GAAG,gBACHC,KAAK,OACLC,OAAO,QACPL,MAAO,CAAEM,QAAS,QAClBC,SAAU,WAAO,IAAD,IACNC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAACC,GAAmC,IAAD,EAC/CE,EAAS,CAAET,KzBrBZ,cyBqB+BU,QAASC,KAAKC,MAAL,UAAWL,EAAGM,cAAd,aAAW,EAAWC,UAC7Dia,EAAQG,KAAK,aAEjB9a,EAAOW,WAAP,UAAmBC,SAASC,cAAc,yBAA1C,iBAAkB,EAAgEC,aAAlF,aAAkB,EAAuEC,KAAK,OAGtG,yBAAKvB,MAAO,CAAEqb,SAAU,OAASzZ,UAAU,8BAA3C,sCACA,yBAAK5B,MAAO,CAAEqb,SAAU,OAAS1Z,IAAI,gBAAgBC,UAAU,2BAA2BC,IAAK/E,MAEnG,yBAAK8E,UAAU,uBAAuB5B,MAAO,CAAEqb,SAAU,OAAS7X,QAAS,kBAAM2X,EAAQG,KAAK,iBAC1F,yBAAK1Z,UAAU,8BAAf,wBACA,yBAAKD,IAAI,gBAAgBC,UAAU,2BAA2BC,IAAKjF,MAEvE,yBAAKgF,UAAU,uBAAuB5B,MAAO,CAAEqb,SAAU,OAAS7X,QAAS,kBAAM2X,EAAQG,KAAK,qBAC1F,yBAAK1Z,UAAU,8BAAf,iCACA,yBAAKD,IAAI,gBAAgBC,UAAU,2BAA2BC,IAAKhG,SCpCtE0f,I,MAAqB,SAAC,GAAqK,IAAD,EAAlKxd,EAAkK,EAAlKA,QAASyd,EAAyJ,EAAzJA,kBAAmBC,EAAsI,EAAtIA,qBACvDC,EAAa3V,GAAoBhI,GAASoM,WAC1CwR,EAAa,SAACrW,GAAD,OACdkW,EAEGA,IAAsBlW,EAClB,8DACA,8DAHJ,uCAUR,OAAO,yBAAK1D,UAAU,uBAClB,yBAAKA,UAAU,oBAAf,6BAA+CmE,GAAoBhI,GAASiI,4BAA5E,aAA+C,EAAmD0B,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIkU,sBAPjH,OACnBF,QADmB,IACnBA,OADmB,EACnBA,EAAYnX,KAAI,SAACe,GAAD,OACZ,yBAAK6C,IAAG,UAAK7C,EAAUM,KAAf,aAAgChE,UAAW+Z,EAAWrW,EAAUM,MAAOpC,QAAS,WAAQiY,EAAqBnW,EAAUM,QAC1HN,EAAUM,YCVdiW,GAAmB,SAAC,GAAsI,IAApIC,EAAmI,EAAnIA,gBAAiBC,EAAkH,EAAlHA,mBAC1CC,EAAc,SAACje,GAAD,OACf+d,EAEGA,IAAoB/d,EAChB,2DACA,2DAHJ,oCAWR,OAAO,yBAAK6D,UAAU,uBAClB,yBAAKA,UAAU,oBAAf,oBAPAyU,OAAO4F,OAAOtgB,GAAa4I,KAAI,SAACxG,GAAD,OAC3B,yBAAKoK,IAAG,UAAKpK,EAAL,aAAyB6D,UAAWoa,EAAYje,GAAUyF,QAAS,WAAQuY,EAAmBhe,KAClG,yBAAK4D,IAAG,iBAAY5D,GAAW6D,UAAU,iBAAiBC,IAAK/D,GAAgBC,KAC/E,6BAAMA,SCXTme,GAAsB,SAAC,GAA0K,IAAxKne,EAAuK,EAAvKA,QAASoe,EAA8J,EAA9JA,mBAAoBC,EAA0I,EAA1IA,sBAa/D,OAAO,yBAAKxa,UAAU,uBAClB,yBAAKA,UAAU,oBAAf,uBANAyU,OAAO4F,OzBmNwB,SAACle,GACpC,OAAKA,EAGC,GAAN,mBAAW8G,IAAX,YAA4BkB,GAAoBhI,GAAS8M,eAF9C,GyBrNOwR,CAAwBte,GAAwBwG,KAAI,SAACoG,GAAD,OAC9D,yBAAKxC,IAAG,UAAKwC,EAAK/E,KAAV,aAA2BhE,WARvBgJ,EAQ6CD,EAAK/E,KAPjEuW,EAEGA,IAAuBvR,EACnB,8DACA,8DAHJ,uCAMqEpH,QAAS,WAAQ4Y,EAAsBzR,EAAK/E,QAC5G+E,EAAK/E,MATC,IAACgF,QCMX0R,GAAyB,WAAO,IAAD,EACd5O,wBAA8B1I,GADhB,mBACjC6N,EADiC,KAC1B0J,EAD0B,OAEF7O,mBAAiB,IAFf,mBAEjC8O,EAFiC,KAEpBC,EAFoB,KAGlCtB,EAAUC,cACVva,EAAWqN,cACXwN,GAAkB,OAAL7I,QAAK,IAALA,OAAA,EAAAA,EAAO3H,UAAWnF,GAAoB8M,EAAM3H,SAASf,WAUxE,OAAO,6BACH,yBAAKnK,MAAO,CAAEC,SAAU,OAAQC,WAAY,SAA5C,qCAEA,kBAAC,GAAD,CAAkB4b,gBAAe,OAAEjJ,QAAF,IAAEA,OAAF,EAAEA,EAAO3H,QAAS6Q,mBAZpC,SAAChe,GAChBwe,EAAS1J,EAAK,2BAAQA,GAAR,IAAe3H,QAASnN,IAAY,CAAEwF,MAAO,GAAI2H,QAASnN,EAASgV,OAAQ,QAYxFF,GAASA,EAAM3H,QAAU,kBAAC,GAAD,CAAqBnN,QAAS8U,EAAM3H,QAASiR,mBAAoBtJ,EAAMvH,WAAY8Q,sBAV3F,SAACxR,GACnB2R,EAAS1J,EAAK,2BAAQA,GAAR,IAAevH,WAAYV,IAAe,CAAErH,MAAO,GAAI2H,QAAS,GAAII,WAAYV,EAAYmI,OAAQ,QASsC,KACvJF,GAASA,EAAM3H,SAAWwQ,EAAa,kBAAC,GAAD,CAAoB3d,QAAS8U,EAAM3H,QAASsQ,kBAAmB3I,EAAMrH,UAAWiQ,qBARvG,SAACnW,GAClBiX,EAAS1J,EAAK,2BAAQA,GAAR,IAAerH,UAAWlG,IAAc,CAAE/B,MAAO,GAAI2H,QAAS,GAAIM,UAAWlG,EAAWyN,OAAQ,QAOmD,KACjK,yBAAKnR,UAAU,aACX,2BACIA,UAAU,cACVzB,GAAG,YACHoR,YAAY,8BACZhR,SAAU,SAACgP,GACPkN,EAAelN,EAAE4C,cAAc7D,OAC/BiO,EAAS1J,EAAK,2BAAQA,GAAR,IAAetP,MAAOgM,EAAE4C,cAAc7D,QAAU,CAAE/K,MAAOgM,EAAE4C,cAAc7D,MAAOpD,QAAS,GAAI6H,OAAQ,MAEvHzE,MAAOkO,KAEf,4BACI5a,UAAU,kBACV4B,QAAS,WACL3C,EAAS,CAAET,K7B3CA,c6B2CmBU,QAAS+R,IACvCsI,EAAQG,KAAK,cAJrB,c,6CC/BKoB,GAAqB,WAC9B,IAAMvB,EAAUC,cACVva,EAAWqN,cACjB,OACI,yBAAKtM,UAAU,0BACX,yBAAK5B,MAAO,CAAEC,SAAU,OAAQC,WAAY,OAAQkO,MAAO,OAAQ4E,QAAS,SAA5E,2BACA,yBAAKhT,MAAO,CAAEoO,MAAO,OAAQuO,MAAO,SAChC,yBACIhb,IAAI,cACJC,UAAU,oBACVC,IAAK9F,GACLyH,QAAS,WACL3C,EAAS,CAAET,K9BrBR,c8BqB2BU,QAAU8b,KACxCzB,EAAQG,KAAK,eAGrB,yBACI3Z,IAAI,aACJC,UAAU,oBACVC,IAAK5F,GACLuH,QAAS,WACL3C,EAAS,CAAET,K9B9BR,c8B8B2BU,QAAU+b,KACxC1B,EAAQG,KAAK,eAGrB,yBACI3Z,IAAI,WACJC,UAAU,oBACVC,IAAK1F,GACLqH,QAAS,WACL3C,EAAS,CAAET,K9BvCR,c8BuC2BU,QAAUgc,KACxC3B,EAAQG,KAAK,eAGrB,yBACI3Z,IAAI,qBACJC,UAAU,oBACVC,IAAKxF,GACLmH,QAAS,WACL3C,EAAS,CAAET,K9BhDR,c8BgD2BU,QAAU7C,KACxCkd,EAAQG,KAAK,eAErB,yBACI3Z,IAAI,aACJC,UAAU,oBACVC,IAAKtF,GACLiH,QAAS,WACL3C,EAAS,CAAET,K9BxDR,c8BwD2BU,QAAU7C,KACxCkd,EAAQG,KAAK,eAUrB,yBACI3Z,IAAI,mBACJC,UAAU,oBACVC,IAAKpF,GACL+G,QAAS,WACL3C,EAAS,CAAET,K9BxER,c8BwE2BU,QAAU9C,KACxCmd,EAAQG,KAAK,kBCzDxByB,GAAe5C,eAbhB,kBACV,kBAAC,IAAD,KACE,yBAAKha,GAAG,WACN,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO6c,KAAK,kBAAkBC,UAAWP,KACzC,kBAAC,IAAD,CAAOM,KAAK,cAAcC,UAAWX,KACrC,kBAAC,IAAD,CAAOU,KAAK,WAAWC,UAAW/C,KAClC,kBAAC,IAAD,CAAO8C,KAAK,IAAIC,UAAW/B,W,MCDfgC,QACW,cAA7BpJ,OAAOqJ,SAASC,UAEe,UAA7BtJ,OAAOqJ,SAASC,UAEhBtJ,OAAOqJ,SAASC,SAASC,MACvB,2DCTC,IAAMzc,GAAQ0c,aCJd,WAAuH,IAAjGzK,EAAgG,uDAA/E,CAAEtP,MAAO,GAAI2H,QAAS,GAAI6H,OAAQ,IAAMwK,EAAuC,uCACzH,OAAQA,EAAOnd,MACX,IlCLmB,ckCMf,OAAO,2BAAKyS,GAAZ,IAAmB3H,QAASqS,EAAOzc,UACvC,IlCNmB,ckCOf,OAAOyc,EAAOzc,QAClB,IlCP6B,wBkCQzB,IAAM0c,EAAY3K,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,cACxG7B,EAAQkJ,EAAME,OAAOyK,GAC3B,GAAuB,kBAAX7T,EACR,MAAM,IAAI8T,MAAM,2DAEhB,OAAO,2BAAK5K,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGF,IAA5B,4BAA6C7T,GAA7C,IAAoDvB,QAASuB,EAAMvB,QAAU,GAAK,KAAlF,YAA0FyK,EAAME,OAAO2K,MAAMF,EAAY,OAE1J,IlCd6B,wBkCezB,IAAMG,EAAU9K,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,cACtGjG,EAAcsN,EAAME,OAAO4K,GACjC,MAA6B,kBAAjBpY,EACD,2BAAKsN,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGC,IAA5B,CAAsC,CAAE/X,KAAML,EAAa6C,OAAQ,IAAnE,YAA2EyK,EAAME,OAAO2K,MAAMC,EAAU,OAE1H,2BAAK9K,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGC,IAA5B,4BAA2CpY,GAA3C,IAAwD6C,QAAS7C,EAAY6C,QAAU,GAAK,KAA5F,YAAoGyK,EAAME,OAAO2K,MAAMC,EAAU,OAElK,IlCrB+B,0BkCsB3B,OAAO,2BAAK9K,GAAZ,IAAmBE,OAAQF,EAAME,OAAOjP,QAAO,SAACiE,GAAD,OAAW8D,GAAgB9D,EAAMwV,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,gBACzH,IlCtB2B,sBkCuBvB,GAAKqH,EAAME,OAAOzL,MAAK,SAACS,GAAD,MAA4B,kBAAVA,EAAqBA,IAASwV,EAAOzc,QAAUiH,EAAKnC,OAAS2X,EAAOzc,WAEtG,CACH,IAAM8c,EAAY/K,EAAME,OAAOsG,WAAU,SAACtR,GAAD,MAA4B,kBAAVA,GAAsBA,IAASwV,EAAOzc,WACjG,IAAmB,IAAf8c,EACA,OAAO,2BAAK/K,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGE,IAA5B,CAAwC,CAAEhY,KAAM2X,EAAOzc,QAASsH,OAAQ,IAAxE,YAAgFyK,EAAME,OAAO2K,MAAME,EAAY,OAExI,IAAMC,EAAuBrY,GAAiB+X,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,WAC7EsS,EAAajL,EAAME,OAAOsG,WAAU,SAACtR,GAAD,cACpB,kBAAVA,GACRA,EAAKnC,OAAS2X,EAAOzc,WACpB,UAAA0E,GAAiBuC,EAAM8K,EAAM3H,QAAS2H,EAAMrH,kBAA5C,eAAwD7D,QAAS,KAAM,UAAAnC,GAAiBuC,EAAM8K,EAAM3H,QAAS2H,EAAMrH,kBAA5C,eAAwDpD,SAAU,MAA1I,OAAiJyV,QAAjJ,IAAiJA,OAAjJ,EAAiJA,EAAsBlW,UACrKoW,EAAsBlL,EAAME,OAAO+K,GACzC,OAAIC,EACO,2BAAKlL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGI,IAA5B,4BAA8CC,GAA9C,IAAmE3V,QAAS2V,EAAoB3V,QAAU,GAAK,KAA/G,YAAuHyK,EAAME,OAAO2K,MAAMI,EAAa,OAEzK,2BAAKjL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,QAAZ,CAAoBwK,EAAOzc,YAf5D,OAAO,2BAAK+R,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,QAAZ,CAAoBwK,EAAOzc,YAqB5D,IlC5C0B,qBkC6CtB,IAAMkd,EAAWnL,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAQ6I,MAAOkJ,EAAM3H,QAAS2H,EAAMrH,cAC7GyS,EAAiBpL,EAAME,OAAOiL,GAEpC,GAAgC,kBAApBC,EACR,OAAO,2BAAKpL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGM,IAA5B,CAAuC,CAAEpY,KAAMqY,EAAgB3V,MAAOiV,EAAOzc,QAAQwH,QAArF,YAAiGuK,EAAME,OAAO2K,MAAMM,EAAW,OAExJ,GAAI7Y,GAA8B8Y,EAAe3V,QAAUnD,GAA8BoY,EAAOzc,QAAQwH,OAAQ,CAC5G,IAAM4V,EAAWD,EAAe3V,MAAQ,CACpCrD,aAAa,2BAAMgZ,EAAe3V,MAAMrD,cAAiBsY,EAAOzc,QAAQwH,MAAMrD,cAC9EC,cAAc,2BAAM+Y,EAAe3V,MAAMpD,eAAkBqY,EAAOzc,QAAQwH,MAAMpD,gBAChFqY,EAAOzc,QAAQwH,MACnB,OAAO,2BAAKuK,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGM,IAA5B,4BAA4CC,GAA5C,IAA4D3V,MAAO4V,KAAnE,YAAkFrL,EAAME,OAAO2K,MAAMM,EAAW,OAEzI,OAAO,2BAAKnL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGM,IAA5B,4BAA4CC,GAA5C,IAA4D3V,MAAOiV,EAAOzc,QAAQwH,SAAlF,YAA8FuK,EAAME,OAAO2K,MAAMM,EAAW,OAGjK,IlC5D6B,wBkC6DzB,IAAMG,EAAYtL,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAQ6I,MAAOkJ,EAAM3H,QAAS2H,EAAMrH,cAC9G4S,EAAoBvL,EAAME,OAAOoL,GAEvC,MAAmC,kBAAvBC,EACD,2BAAKvL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGS,IAA5B,CAAwC,CAAEvY,KAAMwY,EAAmB9X,SAAUiX,EAAOzc,QAAQsF,UAA5F,YAA0GyM,EAAME,OAAO2K,MAAMS,EAAY,OAE3J,2BAAKtL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGS,IAA5B,4BAA6CC,GAA7C,IAAgE9X,SAAUiX,EAAOzc,QAAQsF,WAAzF,YAAuGyM,EAAME,OAAO2K,MAAMS,EAAY,OAEvK,IlCpEe,UkCqEX,IAAME,EAAUxL,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,cACtG8S,EAAazL,EAAME,OAAOsL,GAC1BE,EAAgB1L,EAAME,OAAOsL,EAAU,GAC7C,OAAO,2BAAKxL,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGW,EAAU,IAAtC,CAA0CC,EAAYC,GAAtD,YAAwE1L,EAAME,OAAO2K,MAAMW,EAAU,OAClI,IlCxEiB,YkCyEb,IAAMG,EAAa3L,EAAME,OAAOsG,WAAU,SAACtR,GAAD,OAAU8D,GAAgB9D,EAAMwV,EAAOzc,QAAS+R,EAAM3H,QAAS2H,EAAMrH,cACzGiT,EAAc5L,EAAME,OAAOyL,GAC3BE,EAAiB7L,EAAME,OAAOyL,EAAa,GACjD,OAAO,2BAAK3L,GAAZ,IAAmBE,OAAO,GAAD,mBAAMF,EAAME,OAAO2K,MAAM,EAAGc,IAA5B,CAAyCE,EAAgBD,GAAzD,YAAyE5L,EAAME,OAAO2K,MAAMc,EAAa,OACtI,QACI,OAAO3L,MD/EnB5B,IAAS0N,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUhe,MAAOA,IACf,kBAACmc,GAAD,QAGJ3b,SAASwP,eAAe,SD2HpB,kBAAmBiO,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAvb,GACL4L,QAAQ5L,MAAMA,EAAMwb,e","file":"static/js/main.428daeab.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/AdeptaSororitas.9eb926cf.png\";","module.exports = __webpack_public_path__ + \"static/media/AdeptusMechanicus.d47832b5.png\";","module.exports = __webpack_public_path__ + \"static/media/AstraMilitarum.d1b5f2e7.png\";","module.exports = __webpack_public_path__ + \"static/media/Core.61e4c42e.png\";","module.exports = __webpack_public_path__ + \"static/media/CreateWarband.62730dcd.png\";","module.exports = __webpack_public_path__ + \"static/media/DarkAngels.672b9908.png\";","module.exports = __webpack_public_path__ + \"static/media/Deathwatch.46c03a26.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPrSURBVGiB3drbb1RVFMfxz4wNJaEUC76rpVoeSKmtBfFJjdAg/4L6LyhE/R8EBBIviZcYfVHkiTQ+e0GMdw1vtsVYMSpUwRBqokAyPux93JNhylzO6Vz8Jid7Zp991v6dmXPWWWuvU1Is43gIk7gXd2IzhuL+FVzGT5jHWXyIhYJ15GICL+BnVNrczuNItNUVStiPT2uEXcC7eAqzwr80gnVxG4l9s3gaJ+Ix1TbO4LE4R0eYxhdVAi7hRexs014Ju/BStJXZ/QxTecXeivU4jhtxwl9wABsKnGMDDuLXOMcNHMNggXOAMXwbJ7mGQ4o9kVqGcDjOVcE32FqU8d3SpbCA+4oy3ARTWIxz/yFcmrnYK7jaCk5hOK/BNhjGXNSwgj3tGtopncxbGChAXLvchlejlr/wYKsGxqTL7HUddKG3oIQ3BE2/Y7TZA9dLDuCU8Ov0CgPS5feVJr3fcckBdOOeacQmnBM0Hmk0eFrw/dd01pu1yjSux21ytUElKQI41BlduTgqhUp12S9FAGv50CyKjfhN0Dxbb0AWaB7ooKi8PCtoPl27Y4cUaPbDv5MxJORXFWyHctzxZGzfER5c/cKKkILAE9U7suRsptOKCuABQftS1jEeOy7qjYigVUpSkjhWxsNxxwexs9+o4OP4+ZGylMd/3h09hZBpnyhjW/zyfZfEFMF8bMfLuDt+OdclMUWwGNvRshSA/tklMUWQaR+Gf4Qba12TB9cuXa3l9kmTmgbj+L/LjUbWoZOesK25ssx0c7FaOsodYiZbxpXY2c8nNBLbK2UpZChs3asL3BPbH8vS82fbKoP7gfHYzpeFkgZhQbFfybSf5f8RnC4L5/DfbXM+duReau0Cu1WlD9lz6GRsH++CoLxkyemJ6s4J/ZmCb1STgldzJu442GFReXjOKoskhDJgRSg2DdUb0GMMS5nq3noDSkIZsCIUm3qdY5oIYKekpeA1rW/mZEZaCt7RaHB25ot6c7H+dvyghStpEF/HA+Z0t9BVywDeF7R9qfkczlahplkRiky9EEGU8KagaVlaOmiaGVyNBt7W/ZLka1JJsu24c49UZ50Tik2dZpN0mV3Fo3kN7hJqmhVhZej+vAZbYEZyAMvaf1vlJkaFmmZFcJVHhbBjrRgWvO11yQG0fM80YlCoaWaTXMAzio0qhoSaz0XpxzusBW/WDpNS3FcRgsOXhSpAO96wJNzkr0iBZhYBNHxoFsmsEBRWr6Mt4z2hCrhPSB63SK+XbYl9+4Qg+KSUnGXbaavEZp1iu1BkXtL+guISnlcnBWiVoh+YY0J5JntF8y43v6J5SXhFcwHf4SMFrqv/C4ZQOrt916KCAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/Delete.7e3d8540.png\";","module.exports = __webpack_public_path__ + \"static/media/down.1d60258c.png\";","module.exports = __webpack_public_path__ + \"static/media/ExportWarband.1a854609.png\";","module.exports = __webpack_public_path__ + \"static/media/Gear.45d7ec07.png\";","module.exports = __webpack_public_path__ + \"static/media/ImportWarband.3f43d3d9.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQNSURBVGiB3drfb1RFFAfwz64NJaEUC76rpVoeCFSwID6pERrEP0H9FxSi/g8CAok/En/E6IsiT6Tx2R9Y4m8Nb9JiRIwKRTSEmiCQrA8z11lLS3fvzu22fpOb2Z2Ze86Z3blnzjnfW5MXw3gII7gXd2It+uL4DP7ATziNU/gIk5nt6Aib8CJ+RqPkdQ4Ho6yuoIY9ODnLsPN4D09jTPiXBrAiXgOxbwzP4Gi8p1nGBB6LOhYFW/FFkwGX8BK2lZRXw3a8HGUVcj/Dlk6NvRVW4ghuRIW/YC9WZdSxCvvwa9RxA4fRm1EHGMK3Uck17Jd3IbPRhwNRVwPfYH0u4TukrTCJ+3IJbgFbMBV1/y5szY6wS3C1DRxHf6cCS6Af49GGGewsK2ibtJi30ZPBuLK4Da9FW/7Cg+0KGJK22RsW0YXeAjW8Kdh0EYOt3rhScgDHhV9nqaBH2n5fadH7HZEcQDeemYWwBmcEGw8uNHmr4PuvWVxv1i624nq8RuabVJMigP2ZDTiJTzPLPCSFSnNijxQB5D40i3AmJ1bjtyh3bK4JRaC5N7NiqlkQPBflnpg9sFkKNKsIaapaUJ+QXzWwEepx4KnYviscXMsFM0IKAk82DxTJ2WhFiqv6h+CBKPts0TEcOy6oLiKockE1KUkcquPhOPBhhUqrRAOfxM+P1KU8/vPu2JMFhe2b6tgQv3zfJWNy4HRsh+u4O3450yVjcmAqtoN1KQD9s0vG5EBhez/8LTxYK1q8+XFcVb4G1+p1VQjHWkFvcU99oZlzYDE9YSldRWa6Nq8t/0GV5xDcEeVfrONy7KxyQVVjILaX61LIkK3u1QXcE9sf69L5s2GeycsBw7E9XRcoDUJBcbmisP0U/4/gdDrK//exORc7Oi61zoMqF7RDU/pQnEPHYvtERUqrRJGcHm3u3GR5puCrzUrBmzERB/ZVoLiqBT1vniIJgQZsCGRT31wTOkAVC+qXMtVdc02oCTRgQyCbcqKKBR2OMm9ZwNwilYJz8psT5tkWJTEqlYI3LzS5WPmUpVmsvx0/aGMn9eLreMO47hJds9GDDwTbvtR6Dme9wGk2BJJpqRBebwk2TUulg5YxiitRwDu6T0m+LlGSpePOnRLPOi6QTYuNNdI2u4JHOxW4XeA0G0Jl6P5OBbaBUckBTCv/tspNGBQ4zYbgKg8JYUdV6Be87XXJAbT9zCyEXoHTLJScx7PyRhV9AudzQfrxDmjDm5XBiBT3NYTg8BWBBSjjDWvCQ/6qFGgWEcCCh2ZOjAmnf3MtbRrvCyzgbiF5XCe9XrYu9u0WguBjUnJWXCfME5stFjYKJPNZ5YuKZ/GCOVKAdpH7wBwS6JniFc273PyK5iXhFc1JfIePZayr/wNLzlSyF63w6QAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/Keys.cfe7ed31.png\";","module.exports = __webpack_public_path__ + \"static/media/Leader.36f11d7d.png\";","module.exports = __webpack_public_path__ + \"static/media/LegendaryIcon.208b6084.png\";","module.exports = __webpack_public_path__ + \"static/media/OpenEditor.c670e89f.png\";","module.exports = __webpack_public_path__ + \"static/media/OpenEditorSelected.b5346434.png\";","module.exports = __webpack_public_path__ + \"static/media/RefreshWarband.cbab8446.png\";","module.exports = __webpack_public_path__ + \"static/media/RefreshWarbandDisabled.704b0cf5.png\";","module.exports = __webpack_public_path__ + \"static/media/Rules.c31d8284.png\";","module.exports = __webpack_public_path__ + \"static/media/SavePdf.e43a561f.png\";","module.exports = __webpack_public_path__ + \"static/media/SpaceMarines.f1527fb0.png\";","module.exports = __webpack_public_path__ + \"static/media/Special.a8ca785b.png\";","module.exports = __webpack_public_path__ + \"static/media/Stats.f039417d.png\";","module.exports = __webpack_public_path__ + \"static/media/TauEmpire.d19e7417.png\";","module.exports = __webpack_public_path__ + \"static/media/up.08d28a96.png\";","module.exports = __webpack_public_path__ + \"static/media/UseSample.4145c5e6.png\";","export enum FactionEnum {\r\n    PrimarisSpaceMarines = \"Primaris Space Marines\",\r\n    DarkAngels = \"Dark Angels\",\r\n    Tau = \"Tau Empire\",\r\n    AdeptusMechanicus = \"Adeptus Mechanicus\",\r\n    AdeptaSororitas = \"Adepta Sororitas\",\r\n    Deathwatch = \"Deathwatch\",\r\n    // AstraMilitarum = \"Astra Militarum\",\r\n}\r\n\r\nexport enum ModelType {\r\n    Core = \"Core\",\r\n    Special = \"Special\",\r\n    Leader = \"Leader\",\r\n}\r\n\r\nexport type RosterWeapon = RenderWeapon;\r\nexport type MetadataWeapon = SuperBasicWeapon | MultiProfileWeapon;\r\nexport type RenderWeapon = BasicWeapon | MultiProfileRenderWeapon;\r\n\r\nexport interface Warband {\r\n    Title: string;\r\n    Faction: string;\r\n    ScenariosPlayed?: number;\r\n    Philosophy?: string;\r\n    Alignment?: string;\r\n    Roster: Array<RosterModel | string>;\r\n}\r\n\r\nexport interface RenderWarband {\r\n    Title: string;\r\n    Faction: string;\r\n    ScenariosPlayed?: number;\r\n    Philosophy?: string;\r\n    Alignment?: string;\r\n    Roster: RenderModel[];\r\n    RosterPrice: number;\r\n    Stratagems: TacticalPoints[];\r\n}\r\n\r\nexport interface ModelStats {\r\n    Movement: number;\r\n    WeaponSkill: string;\r\n    BallisticSkill: string;\r\n    Strength: number;\r\n    Attacks: number;\r\n    Toughness: number;\r\n    Wounds: string | number;\r\n    Leadership: number;\r\n    Save: string;\r\n    InvulnerableSave: string;\r\n}\r\n\r\nexport interface MultiProfileModelStats {\r\n    firstProfile: ModelStats;\r\n    secondProfile: ModelStats;\r\n}\r\n\r\nexport interface WeaponReference {\r\n    name: string;\r\n    amount: number;\r\n}\r\nexport interface RosterWeaponReference extends WeaponReference {\r\n    replacing: string | string[];\r\n}\r\n// Rule interface\r\nexport interface Rule {\r\n    name: string;\r\n    effect: string;\r\n    price?: number;\r\n    alignmentParameter?: boolean;\r\n}\r\n\r\nexport interface Denizens {\r\n    NightMarket: Enemy[];\r\n}\r\nexport interface Enemy {\r\n    name: string;\r\n    amount?: number;\r\n    kind?: string;\r\n    price?: number;\r\n    type: string;\r\n    stats: ModelStats;\r\n    rules?: Rule[];\r\n    keywords: string[];\r\n    equipment: any;\r\n}\r\n\r\nexport interface OtherEquipment {\r\n    name: string;\r\n    effect: string;\r\n    price?: number;\r\n    isArmouryItem?: boolean;\r\n}\r\n\r\nexport interface Dictionary<T> {\r\n    [Key: string]: T;\r\n}\r\n\r\nexport interface ModelAllowance {\r\n    Core: number;\r\n    Special: number;\r\n    Leader: number;\r\n}\r\nexport interface TacticalPoints {\r\n    name: string;\r\n    amount: number;\r\n    text: string;\r\n}\r\nexport interface Philosophy {\r\n    name: string;\r\n    tp: number;\r\n    text: string;\r\n}\r\n\r\nexport interface PageMap {\r\n    id: string;\r\n    page: number;\r\n}\r\n\r\nexport interface UnifiedModel {\r\n    name: string;\r\n    type?: string;\r\n}\r\n\r\nexport interface RosterModel extends UnifiedModel {\r\n    stats?: Partial<ModelStats> | RecursivePartial<MultiProfileModelStats>;\r\n    amount?: number;\r\n    equipment?: RosterEquipment;\r\n    rules?: string[];\r\n    keywords?: Array<string | ReplacableString>;\r\n}\r\nexport interface RosterEquipment {\r\n    weapons?: Array<RosterWeaponReference | RenderWeapon | string>;\r\n    otherEquipment?: Array<OtherEquipment | string>;\r\n}\r\nexport interface MetadataModel extends UnifiedModel {\r\n    price: number;\r\n    type: string;\r\n    stats: ModelStats | MultiProfileModelStats;\r\n    keywords: string[];\r\n    rules?: string[];\r\n    equipment?: MetadataModelEquipment;\r\n}\r\nexport interface MetadataModelEquipment {\r\n    weapons?: Array<string | WeaponReference>;\r\n    otherEquipment?: string[];\r\n}\r\n\r\nexport interface RenderModel extends UnifiedModel {\r\n    type: string;\r\n    price: number;\r\n    amount?: number;\r\n    stats: ModelStats | MultiProfileModelStats;\r\n    rules: Rule[];\r\n    keywords: string[];\r\n    equipment?: RenderEquipment;\r\n}\r\n\r\nexport interface RenderEquipment {\r\n    weapons?: RenderWeapon[];\r\n    otherEquipment?: OtherEquipment[];\r\n}\r\n\r\nexport interface MultiProfileRenderWeapon extends MultiProfileWeapon {\r\n    price: number;\r\n    amount: number;\r\n}\r\nexport interface MultiProfileWeapon {\r\n    name: string;\r\n    multiProfiles: Array<MultiProfileWeapon | SuperBasicWeapon>;\r\n    rule?: string | Array<string | Rule>;\r\n    isLegendary?: boolean;\r\n    isArmouryItem?: boolean;\r\n}\r\nexport interface BasicWeapon extends SuperBasicWeapon {\r\n    price: number;\r\n    amount: number;\r\n    isLegendary?: boolean;\r\n}\r\nexport interface LegendaryWeapon extends SuperBasicWeapon {\r\n    isLegendary: boolean;\r\n}\r\nexport interface SuperBasicWeapon {\r\n    name: string;\r\n    type: string;\r\n    strength: string | number;\r\n    damage: string | number;\r\n    ap: string | number;\r\n    range?: number;\r\n    rule?: string | Array<string | Rule>;\r\n    isArmouryItem?: boolean;\r\n    isLegendary?: boolean;\r\n}\r\n\r\nexport interface ArmySpecificStuff {\r\n    ArmyRules?: Rule[];\r\n    Alignments?: Rule[];\r\n    AlignmentPlaceholder?: string;\r\n    Keywords: string[];\r\n    ModelAllowance: {\r\n        Core: number;\r\n        Special: number;\r\n        Leader: number;\r\n    };\r\n    Philosophies: Philosophy[];\r\n    WeaponPriceList: Array<{\r\n        name: string;\r\n        price: number;\r\n    }>;\r\n    UnitList: MetadataModel[];\r\n}\r\n\r\nexport type ActionTypes =\r\n    | \"select-option\"\r\n    | \"deselect-option\"\r\n    | \"remove-value\"\r\n    | \"pop-value\"\r\n    | \"set-value\"\r\n    | \"clear\"\r\n    | \"create-option\";\r\n\r\nexport interface ActionMeta {\r\n    action: ActionTypes;\r\n}\r\n\r\nexport type RecursivePartial<T> = {\r\n    [P in keyof T]?: RecursivePartial<T[P]>;\r\n};\r\n\r\nexport interface ReplacableString {\r\n    name: string;\r\n    replacing: string;\r\n}\r\n","import { FactionEnum } from \"../types\";\r\nimport AdeptaSororitasPng from \"./AdeptaSororitas.png\";\r\nimport AdeptusMechanicusPng from \"./AdeptusMechanicus.png\";\r\nimport AstraMilitarumPng from \"./AstraMilitarum.png\";\r\nimport CorePng from \"./Core.png\";\r\nimport CreateWarbandPng from \"./CreateWarband.png\";\r\nimport DarkAngelsPng from \"./DarkAngels.png\";\r\nimport DeathwatchPng from \"./Deathwatch.png\";\r\nimport DecreasePng from \"./Decrease.png\";\r\nimport DeletePng from \"./Delete.png\";\r\nimport DownPng from \"./down.png\";\r\nimport ExportPng from \"./ExportWarband.png\";\r\nimport GearPng from \"./Gear.png\";\r\nimport ImportWarbandPng from \"./ImportWarband.png\";\r\nimport IncreasePng from \"./Increase.png\";\r\nimport KeywordsPng from \"./Keys.png\";\r\nimport LeaderPng from \"./Leader.png\";\r\nimport LegendaryPng from \"./LegendaryIcon.png\";\r\nimport OpenEditorPng from \"./OpenEditor.png\";\r\nimport OpenEditorSelectedPng from \"./OpenEditorSelected.png\";\r\nimport RefreshWarbandPng from \"./RefreshWarband.png\";\r\nimport RefreshWarbandDisabledPng from \"./RefreshWarbandDisabled.png\";\r\nimport RulesPng from \"./Rules.png\";\r\nimport SavePdfPng from \"./SavePdf.png\";\r\nimport PrimarisPng from \"./SpaceMarines.png\";\r\nimport SpecialPng from \"./Special.png\";\r\nimport StatsPng from \"./Stats.png\";\r\nimport TauEmpirePng from \"./TauEmpire.png\";\r\nimport UpPng from \"./up.png\";\r\nimport UseSamplePng from \"./UseSample.png\";\r\n\r\nexport const UseSampleIcon = UseSamplePng;\r\nexport const DarkAngelsCover = DarkAngelsPng;\r\nexport const TauEmpireCover = TauEmpirePng;\r\nexport const PrimarisCover = PrimarisPng;\r\nexport const AdeptusMechanicusCover = AdeptusMechanicusPng;\r\nexport const DeathwatchCover = DeathwatchPng;\r\nexport const AstraMilitarumCover = AstraMilitarumPng;\r\nexport const AdeptaSororitasCover = AdeptaSororitasPng;\r\n\r\nexport const CreateWarbandIcon = CreateWarbandPng;\r\nexport const ImportWarbandIcon = ImportWarbandPng;\r\nexport const ExportWarbandIcon = ExportPng;\r\nexport const OpenEditorIcon = OpenEditorPng;\r\nexport const OpenEditorSelectedIcon = OpenEditorSelectedPng;\r\nexport const SavePdfIcon = SavePdfPng;\r\nexport const RefreshWarbandIcon = RefreshWarbandPng;\r\nexport const RefreshWarbandDisabledIcon = RefreshWarbandDisabledPng;\r\n\r\nexport const LegendaryIcon = LegendaryPng;\r\n\r\nexport const getFactionImage = (faction: FactionEnum | string) => {\r\n    switch (faction) {\r\n        case FactionEnum.AdeptaSororitas: return AdeptaSororitasCover;\r\n        case FactionEnum.AdeptusMechanicus: return AdeptusMechanicusCover;\r\n        case FactionEnum.DarkAngels: return DarkAngelsCover;\r\n        case FactionEnum.Deathwatch: return DeathwatchCover;\r\n        case FactionEnum.PrimarisSpaceMarines: return PrimarisCover;\r\n        case FactionEnum.Tau: return TauEmpireCover;\r\n    }\r\n};\r\n\r\nexport const IncreaseIcon = IncreasePng;\r\nexport const DecreaseIcon = DecreasePng;\r\nexport const DeleteIcon = DeletePng;\r\nexport const StatsIcon = StatsPng;\r\nexport const RulesIcon = RulesPng;\r\nexport const KeywordsIcon = KeywordsPng;\r\nexport const GearIcon = GearPng;\r\nexport const UpIcon = UpPng;\r\nexport const DownIcon = DownPng;\r\n\r\nexport const LeaderIcon = LeaderPng;\r\nexport const CoreIcon = CorePng;\r\nexport const SpecialIcon = SpecialPng;\r\n","import React from \"react\";\r\nimport { store } from \"..\";\r\nimport { SET_WARBAND } from \"../data/redux/actions\";\r\nimport { ImportWarbandIcon } from \"../images\";\r\n\r\nexport const FileUploader = () => {\r\n    const onChange = () => {\r\n        const reader = new FileReader();\r\n        reader.onload = (ev: ProgressEvent<FileReader>) => store.dispatch({ type: SET_WARBAND, payload: JSON.parse(ev.target?.result as string) });\r\n        reader.readAsText((document.querySelector(\"#file-uploader\") as HTMLInputElement)?.files?.item(0) as File);\r\n    };\r\n    return <label htmlFor=\"file-uploader\" style={{ fontSize: \"26px\", fontWeight: \"bold\" }} >\r\n        <input id=\"file-uploader\" type=\"file\" accept=\".json\" style={{ display: \"none\" }} onChange={onChange}></input>\r\n        <img style={{ width: \"50px\", height: \"50px\", left: \"225px\" }} alt=\"OpenWarband\" className=\"toolbar-icon\" src={ImportWarbandIcon} title=\"Open another warband from file\" />\r\n    </label>;\r\n};\r\n","import { ModelStats, MultiProfileModelStats, RecursivePartial, RenderModel, ReplacableString, Warband } from \"../../types\";\r\n\r\nexport const SET_FACTION = \"SET_FACTION\";\r\nexport const SET_WARBAND = \"SET_WARBAND\";\r\nexport const DECREASE_MODEL_AMOUNT = \"DECREASE_MODEL_AMOUNT\";\r\nexport const INCREASE_MODEL_AMOUNT = \"INCREASE_MODEL_AMOUNT\";\r\nexport const REMOVE_UNIT_FROM_ROSTER = \"REMOVE_UNIT_FROM_ROSTER\";\r\nexport const ADD_MODEL_TO_ROSTER = \"ADD_MODEL_TO_ROSTER\";\r\nexport const UPDATE_MODEL_STATS = \"UPDATE_MODEL_STATS\";\r\nexport const UPDATE_MODEL_KEYWORDS = \"UPDATE_MODEL_KEYWORDS\";\r\nexport const MOVE_UP = \"MOVE_UP\";\r\nexport const MOVE_DOWN = \"MOVE_DOWN\";\r\n\r\ninterface SetFaction {\r\n    type: typeof SET_FACTION;\r\n    payload: string;\r\n}\r\n\r\ninterface SetWarband {\r\n    type: typeof SET_WARBAND;\r\n    payload: Warband;\r\n}\r\n\r\ninterface DecreaseModelAmount {\r\n    type: typeof DECREASE_MODEL_AMOUNT;\r\n    payload: RenderModel;\r\n}\r\n\r\ninterface IncreaseModelAmount {\r\n    type: typeof INCREASE_MODEL_AMOUNT;\r\n    payload: RenderModel;\r\n}\r\n\r\ninterface RemoveUnitFromRoster {\r\n    type: typeof REMOVE_UNIT_FROM_ROSTER;\r\n    payload: RenderModel;\r\n}\r\n\r\ninterface MoveUp {\r\n    type: typeof MOVE_UP;\r\n    payload: RenderModel;\r\n}\r\n\r\ninterface MoveDown {\r\n    type: typeof MOVE_DOWN;\r\n    payload: RenderModel;\r\n}\r\n\r\ninterface AddModelToRoster {\r\n    type: typeof ADD_MODEL_TO_ROSTER;\r\n    payload: string;\r\n}\r\n\r\ninterface UpdateUnitStats {\r\n    type: typeof UPDATE_MODEL_STATS;\r\n    payload: {\r\n        model: RenderModel;\r\n        stats: Partial<ModelStats> | RecursivePartial<MultiProfileModelStats>;\r\n    };\r\n}\r\ninterface UpdateModelKeywords {\r\n    type: typeof UPDATE_MODEL_KEYWORDS;\r\n    payload: {\r\n        model: RenderModel;\r\n        keyword: Array<string | ReplacableString>;\r\n    };\r\n}\r\n\r\nexport type Actions = AddModelToRoster | SetFaction | SetWarband | DecreaseModelAmount | IncreaseModelAmount | RemoveUnitFromRoster | UpdateUnitStats | UpdateModelKeywords | MoveUp | MoveDown;\r\n","import html2canvas from \"html2canvas\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport React from \"react\";\r\nimport { store } from \"..\";\r\nimport { SavePdfIcon } from \"../images\";\r\nexport const PdfGenerator = () => {\r\n\r\n    const exportPdf = async () => {\r\n        const jsPdf = new jsPDF(\"p\", \"mm\", \"a4\", true);\r\n        let canvas: HTMLCanvasElement;\r\n        const container = Array.from(document.querySelectorAll(\".pdf-container\"));\r\n        for (let i = 0; i < container.length; i++) {\r\n            if (i > 0) {\r\n                jsPdf.addPage();\r\n            }\r\n            // tslint:disable-next-line: await-promise\r\n            canvas = await html2canvas(container[i] as unknown as HTMLElement, { scale: 4, letterRendering: true });\r\n            jsPdf.addImage(canvas.toDataURL(\"image/png\"), \"JPEG\", 0, 0, jsPdf.internal.pageSize.getWidth(), jsPdf.internal.pageSize.getHeight());\r\n\r\n        }\r\n        jsPdf.save(`${store.getState().Title}.pdf`);\r\n    };\r\n\r\n    return <div id=\"pdf-generator\" className=\"pdf-generator\">\r\n        <img\r\n            src={SavePdfIcon}\r\n            style={{ left: \"150px\" }}\r\n            className=\"toolbar-icon\"\r\n            id={\"pdf-generator-icon\"}\r\n            title={\"Generate a PDF file from this list\"}\r\n            alt={\"GeneratePdfIcon\"}\r\n            onClick={exportPdf}>\r\n        </img>\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nexport class ErrorMessages {\r\n\r\n    public static getInstance(): ErrorMessages {\r\n        return ErrorMessages.instance;\r\n    }\r\n    private static readonly instance: ErrorMessages = new ErrorMessages();\r\n    private errors: string[] = [];\r\n    protected constructor() { }\r\n\r\n    public addErrorMessage(error: string) {\r\n        this.errors = [...this.errors, error].filter((currentError, idx, arr) => arr.indexOf(currentError) === idx);\r\n    }\r\n    public getErrors() {\r\n        return this.errors;\r\n    }\r\n}\r\n\r\nexport const ErrorMessageRenderer = () => {\r\n    const errors = ErrorMessages.getInstance().getErrors();\r\n    const cssClass = errors.length > 0 ? \"error-container\" : \"\";\r\n    return <div id=\"errors-container\" className={cssClass}>\r\n        {errors.map((error) => <div>{error}</div>)}\r\n    </div>;\r\n};\r\n","import * as AdeptaSororitasArmySpecific from \"../data/armySpecifics/AdeptaSororitas.json\";\r\nimport * as AdeptusMechanicusArmySpecific from \"../data/armySpecifics/AdeptusMechanicus.json\";\r\nimport * as DarkAngelsArmySpecific from \"../data/armySpecifics/DarkAngels.json\";\r\nimport * as PrimarisArmySpecifics from \"../data/armySpecifics/PrimarisSpaceMarines.json\";\r\nimport * as TauArmySpecifics from \"../data/armySpecifics/Tau.json\";\r\nimport * as EquipmentJson from \"../data/Equipment.json\";\r\nimport * as RulesJson from \"../data/Rules.json\";\r\n// tslint:disable-next-line: max-line-length\r\nimport { ArmySpecificStuff, BasicWeapon, FactionEnum, LegendaryWeapon, MetadataModel, MetadataWeapon, ModelType, MultiProfileModelStats, MultiProfileRenderWeapon, MultiProfileWeapon, OtherEquipment, Philosophy, RecursivePartial, RenderModel, RenderWeapon, ReplacableString, RosterModel, Rule, SuperBasicWeapon, Warband, WeaponReference } from \"../types\";\r\nimport { ErrorMessages } from \"./ErrorMessages\";\r\nconst weapons = EquipmentJson.weapons as MetadataWeapon[];\r\nconst otherEquipment = EquipmentJson.otherEquipment as OtherEquipment[];\r\nconst rules = RulesJson.rules as Rule[];\r\nconst philosophies = RulesJson.Philosophies as Philosophy[];\r\n\r\nexport const ensureWeaponExists = (input: MetadataWeapon | MultiProfileWeapon | undefined, name: string) => {\r\n    if (input === undefined) {\r\n        throw new TypeError(`${name} needs to be added to metadata`);\r\n    }\r\n    return input;\r\n};\r\nexport const isMultiProfileStatLine = (statLine: any): statLine is MultiProfileModelStats => statLine.firstProfile !== undefined && statLine.secondProfile !== undefined;\r\nexport const isPartialMultiProfileStatLine = (statLine: any): statLine is RecursivePartial<MultiProfileModelStats> => statLine.firstProfile !== undefined || statLine.secondProfile !== undefined;\r\nexport const getDetailedRoster = (roster: Array<RosterModel | string>, faction: string, alignment?: string): Array<RenderModel | undefined> => roster.map((rosterModel) => getDetailedModel(rosterModel, faction, alignment));\r\nexport const getDetailedModel = (rosterModel: string | RosterModel, factionString: string, alignment?: string): RenderModel | undefined => {\r\n    const faction = factionString as FactionEnum;\r\n    const modelMetadata = typeof (rosterModel) === \"string\" ? getModelMetadata(rosterModel, faction) : getModelMetadata(rosterModel.name, faction);\r\n    const harmonizedRosterModel: RosterModel = typeof (rosterModel) === \"string\" ? { \"name\": rosterModel } : rosterModel;\r\n    const alignmentPlaceholder = getFactionSpecifics(faction).AlignmentPlaceholder;\r\n    if (!modelMetadata) {\r\n        ErrorMessages.getInstance().addErrorMessage(`Model with name '${typeof (rosterModel) === \"string\" ? rosterModel : rosterModel.name}' does not exist in Metadata`);\r\n        return undefined;\r\n    }\r\n    let remixedModel = remixModel(modelMetadata, harmonizedRosterModel);\r\n    const ruleStrings = harmonizedRosterModel.rules ? [...modelMetadata.rules || [], ...harmonizedRosterModel.rules].filter((keyword, idx, array) => array.indexOf(keyword) === idx) : modelMetadata.rules || [];\r\n    remixedModel = {\r\n        ...remixedModel,\r\n        keywords: remixedModel.keywords.map((keyword) => keyword === alignmentPlaceholder ? alignment || keyword : keyword),\r\n        rules: ruleStrings.map((ruleName) => getRule(ruleName, faction, alignment)).filter((rule) => rule !== undefined) as Rule[],\r\n    };\r\n    const equipment = modelMetadata.equipment;\r\n    remixedModel = {\r\n        ...remixedModel,\r\n        equipment: equipment ? {\r\n            weapons: equipment.weapons?.map((weapon) => getWeaponProfile(weapon, faction)).filter((weapon) => weapon !== undefined) as RenderWeapon[],\r\n            otherEquipment: equipment.otherEquipment?.map(getOtherEquipmentDetails),\r\n        } : undefined,\r\n    };\r\n    let rosterWeapons: RenderWeapon[] = [];\r\n    let otherRosterEquipment: OtherEquipment[] | undefined;\r\n    let replacedWeapons: string[] = [];\r\n    if (harmonizedRosterModel.equipment || remixedModel.equipment?.weapons) {\r\n        if (harmonizedRosterModel.equipment) {\r\n            rosterWeapons = harmonizedRosterModel.equipment.weapons?.map((weapon) => {\r\n                if (typeof (weapon) === \"string\") {\r\n                    return getWeaponProfile(weapon, faction);\r\n                }\r\n                if (!(isBasicWeapon(weapon) || isMultiProfileRenderWeapon(weapon)) && weapon.replacing) {\r\n                    const replacing = weapon.replacing;\r\n                    // tslint:disable-next-line: prefer-conditional-expression\r\n                    if (typeof (replacing) === \"string\") {\r\n                        replacedWeapons = [...replacedWeapons, replacing];\r\n                    } else {\r\n                        replacedWeapons = [...replacedWeapons, ...replacing];\r\n                    }\r\n                }\r\n                if (isRenderWeapon(weapon)) {\r\n                    return weapon;\r\n                }\r\n                return getWeaponProfile(weapon, faction);\r\n            }).filter((weapon) => weapon !== undefined) as RenderWeapon[] || [];\r\n            otherRosterEquipment = harmonizedRosterModel.equipment.otherEquipment?.map((equi) => {\r\n                if (typeof (equi) === \"string\") {\r\n                    return getOtherEquipmentDetails(equi);\r\n                }\r\n                return getOtherEquipmentDetails(equi.name);\r\n            });\r\n        }\r\n        remixedModel = {\r\n            ...remixedModel, equipment: {\r\n                weapons: [...remixedModel.equipment?.weapons?.filter((weapon) => replacedWeapons.find((replacedWeapon) => replacedWeapon === weapon.name) === undefined) || [], ...rosterWeapons],\r\n            },\r\n        };\r\n    }\r\n    if (remixedModel.equipment?.otherEquipment || otherRosterEquipment) {\r\n        let otherRemixedEquipment = otherRosterEquipment ? [...remixedModel.equipment?.otherEquipment || [], ...otherRosterEquipment] : remixedModel.equipment?.otherEquipment;\r\n        if (otherRemixedEquipment && alignment) {\r\n            otherRemixedEquipment = otherRemixedEquipment.map((equi) => ({ ...equi, effect: equi.effect.replace(alignmentPlaceholder || \"\", alignment) }));\r\n        }\r\n        remixedModel = {\r\n            ...remixedModel, equipment: {\r\n                weapons: remixedModel.equipment?.weapons,\r\n                otherEquipment: otherRemixedEquipment,\r\n            },\r\n        };\r\n    }\r\n    remixedModel = {\r\n        ...remixedModel,\r\n        price: getTotalUnitPrice(remixedModel, faction),\r\n    };\r\n    return remixedModel;\r\n};\r\nconst getModelMetadata = (name: string, faction: FactionEnum) => getFactionSpecifics(faction).UnitList.find((unit) => unit.name.toLocaleUpperCase() === name.toLocaleUpperCase());\r\nconst remixModel = (metaDataModel: MetadataModel, rosterModel: RosterModel): RenderModel => {\r\n    const replacedKeywords = (rosterModel.keywords?.filter((key) => typeof (key) !== \"string\") as ReplacableString[])?.map((key) => key.replacing);\r\n    const resultModel: RenderModel = {\r\n        name: rosterModel.name,\r\n        type: rosterModel.type || metaDataModel.type,\r\n        amount: rosterModel.amount,\r\n        price: metaDataModel.price,\r\n        keywords: rosterModel.keywords ? [...metaDataModel.keywords, ...rosterModel.keywords.map((key) => typeof (key) !== \"string\" ? key.name : key)].filter((keyword) => !replacedKeywords.includes(keyword)) : metaDataModel.keywords,\r\n        rules: [],\r\n        stats: isMultiProfileStatLine(metaDataModel.stats) ?\r\n            (rosterModel.stats && isPartialMultiProfileStatLine(rosterModel.stats) ?\r\n                { ...metaDataModel.stats, firstProfile: { ...metaDataModel.stats.firstProfile, ...rosterModel.stats.firstProfile }, secondProfile: { ...metaDataModel.stats.secondProfile, ...rosterModel.stats.secondProfile } } :\r\n                metaDataModel.stats) :\r\n            rosterModel.stats ?\r\n                { ...metaDataModel.stats, ...rosterModel.stats } :\r\n                metaDataModel.stats,\r\n    };\r\n    return resultModel;\r\n};\r\n\r\nconst isWeaponReference = (weaponRef: any): weaponRef is WeaponReference => weaponRef.name && typeof (weaponRef.name) === \"string\" ? weaponRef.amount ? typeof (weaponRef.amount) === \"number\" ? true : false : true : false;\r\nconst isRenderWeapon = (weaponRef: any): weaponRef is RenderWeapon => weaponRef.name && typeof (weaponRef.name) === \"string\" && (weaponRef.type !== undefined || weaponRef.multiProfiles !== undefined);\r\n\r\nexport const isMultiProfileWeapon = (weapon: any): weapon is MultiProfileWeapon => weapon && weapon.name && typeof (weapon.name) === \"string\" && weapon.multiProfiles && typeof (weapon.multiProfiles) === \"object\";\r\nexport const isSuperBasicWeapon = (weapon: any): weapon is SuperBasicWeapon =>\r\n    weapon && weapon.name && typeof (weapon.name) === \"string\" &&\r\n    weapon.type && typeof (weapon.type) === \"string\" &&\r\n    weapon.strength && (typeof (weapon.strength) === \"string\" || typeof (weapon.strength) === \"number\") &&\r\n    weapon.damage && (typeof (weapon.damage) === \"string\" || typeof (weapon.damage) === \"number\") &&\r\n    (typeof (weapon.ap) === \"string\" || typeof (weapon.ap) === \"number\");\r\nexport const isBasicWeapon = (weapon: any): weapon is BasicWeapon => typeof (weapon.price) === \"number\" && typeof (weapon.amount) === \"number\" && isSuperBasicWeapon(weapon);\r\nexport const isLegendaryWeapon = (weapon: any): weapon is LegendaryWeapon => typeof (weapon.isLegendary) === \"boolean\" && isSuperBasicWeapon(weapon);\r\nexport const isMultiProfileRenderWeapon = (weapon: any): weapon is MultiProfileRenderWeapon => typeof (weapon.price) === \"number\" && typeof (weapon.amount) === \"number\" && isMultiProfileWeapon(weapon);\r\n\r\nconst getWeaponProfile = (weaponRef: string | WeaponReference, faction: FactionEnum): RenderWeapon | undefined => {\r\n    if (typeof weaponRef === \"string\") {\r\n        const weaponDetails = getWeaponDetails(weaponRef);\r\n        if (!weaponDetails) {\r\n            ErrorMessages.getInstance().addErrorMessage(`Weapon with name '${weaponRef}' does not exist in Metadata. Specify the full weapon profile instead.`);\r\n            return undefined;\r\n        }\r\n        return { ...weaponDetails, price: getWeaponPrice(weaponDetails.name, faction, 1), amount: 1 };\r\n    }\r\n    if (isWeaponReference(weaponRef)) {\r\n        const weaponDetails = getWeaponDetails(weaponRef.name);\r\n        if (!weaponDetails) {\r\n            ErrorMessages.getInstance().addErrorMessage(`Weapon with name '${weaponRef.name}' does not exist in Metadata. Specify the full weapon profile instead.`);\r\n            return undefined;\r\n        }\r\n        return { ...weaponDetails, price: getWeaponPrice(weaponDetails.name, faction, weaponRef.amount || 1), amount: weaponRef.amount || 1 };\r\n    }\r\n    return undefined;\r\n};\r\n\r\nexport const getFactionSpecifics = (faction: string): ArmySpecificStuff => {\r\n    switch (faction as FactionEnum) {\r\n        case FactionEnum.AdeptaSororitas: return AdeptaSororitasArmySpecific.AdeptaSororitas;\r\n        case FactionEnum.AdeptusMechanicus: return AdeptusMechanicusArmySpecific.AdeptusMechanicus;\r\n        case FactionEnum.DarkAngels: return DarkAngelsArmySpecific.DarkAngels;\r\n        case FactionEnum.PrimarisSpaceMarines: return PrimarisArmySpecifics.PrimarisSpaceMarines;\r\n        case FactionEnum.Tau: return TauArmySpecifics.Tau;\r\n        // case FactionEnum.Deathwatch: return ArmySpecifics.Deathwatch;\r\n        default: return { \"Keywords\": [], \"Philosophies\": [], \"AlignmentPlaceholder\": \"\", \"ModelAllowance\": { \"Core\": 0, \"Special\": 0, \"Leader\": 0 }, \"WeaponPriceList\": [], \"UnitList\": [] };\r\n    }\r\n};\r\n\r\nexport const getWeaponDetails = (name: string) => weapons.find((weapon) => weapon.name.toLocaleUpperCase() === name.toLocaleUpperCase());\r\nexport const getWeaponPrice = (weaponName: string, faction: FactionEnum, amount: number) => (getFactionSpecifics(faction).WeaponPriceList.find((weapon) => weapon.name.toLocaleUpperCase() === weaponName.toLocaleUpperCase())?.price || 0) * amount;\r\n\r\nexport const getOtherEquipmentDetails = (name: string) => otherEquipment.find((equi) => equi.name.toLocaleUpperCase() === name.toLocaleUpperCase()) as OtherEquipment;\r\n\r\nexport const getTotalUnitPrice = (model: RenderModel, faction: FactionEnum) => {\r\n    let totalPrice = model.price || getFactionSpecifics(faction).UnitList.find((unit) => unit.name.toLocaleUpperCase() === model.name.toLocaleUpperCase())?.price || 0;\r\n    totalPrice += model.equipment?.weapons?.reduce((a, weapon) => a + (weapon.price || (weapon.isLegendary ? 20 : 0)), 0) || 0;\r\n    totalPrice += model.equipment?.otherEquipment?.reduce((a, equipment) => a + (equipment.price || 0), 0) || 0;\r\n    totalPrice += model.rules.reduce((a, rule) => a + (rule.price || 0), 0) || 0;\r\n    return totalPrice * (model.amount || 1);\r\n};\r\n\r\nexport const getRosterPrice = (models: RenderModel[]) => models.reduce((totalCost, model) => totalCost + model.price, 0);\r\nexport const getArmyRules = (faction: FactionEnum, alignment?: string) => {\r\n    const factionSpecifics = getFactionSpecifics(faction);\r\n    const factionRules = factionSpecifics.ArmyRules || [];\r\n    const alignmentRule = factionSpecifics.Alignments?.find((align) => align.name === alignment);\r\n    const armyRules = alignmentRule ? [...factionRules, alignmentRule] : factionRules;\r\n    return armyRules.map((rule) => (alignment ? { ...rule, effect: rule.effect.replace(getFactionSpecifics(faction).AlignmentPlaceholder || \"\", alignment) } : rule));\r\n};\r\nexport const getRule = (ruleName: string, faction: FactionEnum, alignment?: string): Rule | undefined => {\r\n    let actualRule = rules.find((rule) => rule.name.toLocaleUpperCase() === ruleName.toLocaleUpperCase());\r\n    if (!actualRule) {\r\n        ErrorMessages.getInstance().addErrorMessage(`Rule with name '${ruleName}' does not exist in Metadata`);\r\n        return undefined;\r\n    }\r\n    return actualRule.alignmentParameter && alignment ? actualRule = { ...actualRule, effect: actualRule.effect.replace(getFactionSpecifics(faction).AlignmentPlaceholder || \"\", alignment) } : actualRule;\r\n};\r\n\r\nexport const getAllKeywords = (models: RenderModel[]) => models.reduce((keywords: string[], model) => [...keywords, ...model.keywords], []).filter((item, idx, array) => array.indexOf(item) === idx).sort();\r\nexport const getPhilosophy = (name: string, faction: FactionEnum) => {\r\n    let phil = philosophies.find((philosophy) => philosophy.name.toLocaleUpperCase() === name?.toLocaleUpperCase());\r\n    if (!phil) {\r\n        phil = getFactionSpecifics(faction).Philosophies.find((philosophy) => philosophy.name.toLocaleUpperCase() === name?.toLocaleUpperCase());\r\n        if (!phil) {\r\n            ErrorMessages.getInstance().addErrorMessage(`Philosophy with name '${name}' does not exist in Metadata`);\r\n            return undefined;\r\n        }\r\n    }\r\n    return phil;\r\n};\r\n\r\nexport const isWarband = (json: any): json is Warband => {\r\n    const titleExistsAndIsString = json.Title && typeof json.Title === \"string\";\r\n    const factionExistsAndIsString = json.Faction && typeof json.Faction === \"string\";\r\n    const scenarioExistsAndIsNumber = !json.ScenariosPlayed || (json.ScenariosPlayed && typeof json.ScenariosPlayed === \"number\");\r\n    const philosophiesOk = !json.Philosophy || (json.Philosophy && typeof json.Philosophy === \"string\");\r\n    const alignmentsOk = !json.Alignment || (json.Alignment && typeof json.Alignment === \"string\");\r\n    return titleExistsAndIsString && factionExistsAndIsString && scenarioExistsAndIsNumber && philosophiesOk && alignmentsOk;\r\n\r\n    // Roster: Model[];\r\n};\r\n\r\nexport const getPossiblePhilosophies = (faction: FactionEnum | undefined): Philosophy[] => {\r\n    if (!faction) {\r\n        return [];\r\n    }\r\n    return [...philosophies, ...getFactionSpecifics(faction).Philosophies];\r\n};\r\n\r\nexport const countType = (members: RenderModel[], type: ModelType) => members.filter((member) => member.type === type).reduce((acc, member) => acc + (member.amount ? member.amount : 1), 0);\r\n\r\nexport const isSearchedModel = (rosterModel: string | RosterModel, renderModel: RenderModel, faction: string, alignment?: string) => {\r\n    const detailedModel = getDetailedModel(rosterModel, faction, alignment);\r\n    return detailedModel?.name === renderModel.name && detailedModel?.price === renderModel.price;\r\n};\r\n","import { ModelType, RenderModel, TacticalPoints } from \"../types\";\r\nimport { countType, getAllKeywords, getFactionSpecifics } from \"./Utils\";\r\n\r\nconst strInNumberText = \"Gain 1 TP for taking the maximum number of Core models according to your Model Allowance.\";\r\nconst creamOfCropText = \"Gain 1 TP for taking the maximum number of Special models according to your Model Allowance.\";\r\n\r\n// const hasOneOfEach = (members: Model[]) => members.some((member) => member.type === \"Special\") && members.some((member) => member.type === \"Core\");\r\nconst hasTrueHeros = (members: RenderModel[]) => members.filter((member) => member.price / (member.amount || 1) >= 100).length;\r\nexport const hasArmouryEquipment = (models: RenderModel[]) => models.filter((model) =>\r\n    model.equipment?.weapons?.some((weapon) => weapon.isArmouryItem) ||\r\n    model.equipment?.otherEquipment?.some((equi) => equi.isArmouryItem)\r\n);\r\nconst allUnitsSharedKeyword = (roster: RenderModel[], faction: string, alignment?: string) => {\r\n    const factionKeywords = [...getFactionSpecifics(faction).Keywords, alignment];\r\n    const membersWithoutFactionKeywords = roster.map((model) => ({ ...model, keywords: (model.keywords.filter((keyword) => !factionKeywords.some((factionKeyword) => factionKeyword === keyword))) }));\r\n    const firstMember = membersWithoutFactionKeywords.shift() as RenderModel;\r\n    if (firstMember) {\r\n        return firstMember.keywords.reduce((commonKeywords, keyword) => {\r\n            if (membersWithoutFactionKeywords.every((inner) => inner.keywords.some((innerKeyword) => innerKeyword === keyword))) {\r\n                return [...commonKeywords, keyword];\r\n            }\r\n            return commonKeywords;\r\n        }, [] as string[]).length > 0;\r\n    }\r\n    return [];\r\n};\r\n\r\nexport const getStratagems = (faction: string, roster: RenderModel[], alignment?: string, scenariosPlayed?: number): TacticalPoints[] => {\r\n    let myArr: TacticalPoints[] = [{ name: \"Destined For Greatness\", amount: scenariosPlayed ? scenariosPlayed + 1 : 1, text: \"Gain 1 TP for including a leader. Add +1 for each game this Leader has taken part in until now\" }];\r\n    myArr = countType(roster, ModelType.Core) === getFactionSpecifics(faction).ModelAllowance.Core ? [...myArr, { name: \"Strength In Numbers\", amount: 1, text: strInNumberText }] : [...myArr];\r\n    myArr = countType(roster, ModelType.Special) === getFactionSpecifics(faction).ModelAllowance.Special ? [...myArr, { name: \"Cream Of The Crop\", amount: 1, text: creamOfCropText }] : [...myArr];\r\n    myArr = allUnitsSharedKeyword(roster, faction, alignment) ? [...myArr, { name: \"Bound by Experience\", amount: 1, text: \"Gain 1 TP if all models in your team share at least one non-faction keyword.\" }] : [...myArr];\r\n    myArr = hasTrueHeros(roster) ? [...myArr, { name: \"Herohammer\", amount: hasTrueHeros(roster), text: \"Gain 1 TP for each model in your team which cost 100 points or more\" }] : [...myArr];\r\n    myArr = getAllKeywords(roster).length > 8 ? [...myArr, { name: \"Death And Diversity\", amount: 1, text: \"Gain 1 TP if your team contains 8 or more different Keywords.\" }] : [...myArr];\r\n    myArr = hasArmouryEquipment(roster).length === 0 ? [...myArr, { name: \"Boots Before Loot\", amount: 1, text: \"Gain 1 TP if your team does not contain any items from your Opus’ Armoury\" }] : [...myArr];\r\n    myArr = hasArmouryEquipment(roster).length >= 5 ? [...myArr, { name: \"Shiny Fingz\", amount: 1, text: \"Gain 1 TP if your team contains 5 or more Armoury items\" }] : [...myArr];\r\n    return myArr;\r\n};\r\n","// tslint:disable: no-var-requires\r\n\r\nimport \"codemirror/lib/codemirror.css\";\r\nimport \"codemirror/mode/javascript/javascript.js\";\r\nimport \"codemirror/theme/mbo.css\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { SET_WARBAND } from \"./data/redux/actions\";\r\nimport { RefreshWarbandDisabledIcon, RefreshWarbandIcon } from \"./images\";\r\nimport { Warband } from \"./types\";\r\nimport { isWarband } from \"./utility\";\r\n\r\ndeclare global {\r\n    interface Window { jsonLint: any; }\r\n}\r\n\r\nrequire(\"codemirror/addon/lint/json-lint.js\");\r\nrequire(\"codemirror/addon/lint/lint.js\");\r\nrequire(\"codemirror/addon/lint/lint.css\");\r\n\r\nexport const CodeEditorContainer = ({ code, visible }: { code: Warband; visible: boolean }) => {\r\n    const [codeEditorState, setCodeEditorState] = useState(JSON.stringify(code, null, 2));\r\n    const [isViable, setViable] = useState<boolean>(isWarband(code));\r\n    const [isDirty, setDirty] = useState<boolean>(false);\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        setCodeEditorState(JSON.stringify(code, null, 2));\r\n    }, [code]);\r\n\r\n    const refreshRendering = () => {\r\n        dispatch({ type: SET_WARBAND, payload: JSON.parse(codeEditorState) });\r\n        setDirty(false);\r\n    };\r\n\r\n    return (\r\n        visible ? <div className=\"code-mirror-container\">\r\n            <img\r\n                src={isDirty && isViable ? RefreshWarbandIcon : RefreshWarbandDisabledIcon}\r\n                style={{ float: \"right\", cursor: isDirty ? \"pointer\" : \"auto\" }}\r\n                className=\"toolbar-icon\"\r\n                alt=\"Refresh Warband\"\r\n                onClick={() => isDirty && isViable ? refreshRendering() : (() => undefined)()}\r\n                title={`${isDirty ? \"Refresh warband\" : \"Make a change in the Editor. Afterwards you can trigger the refresh by clicking here\"}`}\r\n            />\r\n            <div className=\"code-mirror-title\">Warband JSON Editor</div>\r\n            <CodeMirror\r\n                className=\"code-mirror-editor\"\r\n                value={codeEditorState}\r\n                options={{\r\n                    theme: \"mbo\",\r\n                    viewportMargin: Infinity,\r\n                    mode: {\r\n                        name: \"javascript\",\r\n                        json: true,\r\n                        statementIndent: 2,\r\n                    },\r\n                    // mode: \"application/json\",\r\n                    gutters: [\"CodeMirror-lint-markers\"],\r\n                    lineNumbers: true,\r\n                    // lineWrapping: true,\r\n                    indentWithTabs: false,\r\n                    tabSize: 2,\r\n                    lint: {\r\n                        onUpdateLinting: (annotationsNotSorted: any[], annotations: any[], codeMirror: any) => {\r\n                            annotationsNotSorted.length > 0 ? setViable(false) : setViable(() => {\r\n                                let isWarbandBool = false;\r\n                                try {\r\n                                    isWarbandBool = isWarband(JSON.parse(codeEditorState));\r\n                                } catch (e) {\r\n                                    // tslint:disable-next-line: no-console\r\n                                    console.log(e);\r\n                                } finally {\r\n                                    // tslint:disable-next-line: no-unsafe-finally\r\n                                    return isWarbandBool;\r\n                                }\r\n                            }\r\n                            );\r\n                        },\r\n                    },\r\n                }}\r\n                autoCursor={false}\r\n                onBeforeChange={(_editor: any, _data: any, value: string) => {\r\n                    setCodeEditorState(value);\r\n                }}\r\n                onChange={(editor: any, data: any, value: any) => {\r\n                    if (data.removed?.toString().length !== 0 && data.text?.toString().length === 0) {\r\n                        editor.setCursor({ ...editor.getCursor(), ch: data.from.ch, line: data.from.line });\r\n                    } else if (data.text.toString().length !== (data.removed || \"\").toString().length) {\r\n                        editor.setCursor({ ...editor.getCursor(), ch: data.text.toString().length - (data.removed || \"\").toString().length + data.to.ch, line: data.to.line });\r\n                    } else {\r\n                        editor.setCursor({ ...editor.getCursor(), ch: data.to.ch + 1, line: data.to.line });\r\n                    }\r\n                    setDirty(true);\r\n                }}\r\n            />\r\n        </div> : null\r\n    );\r\n};\r\n","import FuzzySearch from \"fuzzy-search\";\r\nimport React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport \"../css/Dropdown.css\";\r\nimport { ADD_MODEL_TO_ROSTER } from \"../data/redux/actions\";\r\n\r\nconst DropdownList = ({ list, parentId, showFn }: { list: string[]; parentId: string; showFn(hide: boolean): void }) => {\r\n    const position = document.getElementById(`dropdown-container-${parentId}`)?.getElementsByClassName(\"focus-div\")[0].getBoundingClientRect();\r\n    const cssProperties = { top: (position?.top || 0) + 32, left: (position?.left || 0), width: (position?.width || 0) - 4 };\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        ReactDOM.createPortal(\r\n            <div style={cssProperties} className=\"dropdown-portal\">\r\n                {list.map((listItem) =>\r\n                    <div key={`dropdown-list-item-${parentId}-${listItem}`}\r\n                        className=\"dropdown-list-item\"\r\n                        onMouseDown={() => {\r\n                            dispatch({ type: ADD_MODEL_TO_ROSTER, payload: listItem });\r\n                            showFn(false);\r\n                        }}\r\n                    >\r\n                        {listItem}\r\n                    </div>\r\n                )}\r\n            </div>,\r\n            document.getElementById(`dropdown-container-${parentId}`) as HTMLElement\r\n        )\r\n    );\r\n};\r\n\r\nexport const DropdownMenuComponent = ({ originalList, placeholder, id, disable }: { originalList: string[]; placeholder: string; id: string; disable: boolean }) => {\r\n    const [showStatsDialog, setShowStatsDialog] = useState<boolean>(false);\r\n    const [filteredList, setFilteredList] = useState<string[]>(originalList);\r\n    const searcher = new FuzzySearch(originalList);\r\n\r\n    return <div id={`dropdown-container-${id}`} className=\"dropdown-container\" >\r\n        {showStatsDialog ? <DropdownList list={filteredList} showFn={setShowStatsDialog} parentId={id} /> : null}\r\n        <div className={disable ? \"focus-div disabled-input\" : \"focus-div\"}>\r\n            <input className=\"dropdown-input\"\r\n                onFocus={() => setShowStatsDialog(true)}\r\n                onBlur={() => setShowStatsDialog(false)}\r\n                onChange={(event) => setFilteredList(searcher.search(event.currentTarget.value))}\r\n                placeholder={placeholder}\r\n            ></input>\r\n        </div>\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { getFactionSpecifics } from \".\";\r\nimport { ModelType, RenderModel } from \"../types\";\r\nimport { DropdownMenuComponent } from \"./DropdownMenu\";\r\nimport { countType } from \"./Utils\";\r\n\r\nexport const AddModelComponent = ({ roster, faction }: { roster: RenderModel[]; faction: string }) => {\r\n    const disableLeaders = countType(roster, ModelType.Leader) >= getFactionSpecifics(faction).ModelAllowance.Leader;\r\n    const disableSpecial = countType(roster, ModelType.Special) >= getFactionSpecifics(faction).ModelAllowance.Special;\r\n    const disableCore = countType(roster, ModelType.Core) >= getFactionSpecifics(faction).ModelAllowance.Core;\r\n\r\n    return <div style={{ height: \"64px\", paddingTop: \"15px\" }}>\r\n        <div style={{ paddingLeft: \"75px\", fontSize: \"0.8rem\", color: \"#343434\" }}>Add new models by choosing from the dropdowns below</div>\r\n        <DropdownMenuComponent\r\n            id=\"leader\"\r\n            placeholder={disableLeaders ? \"Leaders maxed already\" : \"Add a new leader model\"}\r\n            originalList={getFactionSpecifics(faction).UnitList.filter((model) => model.type === ModelType.Leader).map((model) => model.name)}\r\n            disable={disableLeaders}\r\n        />\r\n        <DropdownMenuComponent\r\n            id=\"code\"\r\n            placeholder={disableCore ? \"Core maxed already\" : \"Add a new core model\"}\r\n            originalList={getFactionSpecifics(faction).UnitList.filter((model) => model.type === ModelType.Core).map((model) => model.name)}\r\n            disable={disableCore} />\r\n        <DropdownMenuComponent\r\n            id=\"special\"\r\n            placeholder={disableSpecial ? \"Special maxed already\" : \"Add a new special model\"}\r\n            originalList={getFactionSpecifics(faction).UnitList.filter((model) => model.type === ModelType.Special).map((model) => model.name)}\r\n            disable={disableSpecial} />\r\n    </div >;\r\n};\r\n","import React from \"react\";\r\nimport { getFactionSpecifics } from \".\";\r\nimport { store } from \"..\";\r\nimport { CoreIcon, LeaderIcon, SpecialIcon } from \"../images\";\r\nimport { ModelType, RenderModel } from \"../types\";\r\nimport { countType, getDetailedRoster } from \"./Utils\";\r\n\r\nexport const AllowanceComponent = () => {\r\n    const state = store.getState();\r\n    const detailedRoster = getDetailedRoster(state.Roster, state.Faction, state.Alignment).filter((unit) => unit !== undefined) as RenderModel[];\r\n    return <div style={{ height: \"64px\", float: \"right\" }}>\r\n        <div style={{ float: \"left\", padding: 10 }}>\r\n            <img\r\n                src={LeaderIcon}\r\n                style={{ height: 20, width: 40 }}\r\n                // className=\"toolbar-icon\"\r\n                alt=\"Open/Close Editor\"\r\n                title=\"Leader category\"\r\n            />\r\n            <div style={{ textAlign: \"center\" }}>{`${countType(detailedRoster, ModelType.Leader)} / ${getFactionSpecifics(state.Faction).ModelAllowance.Leader}`}</div>\r\n        </div>\r\n        <div style={{ float: \"left\", padding: 10 }}>\r\n            <img\r\n                src={CoreIcon}\r\n                style={{ height: 20, width: 40 }}\r\n                // className=\"toolbar-icon\"\r\n                alt=\"Open/Close Editor\"\r\n                title=\"Core category\"\r\n            />\r\n            <div style={{ textAlign: \"center\" }} >{`${countType(detailedRoster, ModelType.Core)} / ${getFactionSpecifics(state.Faction).ModelAllowance.Core}`}</div>\r\n        </div>\r\n        <div style={{ float: \"left\", padding: 10 }}>\r\n            <img\r\n                src={SpecialIcon}\r\n                style={{ height: 20, width: 40 }}\r\n                // className=\"toolbar-icon\"\r\n                alt=\"Open/Close Editor\"\r\n                title=\"Special category\"\r\n            />\r\n            <div style={{ textAlign: \"center\" }}>{`${countType(detailedRoster, ModelType.Special)} / ${getFactionSpecifics(state.Faction).ModelAllowance.Special}`}</div>\r\n        </div>\r\n    </div>;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { OpenEditorIcon, OpenEditorSelectedIcon } from \"../images\";\r\n\r\nexport const ToggleEditor = ({ setEditorVisibility }: { setEditorVisibility(json: any): void }) => {\r\n    const [selected, toggleSelected] = useState<boolean>(false);\r\n    useEffect(() => {\r\n        setEditorVisibility(selected);\r\n    }, [selected, setEditorVisibility]);\r\n    return <img\r\n        src={selected ? OpenEditorSelectedIcon : OpenEditorIcon}\r\n        style={{ width: \"50px\", height: \"50px\", left: \"75px\" }}\r\n        className=\"toolbar-icon\"\r\n        alt=\"Open/Close Editor\"\r\n        onClick={() => {\r\n            toggleSelected(!selected);\r\n        }}\r\n        title=\"Open Editor\"\r\n    />;\r\n};\r\n","import React from \"react\";\r\nimport { store } from \"..\";\r\nimport { ExportWarbandIcon } from \"../images\";\r\nexport const WarbandExport = () => {\r\n\r\n    const saveJsonToFile = () => {\r\n        const anchor = document.createElement(\"a\");\r\n        document.body.appendChild(anchor);\r\n        const state = store.getState();\r\n        const blob = new Blob([JSON.stringify(state)], { type: \"octet/stream\" });\r\n        const url = window.URL.createObjectURL(blob);\r\n        anchor.href = url;\r\n        anchor.download = `${state.Title} - ${state.Faction}.json`;\r\n        anchor.id = \"ClickableDownloadAnchor\";\r\n        anchor.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(document.getElementById(\"ClickableDownloadAnchor\") as Node);\r\n    };\r\n\r\n    return <div id=\"pdf-generator\" className=\"pdf-generator\">\r\n        <img\r\n            src={ExportWarbandIcon}\r\n            style={{ width: \"50px\", height: \"50px\", left: \"375px\" }}\r\n            className=\"toolbar-icon\"\r\n            alt=\"Save JSON file\"\r\n            onClick={saveJsonToFile}\r\n            title=\"Save warband to JSON\"\r\n        />\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport \"../css/Toolbar.css\";\r\nimport { FileUploader, PdfGenerator } from \"../utility\";\r\nimport { AllowanceComponent } from \"./AllowanceComponent\";\r\nimport { ToggleEditor } from \"./ToggleEditor\";\r\nimport { WarbandExport } from \"./WarbandExport\";\r\n\r\nexport const Toolbar = ({ setEditorVisibility }: { setEditorVisibility(visible: any): void }) => <div className=\"toolbar-container\">\r\n    <ToggleEditor setEditorVisibility={setEditorVisibility} />\r\n    <PdfGenerator />\r\n    <FileUploader />\r\n    <WarbandExport />\r\n    <AllowanceComponent />\r\n</div >;\r\n","import React from \"react\";\r\n\r\nexport const ArmyKeywordsRenderer = ({ keywords }: { keywords: string[] }) => {\r\n    const renderKeywords = () => keywords.join(\", \");\r\n    return <div className=\"model-container army-keywords-container\">\r\n        <div className=\"container-header\">{`Keywords (${keywords.length})`}</div>\r\n        <div className=\"keywords-text\">{renderKeywords()}</div>\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { Rule } from \"../types\";\r\n\r\nexport const ArmyRulesHeaderRenderer = ({ armyRules }: { armyRules: Rule[] }) => {\r\n    const renderGlobalRules = () =>\r\n        armyRules.map((rule) =>\r\n            <div key={`rule_${rule?.name}`} className=\"split-div\">\r\n                <div className=\"split-div-header\">{rule?.name}</div>\r\n                <div className=\"split-div-text\">{rule?.effect}</div>\r\n            </div>\r\n        );\r\n    return armyRules && armyRules.length > 0 ? <div className=\"model-container\">\r\n        <div className=\"container-header\">Army wide rules:</div>\r\n        {renderGlobalRules()}\r\n    </div> : null;\r\n};\r\n","import React from \"react\";\r\nimport { FactionEnum, TacticalPoints } from \"../types\";\r\nimport { getPhilosophy } from \"../utility\";\r\n\r\nexport const ArmyTacticalPointsRenderer = ({ stratagems, philosophy, faction }: { stratagems: TacticalPoints[]; philosophy: string | undefined; faction: FactionEnum }) => {\r\n    const tacticalPoints = stratagems.reduce((acc, stata) => acc + stata.amount, philosophy ? getPhilosophy(philosophy, faction)?.tp || 0 : 0);\r\n    const renderCheckboxes = () => {\r\n        let checkboxes: JSX.Element[] = [];\r\n        for (let i = 0; i < tacticalPoints; i++) {\r\n            checkboxes = [...checkboxes, <div key={`tactical-checkboxes-${i}`} style={{ width: \"10px\", height: \"10px\", border: \"1px solid\", float: \"right\", marginRight: \"8px\", marginTop: \"2px\", background: \"white\" }} />];\r\n        }\r\n        return checkboxes;\r\n    };\r\n    return <div className=\"model-container army-keywords-container\">\r\n        <div className=\"container-header\">\r\n            {`Tactical Points (${tacticalPoints})`}\r\n            {renderCheckboxes()}\r\n        </div>\r\n        {philosophy ? <div className=\"split-div\">\r\n            <div className=\"split-div-header\" style={{ paddingRight: \"5px\" }}>{`${philosophy} (${getPhilosophy(philosophy, faction)?.tp}) [Philosophy]`}</div>\r\n            <div className=\"split-div-text\">{getPhilosophy(philosophy, faction)?.text}</div>\r\n        </div> : undefined}\r\n        {stratagems.map((stratagem) => <div key={`stratagem_${stratagem?.name}`} className=\"split-div\">\r\n            <div className=\"split-div-header\">{`${stratagem.name} (${stratagem.amount})`}</div><div className=\"split-div-text\">{stratagem.text}</div></div>)}\r\n    </div>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { UPDATE_MODEL_KEYWORDS } from \"../../data/redux/actions\";\r\nimport { RenderModel, ReplacableString } from \"../../types\";\r\n\r\nexport const ModifyKeywordsDialog = ({ model, modelId, hideFn }: { model: RenderModel; modelId: string; hideFn(hide: boolean): void }) => {\r\n    const position = document.getElementById(modelId)?.getBoundingClientRect();\r\n    const cssProperties = { top: (position?.top || 0) + 25, left: (position?.left || 0) + 25, width: (position?.width || 0) - 75 };\r\n    const [keywords, setKeywords] = useState<string | ReplacableString>(\"\");\r\n    const dispatch = useDispatch();\r\n    const getKeywords = () =>\r\n        <div style={{ display: \"inline-grid\", gridTemplateColumns: \"50% 50%\", width: \"100%\" }}>\r\n            <div style={{ gridColumn: 1, display: \"inline-grid\" }}>\r\n                <div className=\"left-floating-div\">\r\n                    <div className=\"stats-text\">Add a keyword: </div>\r\n                    <div className=\"focusable-div\">\r\n                        <input\r\n                            className=\"stats-input-field\"\r\n                            onChange={(e: React.FormEvent<HTMLInputElement>) => setKeywords(e.currentTarget.value)}>\r\n                        </input>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div>Which does it replace?</div>\r\n                    {model.keywords.map((word) => <div>{word}</div>)}\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <button\r\n                className={`dialog-button ${!keywords ? \"dialog-button-disabled\" : \"\"}`}\r\n                onClick={() => {\r\n                    if (!keywords) {\r\n                        return undefined;\r\n                    }\r\n                    dispatch({ type: UPDATE_MODEL_KEYWORDS, payload: { model, keywords } });\r\n\r\n                    hideFn(false);\r\n                }}\r\n                title={`${!keywords ? \"You did not make any changes that could be submitted\" : \"Click to submit changes\"}`}\r\n            >Save changes</button>\r\n            <button\r\n                className=\"dialog-button\"\r\n                onClick={() => hideFn(false)}\r\n            >Cancel</button>\r\n        </div>;\r\n\r\n    return (\r\n        ReactDOM.createPortal(\r\n            <div className=\"block-background\">\r\n                <div style={cssProperties} className=\"modal\">\r\n                    <div className=\"modal-header\">{`Change any stats you wish for ${model.name}`}</div>\r\n                    {getKeywords()}\r\n                </div>\r\n            </div>,\r\n            document.getElementById(modelId) as HTMLElement\r\n        )\r\n    );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { UPDATE_MODEL_STATS } from \"../../data/redux/actions\";\r\nimport { ModelStats, MultiProfileModelStats, RecursivePartial, RenderModel } from \"../../types\";\r\nimport { isMultiProfileStatLine } from \"../../utility\";\r\n\r\nexport const ModifyStatsDialog = ({ model, modelId, hideFn }: { model: RenderModel; modelId: string; hideFn(hide: boolean): void }) => {\r\n    const position = document.getElementById(modelId)?.getBoundingClientRect();\r\n    const cssProperties = { top: (position?.top || 0) + 25, left: (position?.left || 0) + 25, width: (position?.width || 0) - 75 };\r\n    const [stats, setStats] = useState<Partial<ModelStats>>({});\r\n    const [multiStats, setMultiStats] = useState<RecursivePartial<MultiProfileModelStats>>({});\r\n    const dispatch = useDispatch();\r\n    const isEmptyObject = (obj: any) => Object.keys(obj).length === 0 && obj.constructor === Object;\r\n    const noValuesChangedInDialog = () => isEmptyObject(stats) && isEmptyObject(multiStats);\r\n    // tslint:disable-next-line: cyclomatic-complexity\r\n    const getStats = () => {\r\n        if (!isMultiProfileStatLine(model.stats)) {\r\n            return <div style={{ display: \"inline-grid\", gridTemplateColumns: \"50% 50%\", width: \"100%\" }}>\r\n                <div style={{ gridColumn: 1, display: \"inline-grid\" }}>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Movement: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Movement !== undefined ? stats.Movement : model.stats.Movement}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Movement: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10) })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">WeaponSkill: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.WeaponSkill !== undefined ? stats.WeaponSkill : model.stats.WeaponSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, WeaponSkill: e.currentTarget.value })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">BallisticSkill: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.BallisticSkill !== undefined ? stats.BallisticSkill : model.stats.BallisticSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, BallisticSkill: e.currentTarget.value })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Strength: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Strength !== undefined ? stats.Strength : model.stats.Strength}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Strength: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10) })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Toughness: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Toughness !== undefined ? stats.Toughness : model.stats.Toughness}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Toughness: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10) })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{ gridColumn: 2, display: \"inline-grid\" }}>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Wounds: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Wounds !== undefined ? stats.Wounds : model.stats.Wounds}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Wounds: e.currentTarget.value })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Attacks: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Attacks !== undefined ? stats.Attacks : model.stats.Attacks}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Attacks: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10) })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Leadership: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Leadership !== undefined ? stats.Leadership : model.stats.Leadership}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Leadership: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10) })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Save: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.Save !== undefined ? stats.Save : model.stats.Save}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, Save: e.currentTarget.value })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">InvulnerableSave: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={stats.InvulnerableSave !== undefined ? stats.InvulnerableSave : model.stats.InvulnerableSave}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setStats({ ...stats, InvulnerableSave: e.currentTarget.value })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button onClick={() => {\r\n                    dispatch({ type: UPDATE_MODEL_STATS, payload: { model, stats } });\r\n                    hideFn(false);\r\n                }\r\n                }>Save changes</button>\r\n                <button onClick={() => hideFn(false)}>Cancel</button>\r\n            </div>;\r\n        } else {\r\n            return <div style={{ display: \"inline-grid\", gridTemplateColumns: \"50% 50%\", width: \"100%\" }}>\r\n                <div style={{ gridColumn: 1, display: \"inline-grid\" }}>\r\n                    <div className=\"left-floating-div\"><div style={{ fontWeight: \"bold\", fontSize: \"0.75rem\", gridColumn: 2 }}>Primary Profile</div><div style={{ fontWeight: \"bold\", fontSize: \"0.75rem\", gridColumn: 3 }}>Secondary Profile</div></div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Movement: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Movement !== undefined ? multiStats.firstProfile?.Movement : model.stats.firstProfile.Movement}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        firstProfile: {\r\n                                            ...multiStats.firstProfile,\r\n                                            Movement: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                        <div style={{ gridColumn: 3 }} className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Movement !== undefined ? multiStats.secondProfile?.Movement : model.stats.secondProfile.Movement}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        secondProfile: {\r\n                                            ...multiStats.secondProfile,\r\n                                            Movement: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">WeaponSkill: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.WeaponSkill !== undefined ? multiStats.firstProfile?.WeaponSkill : model.stats.firstProfile.WeaponSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, firstProfile: { ...multiStats.firstProfile, WeaponSkill: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.WeaponSkill !== undefined ? multiStats.secondProfile?.WeaponSkill : model.stats.secondProfile.WeaponSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, secondProfile: { ...multiStats.secondProfile, WeaponSkill: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">BallisticSkill: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.BallisticSkill !== undefined ? multiStats.firstProfile?.BallisticSkill : model.stats.firstProfile.BallisticSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, firstProfile: { ...multiStats.firstProfile, BallisticSkill: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.BallisticSkill !== undefined ? multiStats.secondProfile?.BallisticSkill : model.stats.secondProfile.BallisticSkill}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, secondProfile: { ...multiStats.secondProfile, BallisticSkill: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Strength: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Strength !== undefined ? multiStats.firstProfile?.Strength : model.stats.firstProfile.Strength}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        firstProfile: {\r\n                                            ...multiStats.firstProfile,\r\n                                            Strength: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                        <div style={{ gridColumn: 3 }} className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Strength !== undefined ? multiStats.secondProfile?.Strength : model.stats.secondProfile.Strength}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        secondProfile: {\r\n                                            ...multiStats.secondProfile,\r\n                                            Strength: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Toughness: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Toughness !== undefined ? multiStats.firstProfile?.Toughness : model.stats.firstProfile.Toughness}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        firstProfile: {\r\n                                            ...multiStats.firstProfile,\r\n                                            Toughness: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                        <div style={{ gridColumn: 3 }} className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Toughness !== undefined ? multiStats.secondProfile?.Toughness : model.stats.secondProfile.Toughness}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        secondProfile: {\r\n                                            ...multiStats.secondProfile,\r\n                                            Toughness: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div style={{ gridColumn: 2, display: \"inline-grid\" }}>\r\n                    <div className=\"left-floating-div\"><div style={{ fontWeight: \"bold\", fontSize: \"0.75rem\", gridColumn: 2 }}>Primary Profile</div><div style={{ fontWeight: \"bold\", fontSize: \"0.75rem\", gridColumn: 3 }}>Secondary Profile</div></div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Wounds: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Wounds !== undefined ? multiStats.firstProfile?.Wounds : model.stats.firstProfile.Wounds}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, firstProfile: { ...multiStats.firstProfile, Wounds: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Wounds !== undefined ? multiStats.secondProfile?.Wounds : model.stats.secondProfile.Wounds}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, secondProfile: { ...multiStats.secondProfile, Wounds: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Attacks: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Attacks !== undefined ? multiStats.firstProfile?.Attacks : model.stats.firstProfile.Attacks}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        firstProfile: {\r\n                                            ...multiStats.firstProfile,\r\n                                            Attacks: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Attacks !== undefined ? multiStats.secondProfile?.Attacks : model.stats.secondProfile.Attacks}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        secondProfile: {\r\n                                            ...multiStats.secondProfile,\r\n                                            Attacks: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Leadership: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Leadership !== undefined ? multiStats.firstProfile?.Leadership : model.stats.firstProfile.Leadership}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        firstProfile: {\r\n                                            ...multiStats.firstProfile,\r\n                                            Leadership: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }}>\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Leadership !== undefined ? multiStats.secondProfile?.Leadership : model.stats.secondProfile.Leadership}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats(\r\n                                    {\r\n                                        ...multiStats,\r\n                                        secondProfile: {\r\n                                            ...multiStats.secondProfile,\r\n                                            Leadership: isNaN(parseInt(e.currentTarget.value, 10)) ? 0 : parseInt(e.currentTarget.value, 10),\r\n                                        },\r\n                                    }\r\n                                )}>\r\n                            </input>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">Save: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.Save !== undefined ? multiStats.firstProfile?.Save : model.stats.firstProfile.Save}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, firstProfile: { ...multiStats.firstProfile, Save: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.Save !== undefined ? multiStats.secondProfile?.Save : model.stats.secondProfile.Save}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, secondProfile: { ...multiStats.secondProfile, Save: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"left-floating-div\">\r\n                        <div className=\"stats-text\">InvulnerableSave: </div>\r\n                        <div className=\"focusable-div\">\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.firstProfile?.InvulnerableSave !== undefined ? multiStats.firstProfile?.InvulnerableSave : model.stats.firstProfile.InvulnerableSave}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, firstProfile: { ...multiStats.firstProfile, InvulnerableSave: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                        <div className=\"focusable-div\" style={{ gridColumn: 3 }} >\r\n                            <input\r\n                                className=\"stats-input-field\"\r\n                                value={multiStats.secondProfile?.InvulnerableSave !== undefined ? multiStats.secondProfile?.InvulnerableSave : model.stats.secondProfile.InvulnerableSave}\r\n                                onChange={(e: React.FormEvent<HTMLInputElement>) => setMultiStats({ ...multiStats, secondProfile: { ...multiStats.secondProfile, InvulnerableSave: e.currentTarget.value } })}>\r\n                            </input>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    className={`dialog-button ${noValuesChangedInDialog() ? \"dialog-button-disabled\" : \"\"}`}\r\n                    onClick={() => {\r\n                        if (noValuesChangedInDialog()) {\r\n                            return undefined;\r\n                        }\r\n                        if (isMultiProfileStatLine(model.stats)) {\r\n                            dispatch({ type: UPDATE_MODEL_STATS, payload: { model, stats: multiStats } });\r\n                        } else {\r\n                            dispatch({ type: UPDATE_MODEL_STATS, payload: { model, stats } });\r\n                        }\r\n\r\n                        hideFn(false);\r\n                    }}\r\n                    title={`${noValuesChangedInDialog() ? \"You did not make any changes that could be submitted\" : \"Click to submit changes\"}`}\r\n                >Save changes</button>\r\n                <button\r\n                    className=\"dialog-button\"\r\n                    onClick={() => hideFn(false)}\r\n                >Cancel</button>\r\n            </div>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        ReactDOM.createPortal(\r\n            <div className=\"block-background\">\r\n                <div style={cssProperties} className=\"modal\">\r\n                    <div className=\"modal-header\">{`Change any stats you wish for ${model.name}`}</div>\r\n                    {getStats()}\r\n                </div>\r\n            </div>,\r\n            document.getElementById(modelId) as HTMLElement\r\n        )\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { LegendaryIcon } from \"../images\";\r\nimport { BasicWeapon, FactionEnum, LegendaryWeapon, MultiProfileWeapon, OtherEquipment, RenderEquipment, RenderWeapon, Rule, SuperBasicWeapon } from \"../types\";\r\nimport { getWeaponPrice, isBasicWeapon, isLegendaryWeapon, isMultiProfileRenderWeapon, isMultiProfileWeapon } from \"../utility/Utils\";\r\n\r\nexport const ModelEquipmentRenderer = ({ equipment, faction, name }: { equipment: RenderEquipment; faction: string; name: string }) => {\r\n    const weaponPriceString = (weapon: RenderWeapon | LegendaryWeapon) =>\r\n        isLegendaryWeapon(weapon) ?\r\n            \"(20)\" :\r\n            getWeaponPrice(weapon.name, faction as FactionEnum, weapon.amount || 1) ?\r\n                `(${getWeaponPrice(weapon.name, faction as FactionEnum, weapon.amount || 1)})` :\r\n                \"\";\r\n    const otherEquipmentPriceString = (otherEquipment: OtherEquipment) => otherEquipment.price ? `(${otherEquipment.price})` : \"\";\r\n    const weaponRuleRender = (weapon: BasicWeapon | SuperBasicWeapon) => {\r\n        if (typeof (weapon.rule) === \"string\" || weapon.rule === undefined) {\r\n            return <td key={`${name}-${weapon.name}-rule`}>{weapon.rule}</td>;\r\n        } else {\r\n            return <td key={`${name}-${weapon.name}-rules`}>{weapon.rule.map((rule) =>\r\n                typeof (rule) === \"string\" ?\r\n                    <div key={`${name}-${weapon.name}-rules-${rule}`}>{rule}</div> :\r\n                    <div key={`${name}-${weapon.name}-rules-${rule.name}`}><div style={{ float: \"left\", paddingRight: 3, fontWeight: \"bold\" }}>{rule.name}</div><div> - {rule.effect}</div></div>)}\r\n            </td>;\r\n        }\r\n    };\r\n    const weaponNameRender = (weapon: BasicWeapon | SuperBasicWeapon) => {\r\n        if (weapon.isLegendary) {\r\n            return <td key={`${name}-${weapon.name}-name`}><div>{weapon.name}</div><div><img style={{ height: \"20px\", padding: \"2px\" }} alt=\"LegendaryIcon\" src={LegendaryIcon} /></div> </td>;\r\n        } else {\r\n            return <td key={`${name}-${weapon.name}-name`}>{weapon.name} </td>;\r\n        }\r\n    };\r\n    const renderWeaponStats = (weapon: BasicWeapon | SuperBasicWeapon) =>\r\n        [weaponNameRender(weapon),\r\n        <td key={`${name}-${weapon.name}-type`}>{weapon.type}</td>,\r\n        <td key={`${name}-${weapon.name}-range`}>{weapon.range}</td>,\r\n        <td key={`${name}-${weapon.name}-strength`}>{weapon.strength}</td>,\r\n        <td key={`${name}-${weapon.name}-ap`}>{weapon.ap}</td>,\r\n        <td key={`${name}-${weapon.name}-damage`}>{weapon.damage}</td>,\r\n        weaponRuleRender(weapon)];\r\n    const renderMultiProfileHeader = (keyName: string, weaponName: string, weaponRule?: string | Array<string | Rule>) =>\r\n        <tr key={`weapon-table-row-${keyName}`}>\r\n            <td>{weaponName}</td>\r\n            {weaponRule ? <td colSpan={6}>{`${weaponRule}`}</td> : undefined}\r\n        </tr>;\r\n    const renderWeapon = (weapon: RenderWeapon | SuperBasicWeapon | MultiProfileWeapon, cnt: number) => {\r\n        let arr: JSX.Element[] = [];\r\n        const weaponName = cnt === 1 ? ` - ${weapon.name}` : cnt === 2 ? ` -  - ${weapon.name}` : weapon.name;\r\n        const amountString = (isBasicWeapon(weapon) || isMultiProfileRenderWeapon(weapon)) && weapon.amount > 1 && cnt === 0 ? `${weapon.amount}x` : \"\";\r\n        const headerString = (isBasicWeapon(weapon) || isMultiProfileRenderWeapon(weapon) || isLegendaryWeapon(weapon)) ? `${amountString} ${weaponName} ${weaponPriceString(weapon)}` : weaponName;\r\n        if (isMultiProfileWeapon(weapon) || isMultiProfileRenderWeapon(weapon)) {\r\n            arr = [\r\n                ...arr,\r\n                renderMultiProfileHeader(`weapon-table-row-${weapon.name}-${cnt}`, headerString, weapon.rule),\r\n\r\n            ];\r\n            if (weapon.multiProfiles) {\r\n                const multiProfiles = weapon.multiProfiles;\r\n                arr = arr.concat(...multiProfiles.map((profile) => renderWeapon(profile, cnt + 1)));\r\n            }\r\n        } else {\r\n            arr = [\r\n                <tr key={`weapon-table-row-${weapon.name}-${cnt}`}>\r\n                    {renderWeaponStats({ ...weapon, name: headerString })}\r\n                </tr>];\r\n        }\r\n        return arr;\r\n    };\r\n\r\n    const renderOtherEquipment = () => equipment.otherEquipment?.map((otherEquipment) =>\r\n        <tr key={`weapon-table-row-${otherEquipment.name}`}>\r\n            <td>{`${otherEquipment.name} ${otherEquipmentPriceString(otherEquipment)}`}</td>\r\n            <td>{otherEquipment.effect}</td>\r\n        </tr>);\r\n    return <div>\r\n        <table className=\"model-table\">\r\n            <colgroup>\r\n                <col style={{ width: \"100px\" }} />\r\n                <col style={{ width: \"45px\" }} />\r\n                <col style={{ width: \"20px\" }} />\r\n                <col style={{ width: \"20px\" }} />\r\n                <col style={{ width: \"20px\" }} />\r\n                <col style={{ width: \"20px\" }} />\r\n                <col style={{ width: \"180px\" }} />\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th>Weapons</th>\r\n                    <th>Type</th>\r\n                    <th>Rng</th>\r\n                    <th>Str</th>\r\n                    <th>AP</th>\r\n                    <th>Dmg</th>\r\n                    <th>Rule</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {equipment.weapons?.map((weapon) => renderWeapon(weapon, 0))}\r\n            </tbody>\r\n        </table>\r\n        {equipment.otherEquipment ? <table className=\"model-table\">\r\n            <colgroup>\r\n                <col style={{ width: \"100px\" }} />\r\n                <col style={{ width: \"307px\" }} />\r\n            </colgroup>\r\n            <thead>\r\n                <tr>\r\n                    <th>Equipment</th>\r\n                    <th>Effect</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {renderOtherEquipment()}\r\n            </tbody>\r\n        </table> : undefined}\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { RenderModel } from \"../types\";\r\n\r\nexport const ModelHeaderRenderer = ({ model }: { model: RenderModel }) => {\r\n    const amountString = model.amount ? `${model.amount}x ` : \"\";\r\n    return <div className=\"container-header\">\r\n        <div style={{ float: \"left\", width: \"75%\" }}> {`${amountString} ${model.name} (${model.price})`}</div>\r\n        <div style={{ float: \"right\", width: \"calc(25% - 30px)\", paddingRight: \"15px\", textAlign: \"right\" }}>{`${model.type}`}</div>\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\n\r\nexport const ModelKeywordRenderer = ({ keywords }: { keywords: string[] | undefined }) => keywords ? <div className=\"keywords-container\">\r\n    <div style={{ fontWeight: \"bold\", float: \"left\" }}>Keywords</div>\r\n    <div style={{ paddingLeft: \"192px\" }}>{keywords.join(\", \")}</div>\r\n</div> : null;\r\n","import React from \"react\";\r\nimport { Rule } from \"../types\";\r\n\r\nexport const ModelRulesRenderer = ({ rules }: { rules: Rule[] | undefined }) => {\r\n    const renderRules = () => rules?.map((rule) =>\r\n        <tr key={`rule_${rule.name}`}>\r\n            <td>{rule.price ? `${rule.name} (${rule.price})` : rule.name}</td>\r\n            <td>{rule.effect}</td>\r\n        </tr>);\r\n    return rules && rules.length > 0 ? <table className=\"model-table\">\r\n        <colgroup>\r\n            <col style={{ width: \"100px\" }} />\r\n            <col style={{ width: \"305px\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr>\r\n                <th>Rule</th>\r\n                <th>Effect</th>\r\n            </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n            {renderRules()}\r\n        </tbody>\r\n    </table> : null;\r\n};\r\n","import React from \"react\";\r\nimport { ModelStats, MultiProfileModelStats } from \"../types\";\r\nimport { isMultiProfileStatLine } from \"../utility\";\r\n\r\nexport const ModelStatsRenderer = ({ name, stats }: { name: string; stats: ModelStats | MultiProfileModelStats }) => {\r\n    const renderAtomicStats = (characteristics: ModelStats, idx?: number) => <tr key={`modelstats-${name}-${idx}`}>\r\n        {idx === 0 ? <td rowSpan={2} style={{ paddingTop: \"12px\" }}>{name}</td> : idx !== undefined ? undefined : <td>{name}</td>}\r\n        <td>{characteristics.Movement}</td>\r\n        <td>{characteristics.WeaponSkill}</td>\r\n        <td>{characteristics.BallisticSkill}</td>\r\n        <td>{characteristics.Strength}</td>\r\n        <td>{characteristics.Toughness}</td>\r\n        <td>{characteristics.Wounds}</td>\r\n        <td>{characteristics.Attacks}</td>\r\n        <td>{characteristics.Leadership}</td>\r\n        <td>{characteristics.Save}</td>\r\n        <td>{characteristics.InvulnerableSave}</td>\r\n    </tr>;\r\n    const renderMultiProfileStats = (statLine: MultiProfileModelStats) => [renderAtomicStats(statLine.firstProfile, 0), renderAtomicStats(statLine.secondProfile, 1)];\r\n    const renderStats = () => isMultiProfileStatLine(stats) ? renderMultiProfileStats(stats) : renderAtomicStats(stats);\r\n    return <table className=\"model-table\">\r\n        <colgroup>\r\n            <col style={{ width: \"100px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"25px\" }} />\r\n            <col style={{ width: \"80px\" }} />\r\n        </colgroup>\r\n        <thead>\r\n            <tr>\r\n                <th>Name</th>\r\n                <th>M</th>\r\n                <th>WS</th>\r\n                <th>BS</th>\r\n                <th>S</th>\r\n                <th>T</th>\r\n                <th>W</th>\r\n                <th>A</th>\r\n                <th>LD</th>\r\n                <th>Sv</th>\r\n                <th>Is</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {renderStats()}\r\n        </tbody>\r\n    </table>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { store } from \"..\";\r\nimport { DECREASE_MODEL_AMOUNT, INCREASE_MODEL_AMOUNT, MOVE_DOWN, MOVE_UP, REMOVE_UNIT_FROM_ROSTER } from \"../data/redux/actions\";\r\nimport { DecreaseIcon, DeleteIcon, DownIcon, GearIcon, IncreaseIcon, KeywordsIcon, RulesIcon, StatsIcon, UpIcon } from \"../images\";\r\nimport { RenderModel } from \"../types\";\r\nimport { isSearchedModel } from \"../utility\";\r\nimport { ModifyKeywordsDialog } from \"./dialogs/ModifyKeywordsDialog\";\r\nimport { ModifyStatsDialog } from \"./dialogs/ModifyStatsDialog\";\r\nimport { ModelEquipmentRenderer } from \"./ModelEquipment\";\r\nimport { ModelHeaderRenderer } from \"./ModelHeaderRenderer\";\r\nimport { ModelKeywordRenderer } from \"./ModelKeywords\";\r\nimport { ModelRulesRenderer } from \"./ModelRules\";\r\nimport { ModelStatsRenderer } from \"./ModelStats\";\r\n\r\ninterface WarbandContext {\r\n    renderSidebar: boolean;\r\n    canAddModel: boolean;\r\n    canRemoveModel: boolean;\r\n}\r\n\r\nexport const ModelSheetRenderer = ({ model, context }: { model: RenderModel; context: WarbandContext }) => {\r\n    const [showStatsDialog, setShowStatsDialog] = useState<boolean>(false);\r\n    const [showKeywordssDialog, setShowKeywordsDialog] = useState<boolean>(false);\r\n    const dispatch = useDispatch();\r\n    const modelId = `modelsheet-${model.name}-${model.price}${context.renderSidebar ? \"-withSidebar\" : \"\"}`;\r\n    const state = store.getState();\r\n    const idx = state.Roster.findIndex((rosterModel) => isSearchedModel(rosterModel, model, state.Faction, state.Alignment));\r\n    const renderModelContainer = () =>\r\n        <div id={modelId} className={`model-container ${context.renderSidebar ? \"width-for-sidebar\" : \"\"}`}>\r\n            <ModelHeaderRenderer model={model} />\r\n            <ModelStatsRenderer name={model.name} stats={model.stats} />\r\n            {model.equipment ? <ModelEquipmentRenderer equipment={model.equipment} faction={state.Faction} name={`${model.name}-${model.price}`} /> : undefined}\r\n            <ModelRulesRenderer rules={model.rules} />\r\n            <ModelKeywordRenderer keywords={model.keywords} />\r\n        </div>;\r\n    const renderSidebarContainer = () =>\r\n        context.renderSidebar ?\r\n\r\n            <div className=\"model-sidebar\">\r\n                {showStatsDialog ? <ModifyStatsDialog model={model} modelId={modelId} hideFn={setShowStatsDialog} /> : null}\r\n                {showKeywordssDialog ? <ModifyKeywordsDialog model={model} modelId={modelId} hideFn={setShowKeywordsDialog} /> : null}\r\n                <div\r\n                    key={`${model.name}deleteicon`}\r\n                    className=\"model-sidebar-icon\"\r\n                    onClick={() => dispatch({ type: REMOVE_UNIT_FROM_ROSTER, payload: model })}\r\n                >\r\n                    <img\r\n                        alt=\"delete\"\r\n                        src={DeleteIcon}\r\n                        style={{ width: \"100%\" }}\r\n                        title={`Remove ${model.name} from roster`} />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}statsicon`}\r\n                    className=\"model-sidebar-icon\"\r\n                    onClick={() => setShowStatsDialog(true)}\r\n                >\r\n                    <img\r\n                        alt=\"modifyStats\"\r\n                        src={StatsIcon}\r\n                        style={{ width: \"100%\" }}\r\n                        title=\"Modify model characteristics\"\r\n                    />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}addicon`}\r\n                    className={context.canAddModel ? \"model-sidebar-icon\" : \"model-sidebar-icon disable-icon\"}\r\n                    onClick={() => dispatch({ type: INCREASE_MODEL_AMOUNT, payload: model })}\r\n                >\r\n                    <img\r\n                        alt=\"increase\"\r\n                        src={IncreaseIcon}\r\n                        style={{ width: \"100%\" }}\r\n                        title={context.canRemoveModel ? \"Click to increase the number of models\" : \"You have reached the maximum allowance\"}\r\n                    />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}decreaseicon`}\r\n                    className={context.canRemoveModel ? \"model-sidebar-icon\" : \"model-sidebar-icon disable-icon\"}\r\n                    onClick={() => dispatch({ type: DECREASE_MODEL_AMOUNT, payload: model })}\r\n                >\r\n                    <img\r\n                        alt=\"decrease\"\r\n                        src={DecreaseIcon}\r\n                        style={{ width: \"100%\" }}\r\n                        title={context.canRemoveModel ? \"Click to decrease the number of models\" : \"Use the remove button above to delete this model from the roster instead\"}\r\n                    />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}upicon`}\r\n                    className={idx > 0 ? \"model-sidebar-icon\" : \"model-sidebar-icon disable-icon\"}\r\n                    onClick={() => dispatch({ type: MOVE_UP, payload: model })}\r\n                    title={idx > 0 ? \"Move model up one slot in the roster\" : \"This model is already at the first slot of the roster\"}\r\n                >\r\n                    <img alt=\"up\" src={UpIcon} style={{ width: \"100%\" }} />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}downicon`}\r\n                    className={idx < state.Roster.length - 1 ? \"model-sidebar-icon\" : \"model-sidebar-icon disable-icon\"}\r\n                    onClick={() => dispatch({ type: MOVE_DOWN, payload: model })}\r\n                    title={idx < state.Roster.length - 1 ? \"Move model down one slot in the roster\" : \"This model is already at the last slot of the roster\"}\r\n                >\r\n                    <img alt=\"down\" src={DownIcon} style={{ width: \"100%\" }} />\r\n                </div>\r\n\r\n                <div\r\n                    key={`${model.name}gearicon`}\r\n                    className=\"model-sidebar-icon\"\r\n                    onClick={() => alert(\"TODO: Equipment modification dialog\")}\r\n                >\r\n                    <img alt=\"delete\" src={GearIcon} style={{ width: \"100%\" }} />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}rulesicon`}\r\n                    className=\"model-sidebar-icon\"\r\n                    onClick={() => alert(\"TODO: Rules modification dialog\")}\r\n                >\r\n                    <img alt=\"delete\" src={RulesIcon} style={{ width: \"100%\" }} />\r\n                </div>\r\n                <div\r\n                    key={`${model.name}keywordsicon`}\r\n                    className=\"model-sidebar-icon\"\r\n                    onClick={() => alert(\"TODO: Keywords modification dialog\")}\r\n                // onClick={() => setShowKeywordsDialog(true)}\r\n                >\r\n                    <img alt=\"delete\" src={KeywordsIcon} style={{ width: \"100%\" }} />\r\n                </div>\r\n            </div> :\r\n            null;\r\n\r\n    return <div className={` ${context.renderSidebar ? \"model-container-with-sidebar\" : \"\"}`}>\r\n        {renderModelContainer()}\r\n        {renderSidebarContainer()}\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { FactionEnum, ModelType, RenderWarband } from \"../types\";\r\nimport { countType, getAllKeywords, getArmyRules, getFactionSpecifics } from \"../utility\";\r\nimport { ArmyKeywordsRenderer } from \"./ArmyKeywords\";\r\nimport { ArmyRulesHeaderRenderer } from \"./ArmyRules\";\r\nimport { ArmyTacticalPointsRenderer } from \"./ArmyTacticalPoints\";\r\nimport { ModelSheetRenderer } from \"./ModelSheet\";\r\n\r\nexport const WarbandRenderer = ({ state, page, isPdfSection, hide }: { state: RenderWarband; page: { nr: number; total: number }; isPdfSection?: boolean; hide?: boolean }) => {\r\n    const faction = state.Faction as FactionEnum;\r\n    const canAddModel = (type: string) => {\r\n        const allowance = getFactionSpecifics(faction).ModelAllowance;\r\n        switch (type) {\r\n            case ModelType.Leader: return countType(state.Roster, ModelType.Leader) < allowance.Leader;\r\n            case ModelType.Core: return countType(state.Roster, ModelType.Core) < allowance.Core;\r\n            case ModelType.Special: return countType(state.Roster, ModelType.Special) < allowance.Special;\r\n        }\r\n        return false;\r\n    };\r\n    const canRemoveModel = (amount: number | undefined) => {\r\n        const cnt = amount || 1;\r\n        return cnt > 1;\r\n    };\r\n    return <div id={`roster-sheet-container${page.nr}`} className={`${isPdfSection ? \"pdf-container\" : \"a4-container\"} ${hide ? \"hide-container\" : \"\"}`} style={{ float: \"left\", marginTop: 10, paddingTop: 0 }}>\r\n        <div className=\"roster-sheet-title\">{`${state.Title} - ${state.Faction} (${state.RosterPrice} pts)`}</div>\r\n        {page.nr === 1 ?\r\n            <div>\r\n                <ArmyRulesHeaderRenderer armyRules={getArmyRules(faction, state.Alignment)} />\r\n                <ArmyKeywordsRenderer keywords={getAllKeywords(state.Roster)} />\r\n                <ArmyTacticalPointsRenderer stratagems={state.Stratagems} philosophy={state.Philosophy} faction={faction} />\r\n            </div> :\r\n            undefined}\r\n        {state.Roster.map((member) => <ModelSheetRenderer\r\n            key={`modelsheet-${member.name}-${member.price}`}\r\n            model={member}\r\n            context={{ renderSidebar: !isPdfSection, canAddModel: canAddModel(member.type), canRemoveModel: canRemoveModel(member.amount) }}\r\n        />)}\r\n        <div className=\"roster-sheet-footer\">{`${page.nr} / ${page.total}`}</div>\r\n    </div >;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { CodeEditorContainer } from \"../CodeMirror\";\r\nimport \"../css/BuilderPage.css\";\r\nimport { PageMap, RenderModel, Warband } from \"../types\";\r\nimport { getDetailedRoster, getRosterPrice, getStratagems } from \"../utility\";\r\nimport { AddModelComponent } from \"../utility/AddModelComponent\";\r\nimport { ErrorMessageRenderer } from \"../utility/ErrorMessages\";\r\nimport { Toolbar } from \"../utility/Toolbar\";\r\nimport { WarbandRenderer } from \"../WarbandRendering/WarbandRenderer\";\r\n\r\nconst Builder = (props: Warband) => {\r\n    const [modelMap, setModelMap] = useState<PageMap[]>([]);\r\n    const [editorVisible, setEditorVisibility] = useState<boolean>(false);\r\n    useEffect(() => {\r\n        setModelMap(() => [\r\n            ...Array.from(document.querySelectorAll(\".model-container.width-for-sidebar\")).filter((el) => el.getBoundingClientRect().height + el.getBoundingClientRect().top < 1266).map((element) => ({ \"id\": element.id, \"page\": 1 })),\r\n            ...Array.from(document.querySelectorAll(\".model-container.width-for-sidebar\")).filter((el) =>\r\n                el.getBoundingClientRect().height + el.getBoundingClientRect().top >= 1266 &&\r\n                el.getBoundingClientRect().height + el.getBoundingClientRect().top < 2288\r\n            ).map((element) => ({ \"id\": element.id, \"page\": 2 })),\r\n            ...Array.from(document.querySelectorAll(\".model-container.width-for-sidebar\")).filter((el) =>\r\n                el.getBoundingClientRect().height + el.getBoundingClientRect().top >= 2288).map((element) => ({ \"id\": element.id, \"page\": 3 })),\r\n        ]);\r\n    }, [props]);\r\n    const warbandState = { Title: props.Title, Faction: props.Faction, Alignment: props.Alignment, Philosophy: props.Philosophy, ScenariosPlayed: props.ScenariosPlayed, Roster: props.Roster };\r\n    const roster = getDetailedRoster(warbandState.Roster, warbandState.Faction, warbandState.Alignment).filter((member) => member !== undefined) as RenderModel[];\r\n\r\n    const renderState = { ...warbandState, RosterPrice: getRosterPrice(roster), Roster: roster, Stratagems: getStratagems(warbandState.Faction, roster, warbandState.Alignment, warbandState.ScenariosPlayed) };\r\n    const filterRosterToPage = (page: number): RenderModel[] => roster.filter((member) => modelMap.find((entry) => entry.id === `modelsheet-${member.name}-${member.price}-withSidebar` && entry.page === page));\r\n    const getPageCountFromMap = () => modelMap.map((model) => model.page).filter((page, idx, arr) => arr.indexOf(page) === idx).length;\r\n    const renderPages = () => {\r\n        let pages: JSX.Element[] = [];\r\n        for (let i = 1; i <= getPageCountFromMap(); i++) {\r\n            pages = [\r\n                ...pages,\r\n                <WarbandRenderer\r\n                    key={`warband-pdf-rendering-page${i}`}\r\n                    state={{ ...renderState, Roster: filterRosterToPage(i) }}\r\n                    page={{ nr: i, total: getPageCountFromMap() }}\r\n                    isPdfSection={true}\r\n                />,\r\n            ];\r\n        }\r\n        return pages;\r\n    };\r\n    return <div>\r\n        <Toolbar setEditorVisibility={setEditorVisibility} />\r\n        <AddModelComponent roster={roster} faction={warbandState.Faction} />\r\n        <ErrorMessageRenderer />\r\n        {modelMap.length ? <div>{renderPages()}</div > : undefined}\r\n        <WarbandRenderer state={renderState} page={{ nr: 1, total: 1 }} hide={editorVisible} />\r\n        <CodeEditorContainer code={warbandState} visible={editorVisible} />\r\n    </div >;\r\n};\r\n\r\nconst mapStateToProps = (state: Warband) => state;\r\n\r\nexport const BuilderPage = connect(mapStateToProps)(Builder);\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../css/LandingPage.css\";\r\nimport { SET_WARBAND } from \"../data/redux/actions\";\r\nimport { CreateWarbandIcon, ImportWarbandIcon, UseSampleIcon } from \"../images\";\r\n\r\nexport const LandingPage = () => {\r\n\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n\r\n    return (\r\n        <div className=\"landing-page \">\r\n            <div style={{ gridArea: \"1/1/1/4\", width: \"100%\", textAlign: \"center\", fontWeight: \"bold\", fontSize: \"1.5rem\" }}>HoR Configurator - choose how to continue</div>\r\n            <label htmlFor=\"file-uploader\" className=\"landing-page-columns\" style={{ gridArea: \"2/1\" }}>\r\n                <input\r\n                    id=\"file-uploader\"\r\n                    type=\"file\"\r\n                    accept=\".json\"\r\n                    style={{ display: \"none\" }}\r\n                    onChange={() => {\r\n                        const reader = new FileReader();\r\n                        reader.onload = (ev: ProgressEvent<FileReader>) => {\r\n                            dispatch({ type: SET_WARBAND, payload: JSON.parse(ev.target?.result as string) });\r\n                            history.push(\"/Builder\");\r\n                        };\r\n                        reader.readAsText((document.querySelector(\"#file-uploader\") as HTMLInputElement)?.files?.item(0) as File);\r\n                    }}\r\n                />\r\n                <div style={{ gridArea: \"1/1\" }} className=\"landing-page-column-header\">Load an existing warband from file</div>\r\n                <img style={{ gridArea: \"2/1\" }} alt=\"ImportWarband\" className=\"landing-page-column-icon\" src={ImportWarbandIcon} />\r\n            </label>\r\n            <div className=\"landing-page-columns\" style={{ gridArea: \"2/2\" }} onClick={() => history.push(\"/NewWarband\")}>\r\n                <div className=\"landing-page-column-header\">Create a new warband</div>\r\n                <img alt=\"CreateWarband\" className=\"landing-page-column-icon\" src={CreateWarbandIcon} />\r\n            </div>\r\n            <div className=\"landing-page-columns\" style={{ gridArea: \"2/3\" }} onClick={() => history.push(\"/SampleWarbands\")}>\r\n                <div className=\"landing-page-column-header\">Use a sample warband to start</div>\r\n                <img alt=\"SampleWarband\" className=\"landing-page-column-icon\" src={UseSampleIcon} />\r\n            </div>\r\n        </div >\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { getFactionSpecifics } from \"../utility\";\r\n\r\nexport const AlignmentSelection = ({ faction, selectedAlignment, setAlignmentCallback }: { faction: string; selectedAlignment: string | undefined; setAlignmentCallback(alignment: string): void }) => {\r\n    const alignments = getFactionSpecifics(faction).Alignments;\r\n    const getIconCss = (alignment: string) =>\r\n        !selectedAlignment ?\r\n            \"icon-container philosophy-container\" :\r\n            selectedAlignment === alignment ?\r\n                \"icon-container philosophy-container icon-container-selected\" :\r\n                \"icon-container philosophy-container icon-container-disabled\";\r\n    const SelectionIcons = () =>\r\n        alignments?.map((alignment) =>\r\n            <div key={`${alignment.name}selection`} className={getIconCss(alignment.name)} onClick={() => { setAlignmentCallback(alignment.name); }}>\r\n                {alignment.name}\r\n            </div>\r\n        );\r\n    return <div className=\"selection-container\">\r\n        <div className=\"selection-header\">{`Select a ${getFactionSpecifics(faction).AlignmentPlaceholder?.replace(\"<\", \"\").replace(\">\", \"\").toLocaleLowerCase()}`}</div>\r\n        {SelectionIcons()}\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { getFactionImage } from \"../images\";\r\nimport { FactionEnum } from \"../types\";\r\n\r\nexport const FactionSelection = ({ selectedFaction, setFactionCallback }: { selectedFaction: string | undefined; setFactionCallback(faction: FactionEnum): void }) => {\r\n    const getImageCss = (faction: FactionEnum) =>\r\n        !selectedFaction ?\r\n            \"icon-container faction-container\" :\r\n            selectedFaction === faction ?\r\n                \"icon-container faction-container icon-container-selected\" :\r\n                \"icon-container faction-container icon-container-disabled\";\r\n    const SelectionImages = () =>\r\n        Object.values(FactionEnum).map((faction) =>\r\n            <div key={`${faction}selection`} className={getImageCss(faction)} onClick={() => { setFactionCallback(faction); }}>\r\n                <img alt={`school ${faction}`} className=\"selection-icon\" src={getFactionImage(faction)} />\r\n                <div>{faction}</div>\r\n            </div>\r\n        );\r\n    return <div className=\"selection-container\">\r\n        <div className=\"selection-header\">Choose a faction</div>\r\n        {SelectionImages()}\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { FactionEnum } from \"../types\";\r\nimport { getPossiblePhilosophies } from \"../utility\";\r\n\r\nexport const PhilosophySelection = ({ faction, selectedPhilosophy, setPhilosophyCallback }: { faction: string; selectedPhilosophy: string | undefined; setPhilosophyCallback(philosophy: string): void }) => {\r\n    const getIconCss = (philosophy: string) =>\r\n        !selectedPhilosophy ?\r\n            \"icon-container philosophy-container\" :\r\n            selectedPhilosophy === philosophy ?\r\n                \"icon-container philosophy-container icon-container-selected\" :\r\n                \"icon-container philosophy-container icon-container-disabled\";\r\n    const SelectionIcons = () =>\r\n        Object.values(getPossiblePhilosophies(faction as FactionEnum).map((phil) =>\r\n            <div key={`${phil.name}selection`} className={getIconCss(phil.name)} onClick={() => { setPhilosophyCallback(phil.name); }}>\r\n                {phil.name}\r\n            </div>\r\n        ));\r\n    return <div className=\"selection-container\">\r\n        <div className=\"selection-header\">Choose a philosophy</div>\r\n        {SelectionIcons()}\r\n    </div>;\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"../css/NewWarbandPage.css\";\r\nimport { SET_WARBAND } from \"../data/redux/actions\";\r\nimport { FactionEnum, Warband } from \"../types\";\r\nimport { getFactionSpecifics } from \"../utility\";\r\nimport { AlignmentSelection } from \"../warbandCreation/AlignmentSelector\";\r\nimport { FactionSelection } from \"../warbandCreation/FactionSelector\";\r\nimport { PhilosophySelection } from \"../warbandCreation/PhilosophySelector\";\r\n\r\nexport const NewWarbandCreationPage = () => {\r\n    const [state, setState] = useState<Warband | undefined>(undefined);\r\n    const [warbandName, setWarbandName] = useState<string>(\"\");\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const alignments = state?.Faction && getFactionSpecifics(state.Faction).Alignments;\r\n    const setFaction = (faction: FactionEnum) => {\r\n        setState(state ? { ...state, Faction: faction } : { Title: \"\", Faction: faction, Roster: [] });\r\n    };\r\n    const setPhilosophy = (philosophy: string) => {\r\n        setState(state ? { ...state, Philosophy: philosophy } : { Title: \"\", Faction: \"\", Philosophy: philosophy, Roster: [] });\r\n    };\r\n    const setAlignment = (alignment: string) => {\r\n        setState(state ? { ...state, Alignment: alignment } : { Title: \"\", Faction: \"\", Alignment: alignment, Roster: [] });\r\n    };\r\n    return <div>\r\n        <div style={{ fontSize: \"26px\", fontWeight: \"bold\" }}>Create a new Warband from scratch</div>\r\n\r\n        <FactionSelection selectedFaction={state?.Faction} setFactionCallback={setFaction} />\r\n        {state && state.Faction ? <PhilosophySelection faction={state.Faction} selectedPhilosophy={state.Philosophy} setPhilosophyCallback={setPhilosophy} /> : null}\r\n        {state && state.Faction && alignments ? <AlignmentSelection faction={state.Faction} selectedAlignment={state.Alignment} setAlignmentCallback={setAlignment} /> : null}\r\n        <div className=\"focusable\">\r\n            <input\r\n                className=\"input-field\"\r\n                id=\"NameInput\"\r\n                placeholder=\"Enter the warband name here\"\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) => {\r\n                    setWarbandName(e.currentTarget.value);\r\n                    setState(state ? { ...state, Title: e.currentTarget.value } : { Title: e.currentTarget.value, Faction: \"\", Roster: [] });\r\n                }}\r\n                value={warbandName} />\r\n        </div>\r\n        <button\r\n            className=\"continue-button\"\r\n            onClick={() => {\r\n                dispatch({ type: SET_WARBAND, payload: state });\r\n                history.push(\"/Builder\");\r\n            }}>\r\n            Continue\r\n        </button>\r\n    </div>;\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SET_WARBAND } from \"../data/redux/actions\";\r\nimport * as AdeptaSororitas from \"../data/samples/AdeptaSororitas.json\";\r\nimport * as AdeptusMechanicus from \"../data/samples/AdeptusMechanicus.json\";\r\nimport * as DarkAngelsJson from \"../data/samples/DarkAngels.json\";\r\nimport * as PrimarisJson from \"../data/samples/PrimarisBois.json\";\r\nimport * as TauJson from \"../data/samples/TauEmpire.json\";\r\nimport { AdeptaSororitasCover, AdeptusMechanicusCover, DarkAngelsCover, DeathwatchCover, PrimarisCover, TauEmpireCover } from \"../images\";\r\nimport { Warband } from \"../types\";\r\n\r\nexport const SampleWarbandsPage = () => {\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    return (\r\n        <div className=\"landing-page-container\">\r\n            <div style={{ fontSize: \"26px\", fontWeight: \"bold\", float: \"left\", padding: \"10px\" }}>Choose a sample warband</div>\r\n            <div style={{ float: \"left\", clear: \"both\" }}>\r\n                <img\r\n                    alt=\"Dark Angels\"\r\n                    className=\"landing-page-icon\"\r\n                    src={DarkAngelsCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (DarkAngelsJson as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }}\r\n                />\r\n                <img\r\n                    alt=\"Tau Empire\"\r\n                    className=\"landing-page-icon\"\r\n                    src={TauEmpireCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (TauJson as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }}\r\n                />\r\n                <img\r\n                    alt=\"Primaris\"\r\n                    className=\"landing-page-icon\"\r\n                    src={PrimarisCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (PrimarisJson as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }}\r\n                />\r\n                <img\r\n                    alt=\"Adeptus Mechanicus\"\r\n                    className=\"landing-page-icon\"\r\n                    src={AdeptusMechanicusCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (AdeptusMechanicus as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }} />\r\n                <img\r\n                    alt=\"Deathwatch\"\r\n                    className=\"landing-page-icon\"\r\n                    src={DeathwatchCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (AdeptusMechanicus as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }} />\r\n                {/* <img\r\n                    alt=\"Astra Militarum\"\r\n                    className=\"landing-page-icon\"\r\n                    src={AstraMilitarumCover}\r\n                    onClick={() => {\r\n                        setState((AstraMilitarum as any).default as Warband);\r\n                        setPathName(\"/Warband\");\r\n                    }} /> */}\r\n                <img\r\n                    alt=\"Adepta Sororitas\"\r\n                    className=\"landing-page-icon\"\r\n                    src={AdeptaSororitasCover}\r\n                    onClick={() => {\r\n                        dispatch({ type: SET_WARBAND, payload: (AdeptaSororitas as any).default as Warband });\r\n                        history.push(\"/Builder\");\r\n                    }} />\r\n            </div>\r\n\r\n        </div >\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport \"./App.css\";\r\nimport { BuilderPage, LandingPage, NewWarbandCreationPage, SampleWarbandsPage } from \"./pages\";\r\n\r\nconst App = () =>\r\n  <BrowserRouter>\r\n    <div id=\"appBody\">\r\n      <Switch>\r\n        <Route path=\"/SampleWarbands\" component={SampleWarbandsPage} />\r\n        <Route path=\"/NewWarband\" component={NewWarbandCreationPage} />\r\n        <Route path=\"/Builder\" component={BuilderPage} />\r\n        <Route path=\"/\" component={LandingPage} />\r\n      </Switch>\r\n    </div>\r\n  </BrowserRouter>;\r\n\r\n\r\nexport const AppContainer = connect()(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore } from \"redux\";\r\nimport { AppContainer } from \"./App\";\r\nimport { stateReducer } from \"./data/redux/reducer\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nexport const store = createStore(stateReducer);\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <AppContainer />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { RosterModel, Warband } from \"../../types\";\r\nimport { getDetailedModel, isPartialMultiProfileStatLine, isSearchedModel } from \"../../utility\";\r\nimport * as ReduxActions from \"./actions\";\r\n\r\n// tslint:disable-next-line: cyclomatic-complexity\r\nexport function stateReducer(state: Warband = { Title: \"\", Faction: \"\", Roster: [] }, action: ReduxActions.Actions): Warband {\r\n    switch (action.type) {\r\n        case ReduxActions.SET_FACTION:\r\n            return { ...state, Faction: action.payload };\r\n        case ReduxActions.SET_WARBAND:\r\n            return action.payload;\r\n        case ReduxActions.DECREASE_MODEL_AMOUNT:\r\n            const unitIndex = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload, state.Faction, state.Alignment));\r\n            const model = state.Roster[unitIndex];\r\n            if (typeof (model) === \"string\") {\r\n                throw new Error(\"Cannot reduce the number of models from a single model.\");\r\n            } else {\r\n                return { ...state, Roster: [...state.Roster.slice(0, unitIndex), { ...model, amount: (model.amount || 1) - 1 }, ...state.Roster.slice(unitIndex + 1)] };\r\n            }\r\n        case ReduxActions.INCREASE_MODEL_AMOUNT:\r\n            const unitIdx = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload, state.Faction, state.Alignment));\r\n            const rosterModel = state.Roster[unitIdx];\r\n            if (typeof (rosterModel) === \"string\") {\r\n                return { ...state, Roster: [...state.Roster.slice(0, unitIdx), { name: rosterModel, amount: 2 }, ...state.Roster.slice(unitIdx + 1)] };\r\n            } else {\r\n                return { ...state, Roster: [...state.Roster.slice(0, unitIdx), { ...rosterModel, amount: (rosterModel.amount || 1) + 1 }, ...state.Roster.slice(unitIdx + 1)] };\r\n            }\r\n        case ReduxActions.REMOVE_UNIT_FROM_ROSTER:\r\n            return { ...state, Roster: state.Roster.filter((unit) => !isSearchedModel(unit, action.payload, state.Faction, state.Alignment)) };\r\n        case ReduxActions.ADD_MODEL_TO_ROSTER:\r\n            if (!state.Roster.find((unit) => typeof (unit) === \"string\" ? unit === action.payload : unit.name === action.payload)) {\r\n                return { ...state, Roster: [...state.Roster, action.payload] };\r\n            } else {\r\n                const stringIdx = state.Roster.findIndex((unit) => typeof (unit) === \"string\" && unit === action.payload);\r\n                if (stringIdx !== -1) {\r\n                    return { ...state, Roster: [...state.Roster.slice(0, stringIdx), { name: action.payload, amount: 2 }, ...state.Roster.slice(stringIdx + 1)] };\r\n                } else {\r\n                    const detailedPayloadModel = getDetailedModel(action.payload, state.Faction, state.Alignment);\r\n                    const complexIdx = state.Roster.findIndex((unit) =>\r\n                        typeof (unit) !== \"string\" &&\r\n                        unit.name === action.payload &&\r\n                        (getDetailedModel(unit, state.Faction, state.Alignment)?.price || 0) / (getDetailedModel(unit, state.Faction, state.Alignment)?.amount || 1) === detailedPayloadModel?.price);\r\n                    const detailedRosterModel = state.Roster[complexIdx] as RosterModel;\r\n                    if (detailedRosterModel) {\r\n                        return { ...state, Roster: [...state.Roster.slice(0, complexIdx), { ...detailedRosterModel, amount: (detailedRosterModel.amount || 1) + 1 }, ...state.Roster.slice(complexIdx + 1)] };\r\n                    } else {\r\n                        return { ...state, Roster: [...state.Roster, action.payload] };\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n        case ReduxActions.UPDATE_MODEL_STATS:\r\n            const modelIdx = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload.model, state.Faction, state.Alignment));\r\n            const modelWithStats = state.Roster[modelIdx];\r\n\r\n            if (typeof (modelWithStats) === \"string\") {\r\n                return { ...state, Roster: [...state.Roster.slice(0, modelIdx), { name: modelWithStats, stats: action.payload.stats }, ...state.Roster.slice(modelIdx + 1)] };\r\n            } else {\r\n                if (isPartialMultiProfileStatLine(modelWithStats.stats) && isPartialMultiProfileStatLine(action.payload.stats)) {\r\n                    const newStats = modelWithStats.stats ? {\r\n                        firstProfile: { ...modelWithStats.stats.firstProfile, ...action.payload.stats.firstProfile },\r\n                        secondProfile: { ...modelWithStats.stats.secondProfile, ...action.payload.stats.secondProfile },\r\n                    } : action.payload.stats;\r\n                    return { ...state, Roster: [...state.Roster.slice(0, modelIdx), { ...modelWithStats, stats: newStats }, ...state.Roster.slice(modelIdx + 1)] };\r\n                } else {\r\n                    return { ...state, Roster: [...state.Roster.slice(0, modelIdx), { ...modelWithStats, stats: action.payload.stats }, ...state.Roster.slice(modelIdx + 1)] };\r\n                }\r\n            }\r\n        case ReduxActions.UPDATE_MODEL_KEYWORDS:\r\n            const modelSlot = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload.model, state.Faction, state.Alignment));\r\n            const modelWithKeywords = state.Roster[modelSlot];\r\n\r\n            if (typeof (modelWithKeywords) === \"string\") {\r\n                return { ...state, Roster: [...state.Roster.slice(0, modelSlot), { name: modelWithKeywords, keywords: action.payload.keyword }, ...state.Roster.slice(modelSlot + 1)] };\r\n            } else {\r\n                return { ...state, Roster: [...state.Roster.slice(0, modelSlot), { ...modelWithKeywords, keywords: action.payload.keyword }, ...state.Roster.slice(modelSlot + 1)] };\r\n            }\r\n        case ReduxActions.MOVE_UP:\r\n            const modelNr = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload, state.Faction, state.Alignment));\r\n            const movingUnit = state.Roster[modelNr];\r\n            const switchingUnit = state.Roster[modelNr - 1];\r\n            return { ...state, Roster: [...state.Roster.slice(0, modelNr - 1), movingUnit, switchingUnit, ...state.Roster.slice(modelNr + 1)] };\r\n        case ReduxActions.MOVE_DOWN:\r\n            const modelSlot3 = state.Roster.findIndex((unit) => isSearchedModel(unit, action.payload, state.Faction, state.Alignment));\r\n            const movingModel = state.Roster[modelSlot3];\r\n            const switchingModel = state.Roster[modelSlot3 + 1];\r\n            return { ...state, Roster: [...state.Roster.slice(0, modelSlot3), switchingModel, movingModel, ...state.Roster.slice(modelSlot3 + 2)] };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n"],"sourceRoot":""}